(self.webpackChunkexph_app=self.webpackChunkexph_app||[]).push([[814],{3383:(t,n,e)=>{"use strict";e.d(n,{$:()=>ct});var o=e(5366),a=e(3464),r=e(8494),i=e(6304),c=e(2693),l=e(529),s=e(9692),u=e(7112),g=e(878),d=e(7701),m=e(6599),p=e(4689),f=e(1520),h=e(1041),_=e(3070),Z=e(4369),C=e(7307),M=e(9550),q=e(9961),x=e(1116),O=e(7064);function v(t,n){if(1&t&&(o.ynx(0),o._UZ(1,"img",13),o.BQk()),2&t){const t=o.oxw().$implicit,n=o.oxw();o.xp6(1),o.Q6J("src",n.publicUrl(t.image.formats.small?t.image.formats.small.url:t.image.url),o.LSH)}}function b(t,n){if(1&t&&o._UZ(0,"img",14),2&t){const t=o.oxw(2);o.Q6J("src",t.assetUrl("assets/image-placeholder.png"),o.LSH)}}function P(t,n){if(1&t&&(o.TgZ(0,"mat-option",9),o.TgZ(1,"div",10),o.YNc(2,v,2,1,"ng-container",11),o.YNc(3,b,1,1,"ng-template",null,12,o.W1O),o._uU(5),o.qZA(),o.qZA()),2&t){const t=n.$implicit,e=o.MAs(4);o.MGl("routerLink","/empresas/catalogo/producto/",t.id,""),o.xp6(2),o.Q6J("ngIf",t.image)("ngIfElse",e),o.xp6(3),o.hij(" ",t.name," ")}}function A(t,n){1&t&&(o.TgZ(0,"mat-option",15),o._uU(1," No hay resultados de busqueda "),o.qZA())}let T=(()=>{class t{constructor(t,n,e,o,a){this.http=t,this.router=n,this.route=e,this.formBuilder=o,this.servicesService=a,this.isLoading=!1;const r=this.route.snapshot.queryParamMap.get("_q");this.formGroup=this.formBuilder.group({_q:[r]})}ngOnInit(){var t;null===(t=this.formGroup.get("_q"))||void 0===t||t.valueChanges.pipe((0,d.b)(500),(0,m.b)(()=>{this.filteredOptions=[],this.isLoading=!0}),(0,p.w)(t=>t?this.servicesService.findServices({_q:t},"id:DESC",0,10).pipe((0,f.x)(()=>{this.isLoading=!1})):(0,g.of)(null))).subscribe(t=>{t&&(this.filteredOptions=t.data)},t=>{console.log(t)})}clear(){this.formGroup.reset()}onSubmit(){var t;let n=null===(t=this.formGroup.get("_q"))||void 0===t?void 0:t.value;n&&n.trim()&&this.router.navigate(["/empresas/catalogo/busqueda"],{queryParams:{_q:n},queryParamsHandling:"merge",replaceUrl:!0})}publicUrl(t){return`${l.N.apiUrl}${t}`}assetUrl(t){return`${l.N.basehref}${t}`}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(c.eN),o.Y36(a.F0),o.Y36(a.gz),o.Y36(h.qu),o.Y36(s.rm))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-search"]],decls:13,vars:5,consts:[[1,"search-form","d-flex",3,"formGroup","ngSubmit"],["appearance","outline",1,"search-field","w-100"],["type","submit","matPrefix","","mat-icon-button","","color","primary",1,"btn-search"],["matInput","","placeholder","Buscar","formControlName","_q",3,"matAutocomplete"],["auto","matAutocomplete"],["heigth","25",3,"routerLink",4,"ngFor","ngForOf"],["disabled","",4,"ngIf"],["matSuffix",""],[1,"btn-clear",3,"hidden","click"],["heigth","25",3,"routerLink"],[1,"service-opt-cont"],[4,"ngIf","ngIfElse"],["placeholder",""],["height","25",1,"service-opt-img",3,"src"],[1,"service-opt-img",3,"src"],["disabled",""]],template:function(t,n){if(1&t&&(o.TgZ(0,"form",0),o.NdJ("ngSubmit",function(){return n.onSubmit()}),o.TgZ(1,"mat-form-field",1),o.TgZ(2,"button",2),o.TgZ(3,"mat-icon"),o._uU(4,"search"),o.qZA(),o.qZA(),o._UZ(5,"input",3),o.TgZ(6,"mat-autocomplete",null,4),o.YNc(8,P,6,4,"mat-option",5),o.YNc(9,A,2,0,"mat-option",6),o.qZA(),o.TgZ(10,"div",7),o.TgZ(11,"mat-icon",8),o.NdJ("click",function(){return n.clear()}),o._uU(12,"clear"),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.MAs(7);let e;o.Q6J("formGroup",n.formGroup),o.xp6(5),o.Q6J("matAutocomplete",t),o.xp6(3),o.Q6J("ngForOf",n.filteredOptions),o.xp6(1),o.Q6J("ngIf",0==(null==n.filteredOptions?null:n.filteredOptions.length)),o.xp6(2),o.Q6J("hidden",!(null!=(e=n.formGroup.get("_q"))&&e.value))}},directives:[h._Y,h.JL,h.sg,_.KE,Z.lW,_.qo,C.Hw,M.Nt,h.Fj,q.ZL,h.JJ,h.u,q.XC,x.sg,x.O5,_.R9,O.ey,a.rH],styles:[".search-form[_ngcontent-%COMP%]{position:relative;max-width:500px;flex-grow:1}@media (max-width:1400px){.search-form[_ngcontent-%COMP%]{margin-right:20px}}.search-form[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%}.search-form[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px}.search-form[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]{display:flex;justify-content:center;height:auto;cursor:pointer;font-weight:700;color:#1136a8}.search-form[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.search-form[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-form-field-outline{transition:none!important}.search-form[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-form-field-prefix{top:.55em;left:-5px}.search-form[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-form-field-infix{border-top-width:0;padding:1em 0 .75em}.search-form[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-form-field-suffix{top:.4em;min-width:24px}.service-opt-img[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px;height:24px;width:24px;border-radius:18px;object-fit:cover}"]}),t})();var w=e(7070),y=e(7217),U=e(5078),N=e(6278);function k(t,n){if(1&t){const t=o.EpF();o.ynx(0),o.TgZ(1,"a",7),o.NdJ("click",function(n){const e=o.CHM(t).$implicit;return o.oxw(2).onClick(n,e)}),o.TgZ(2,"div",8),o._UZ(3,"span",9),o._UZ(4,"p",10),o.qZA(),o.TgZ(5,"div",11),o.TgZ(6,"span",12),o._uU(7),o.ALo(8,"date"),o.qZA(),o.qZA(),o.qZA(),o._UZ(9,"mat-divider"),o.BQk()}if(2&t){const t=n.$implicit;o.xp6(3),o.ekj("unread",!t.read),o.xp6(1),o.Q6J("innerHtml",t.message,o.oJD),o.xp6(3),o.Oqu(o.xi3(8,4,t.created_at,"dd/MM/yyyy"))}}function J(t,n){if(1&t&&(o.TgZ(0,"mat-nav-list",5),o._UZ(1,"mat-divider"),o.YNc(2,k,10,7,"ng-container",6),o.qZA()),2&t){const t=o.oxw();o.xp6(2),o.Q6J("ngForOf",t._notifications)}}function Q(t,n){1&t&&(o.ynx(0),o.TgZ(1,"span",13),o._uU(2," No hay notificaciones. "),o.qZA(),o.BQk())}let I=(()=>{class t{constructor(t,n){this.router=t,this.notificationsService=n,this._notifications=[],this._sort="created_at:DESC",this._start=0,this._limit=10}ngOnInit(){this.n_sub=this.notificationsService.notifications.subscribe(t=>{this._notifications=t}),this.doRefresh(null)}ngOnDestroy(){this.n_sub.unsubscribe()}loadData(t){console.log("scroll reach end"),this.notificationsService.loadNotifications(this._sort,this._notifications.length,this._limit).then(n=>{t&&t.target.complete()})}doRefresh(t){this._notifications=[],this.notificationsService.refreshNotifications(this._sort,this._notifications.length,this._limit).then(n=>{t&&t.target.complete()})}onClick(t,n){n.read||this.notificationsService.setRead(n),n.link&&this.router.navigate([n.link])}onDelete(t){console.log("Borrando notificacion",t.id),this.notificationsService.delete(t)}onDeleteAll(){console.log("Borrando todals las notificaciones"),this.notificationsService.deleteAll()}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(a.F0),o.Y36(s.TF))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-notifications-list"]],decls:7,vars:2,consts:[["class","notification-list",4,"ngIf"],[4,"ngIf"],[1,"pt-2","d-flex","justify-content-end"],["mat-button","","routerLink","/empresas/general",1,"btn-xs","ps-2","pe-0","mx-1","view-all"],["color","primary"],[1,"notification-list"],[4,"ngFor","ngForOf"],["mat-list-item","",3,"click"],["mat-line","",1,"notification-msg"],[1,"notification-status"],[3,"innerHtml"],[1,"list-item-float"],[1,"date"],[1,"no-notifications","pt-3"]],template:function(t,n){1&t&&(o.YNc(0,J,3,1,"mat-nav-list",0),o.YNc(1,Q,3,0,"ng-container",1),o.TgZ(2,"div",2),o.TgZ(3,"a",3),o._uU(4,"Ver todas "),o.TgZ(5,"mat-icon",4),o._uU(6,"chevron_right"),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.Q6J("ngIf",n._notifications.length),o.xp6(1),o.Q6J("ngIf",!n._notifications.length))},directives:[x.O5,Z.zs,a.yS,C.Hw,U.Hk,N.d,x.sg,U.Tg,O.X2],pipes:[x.uU],styles:[".no-notifications[_ngcontent-%COMP%]{display:block;width:220px;font-size:12px;line-height:16px;text-align:center;color:#6b6b6b}.no-notifications[_ngcontent-%COMP%], .view-all[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal}.view-all[_ngcontent-%COMP%]{font-weight:700;font-size:10px;line-height:12px;color:#062ebd}"]}),t})(),Y=(()=>{class t{constructor(){}ngOnInit(){}img_url(){var t,n;return this.image?(null===(t=this.image.formats)||void 0===t?void 0:t.thumbnail)?`${l.N.apiUrl}${null===(n=this.image.formats)||void 0===n?void 0:n.thumbnail.url}`:`${l.N.apiUrl}${this.image.url}`:`${l.N.basehref}assets/user.png`}publicUrl(t){}assetUrl(t){return`${l.N.basehref}${t}`}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-user-image"]],inputs:{image:"image"},decls:15,vars:1,consts:[["width","55","height","58","viewBox","0 0 55 58","fill","none","xmlns","http://www.w3.org/2000/svg"],["filter","url(#filter0_d)"],["cx","27.25","cy","28.25","rx","24","ry","24","fill","url(#img)"],["d","M28.4565 4.04267L27.1932 3.30279L25.9298 4.04267L6.72979 15.2868L5.49316 16.011V17.4441V39.0675V40.4822L6.7059 41.2106L25.9059 52.7431L27.1932 53.5163L28.4804 52.7431L47.6804 41.2106L48.8932 40.4822V39.0675V17.4441V16.011L47.6565 15.2868L28.4565 4.04267Z","stroke","#F2F2F2","stroke-width","5"],["id","filter0_d","x","0","y","4","width","54.0353","height","54","filterUnits","userSpaceOnUse","color-interpolation-filters","sRGB"],["flood-opacity","0","result","BackgroundImageFix"],["in","SourceAlpha","type","matrix","values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"],["dy","2"],["stdDeviation","1.5"],["type","matrix","values","0 0 0 0 0.251563 0 0 0 0 0.582255 0 0 0 0 0.670833 0 0 0 0.24 0"],["mode","normal","in2","BackgroundImageFix","result","effect1_dropShadow"],["mode","normal","in","SourceGraphic","in2","effect1_dropShadow","result","shape"],["id","img","patternUnits","userSpaceOnUse","width","54","height","54"],["x","4","y","4","width","46","height","50"]],template:function(t,n){1&t&&(o.O4$(),o.TgZ(0,"svg",0),o.TgZ(1,"g",1),o._UZ(2,"ellipse",2),o.qZA(),o._UZ(3,"path",3),o.TgZ(4,"defs"),o.TgZ(5,"filter",4),o._UZ(6,"feFlood",5),o._UZ(7,"feColorMatrix",6),o._UZ(8,"feOffset",7),o._UZ(9,"feGaussianBlur",8),o._UZ(10,"feColorMatrix",9),o._UZ(11,"feBlend",10),o._UZ(12,"feBlend",11),o.qZA(),o.TgZ(13,"pattern",12),o._UZ(14,"image",13),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.xp6(14),o.uIk("href",n.img_url(),null,"xlink"))},styles:[""]}),t})();function S(t,n){if(1&t&&(o.TgZ(0,"li"),o.TgZ(1,"a",4),o._uU(2),o.qZA(),o.qZA()),2&t){const t=n.$implicit;o.xp6(1),o.Q6J("routerLink",t.url?t.url:t.category?"/empresas/catalogo/category/"+t.category.slug:null),o.xp6(1),o.Oqu(t.label)}}let z=(()=>{class t{constructor(t){this.http=t}ngOnInit(){this.reloadGroup()}reloadGroup(){const t=new c.LE;this.http.get(`${l.N.apiUrl}/category-groups/${this.group.id}`,{params:t}).subscribe(t=>{this.group=t},t=>{})}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(c.eN))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-dropdown-links-group"]],inputs:{group:"group"},decls:6,vars:2,consts:[[1,"sm-list"],[1,"sm-list-header"],[1,"dropdown-divider"],[4,"ngFor","ngForOf"],[1,"dropdown-item",3,"routerLink"]],template:function(t,n){1&t&&(o.TgZ(0,"ul",0),o.TgZ(1,"li",1),o.TgZ(2,"span"),o._uU(3),o.qZA(),o.qZA(),o._UZ(4,"div",2),o.YNc(5,S,3,2,"li",3),o.qZA()),2&t&&(o.xp6(3),o.Oqu(n.group.label),o.xp6(2),o.Q6J("ngForOf",n.group.links))},directives:[x.sg,a.yS],styles:["ul.sm-list[_ngcontent-%COMP%]{min-width:10rem;padding:0;margin:0 50px 0 0;text-align:left;list-style:none}ul.sm-list[_ngcontent-%COMP%]:last-child{margin-right:0}ul.sm-list[_ngcontent-%COMP%]   .dropdown-divider[_ngcontent-%COMP%]{height:0;margin:.3rem 0;overflow:hidden;border-top:1px solid #97bcc566}ul.sm-list[_ngcontent-%COMP%]   li.sm-list-header[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:14px;line-height:17px;padding:3px 0;color:var(--app-text-primary)}ul.sm-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.dropdown-item[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:500;font-size:13px;line-height:16px;padding:3px 0;color:var(--app-gris-muy-oscuro)}"]}),t})();function F(t,n){1&t&&o._UZ(0,"app-dropdown-links-group",51),2&t&&o.Q6J("group",n.$implicit)}function D(t,n){if(1&t&&(o.ynx(0),o.TgZ(1,"a",45),o._uU(2),o._UZ(3,"i",46),o.qZA(),o.TgZ(4,"div",47),o.TgZ(5,"div",48),o.TgZ(6,"h6"),o._uU(7),o.qZA(),o.qZA(),o.TgZ(8,"div",49),o.YNc(9,F,1,1,"app-dropdown-links-group",50),o.qZA(),o.qZA(),o.BQk()),2&t){const t=o.oxw().$implicit;o.xp6(1),o.Q6J("routerLink",t.url?t.url:t.category?"/empresas/catalogo/category/"+t.category.slug:null),o.xp6(1),o.hij("",t.label," "),o.xp6(5),o.Oqu(t.label),o.xp6(2),o.Q6J("ngForOf",t.groups)}}function $(t,n){if(1&t&&(o.ynx(0),o.TgZ(1,"a",45),o._uU(2),o.qZA(),o.BQk()),2&t){const t=o.oxw().$implicit;o.xp6(1),o.Q6J("routerLink",t.url?t.url:t.category?"/empresas/catalogo/category/"+t.category.slug:null),o.xp6(1),o.Oqu(t.label)}}function B(t,n){1&t&&(o.TgZ(0,"li",43),o.YNc(1,D,10,4,"ng-container",44),o.YNc(2,$,3,2,"ng-container",44),o.qZA()),2&t&&(o.Q6J("ngSwitch",n.$implicit.__component),o.xp6(1),o.Q6J("ngSwitchCase","menu.dropdown"),o.xp6(1),o.Q6J("ngSwitchCase","menu.link"))}function E(t,n){if(1&t&&(o.ynx(0),o.YNc(1,B,3,3,"li",42),o.BQk()),2&t){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.departaments_menu.body)}}let L=(()=>{class t{constructor(t,n,e,o,a){this.http=t,this.router=n,this.authenticationService=e,this.notificationsService=o,this.chat=a,this._unread=0,this._userSub=this.authenticationService.currentUser.subscribe(t=>this.currentUser=t),this.loadMenu()}ngOnInit(){this.n_sub=this.notificationsService.unread.subscribe(t=>{this._unread=t}),this.notificationsService.countUnread()}ngOnDestroy(){this._userSub.unsubscribe(),this.n_sub.unsubscribe()}logout(){var t=this;return(0,i.Z)(function*(){yield t.chat.socketCloseConnection(),yield t.authenticationService.logout(),t.router.navigate(["/login"])})()}loadMenu(){const t=new c.LE;this.http.get(`${l.N.apiUrl}/nav-catalog`,{params:t}).subscribe(t=>{this.departaments_menu=t},t=>{})}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(c.eN),o.Y36(a.F0),o.Y36(s.$h),o.Y36(s.TF),o.Y36(s.yf))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-header"]],inputs:{snav:"snav",sidebar:"sidebar"},decls:67,vars:8,consts:[[1,"app-header-shadow"],[1,"logo-cont"],["routerLink","/empresas"],["src","assets/logo.png",1,"logo"],[1,"tbr","tbr-primary"],[1,"flex-spacer"],[1,"flex-spacer","d-none","d-xxl-block"],["mat-raised-button","","color","primary","routerLink","/empresas/cotizador",1,"btn-round","btn-cotizador"],["mat-button","",1,"notifications-btn",3,"matMenuTriggerFor"],["matBadgePosition","before",3,"matBadge","matBadgeHidden"],["xPosition","after",1,"notifications-panel"],["menuNotif","matMenu"],["mat-button","",1,"user-btn",3,"matMenuTriggerFor"],[1,"user-btn-cont"],[1,"me-2",3,"image"],[1,"d-none","d-xxl-block"],["aria-hidden","false"],["xPosition","before"],["menuUser","matMenu"],["mat-menu-item","",3,"click"],[1,"tbr","tbr-secondary"],[1,"navbar","navbar-expand-md","navbar-light"],[1,"container-fluid"],["mat-icon-button","",3,"hidden","click"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"d-none","d-sm-block","d-md-none"],[1,"d-flex"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-2"],["type","submit",1,"btn","btn-outline-success"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["tabindex","-1","routerLink","/empresas",1,"nav-link"],[1,"nav-item","dropdown"],["id","navDepartamentos","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link"],[1,"fas","fa-angle-down"],["aria-labelledby","navDepartamentos",1,"dropdown-menu","ddm-lvl-0"],[4,"ngIf"],["tabindex","-1","routerLink","/empresas/catalogo/ofertas-relampago",1,"nav-link"],["tabindex","-1","routerLink","/empresas/catalogo/proveedores",1,"nav-link"],["tabindex","-1",1,"nav-link"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"dropdown-item",3,"routerLink"],[1,"fas","fa-angle-right"],[1,"dropdown-menu","dropdown-submenu","ddm-lvl-1"],[1,"sm-header"],[1,"sm-body"],[3,"group",4,"ngFor","ngForOf"],[3,"group"]],template:function(t,n){if(1&t&&(o.TgZ(0,"header",0),o.TgZ(1,"div",1),o.TgZ(2,"a",2),o._UZ(3,"img",3),o.qZA(),o.qZA(),o.TgZ(4,"mat-toolbar"),o.TgZ(5,"mat-toolbar-row",4),o._UZ(6,"div",5),o._UZ(7,"app-search"),o._UZ(8,"div",6),o.TgZ(9,"div"),o.TgZ(10,"button",7),o._uU(11,"Cotizador"),o.qZA(),o.TgZ(12,"button",8),o.TgZ(13,"mat-icon",9),o._uU(14,"notifications"),o.qZA(),o.qZA(),o.TgZ(15,"mat-menu",10,11),o._UZ(17,"app-notifications-list"),o.qZA(),o.TgZ(18,"button",12),o.TgZ(19,"div",13),o._UZ(20,"app-user-image",14),o.TgZ(21,"span",15),o._uU(22),o.qZA(),o.TgZ(23,"mat-icon",16),o._uU(24,"expand_more"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(25,"mat-menu",17,18),o.TgZ(27,"button",19),o.NdJ("click",function(){return n.logout()}),o.TgZ(28,"mat-icon"),o._uU(29,"logout"),o.qZA(),o.TgZ(30,"span"),o._uU(31,"Cerrar sesi\xf3n"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(32,"mat-toolbar-row",20),o.TgZ(33,"nav",21),o.TgZ(34,"div",22),o.TgZ(35,"button",23),o.NdJ("click",function(){return n.snav.toggle()}),o.TgZ(36,"mat-icon"),o._uU(37,"menu"),o.qZA(),o.qZA(),o.TgZ(38,"button",24),o._UZ(39,"span",25),o.qZA(),o.TgZ(40,"div",26),o.TgZ(41,"div",27),o.TgZ(42,"button",24),o._UZ(43,"span",25),o.qZA(),o.TgZ(44,"form",28),o._UZ(45,"input",29),o.TgZ(46,"button",30),o._uU(47,"Search"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(48,"ul",31),o.TgZ(49,"li",32),o.TgZ(50,"a",33),o._uU(51,"Inicio"),o.qZA(),o.qZA(),o.TgZ(52,"li",34),o.TgZ(53,"a",35),o._uU(54," Departamentos "),o._UZ(55,"i",36),o.qZA(),o.TgZ(56,"ul",37),o.YNc(57,E,2,1,"ng-container",38),o.qZA(),o.qZA(),o.TgZ(58,"li",32),o.TgZ(59,"a",39),o._uU(60,"Ofertas Rel\xe1mpago"),o.qZA(),o.qZA(),o.TgZ(61,"li",32),o.TgZ(62,"a",40),o._uU(63,"Directorio de Proveedores"),o.qZA(),o.qZA(),o.TgZ(64,"li",32),o.TgZ(65,"a",41),o._uU(66,"Ayuda"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.MAs(16),e=o.MAs(26);o.xp6(12),o.Q6J("matMenuTriggerFor",t),o.xp6(1),o.Q6J("matBadge",n._unread)("matBadgeHidden",!n._unread),o.xp6(5),o.Q6J("matMenuTriggerFor",e),o.xp6(2),o.Q6J("image",null==n.currentUser||null==n.currentUser.company?null:n.currentUser.company.profile_picture),o.xp6(2),o.Oqu((null==n.currentUser?null:n.currentUser.username)||"-"),o.xp6(13),o.Q6J("hidden","none"==n.sidebar),o.xp6(22),o.Q6J("ngIf",n.departaments_menu)}},directives:[a.yS,u.Ye,u.rD,T,Z.lW,a.rH,w.p6,C.Hw,y.k,w.VK,I,Y,w.OP,h._Y,h.JL,h.F,x.O5,x.sg,x.RF,x.n9,z],styles:["header[_ngcontent-%COMP%]{display:flex;background:#fff}header[_ngcontent-%COMP%]   .logo-cont[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-width:var(--app-sidebar-width)}header[_ngcontent-%COMP%]   .logo-cont[_ngcontent-%COMP%]   img.logo[_ngcontent-%COMP%]{width:180px}mat-toolbar[_ngcontent-%COMP%]   mat-toolbar-row.tbr-primary[_ngcontent-%COMP%]{display:flex;background:var(--app-header-bg-primary)}mat-toolbar[_ngcontent-%COMP%]   mat-toolbar-row.tbr-secondary[_ngcontent-%COMP%]{height:48px;padding:0;background-color:var(--app-header-bg-secondary)}mat-toolbar[_ngcontent-%COMP%]   mat-toolbar-row.tbr-secondary[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]{width:100%;padding:0}mat-toolbar[_ngcontent-%COMP%]   mat-toolbar-row.tbr-secondary[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%] > .nav-item[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{padding:16px 24px;font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:16px;display:flex;align-items:center;text-align:center;color:var(--app-text-primary)}mat-toolbar[_ngcontent-%COMP%]   mat-toolbar-row.tbr-secondary[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%] > .nav-item[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px;font-size:16px;color:var(--app-amarillo-claro)}app-search[_ngcontent-%COMP%]{flex-grow:1}.btn-cotizador[_ngcontent-%COMP%]{width:120px;margin-right:20px;box-shadow:0 4px 4px #00000040}.notifications-btn[_ngcontent-%COMP%]{height:55px;color:#fff}.notifications-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{background:#c6c6c6;color:#fff}.user-btn[_ngcontent-%COMP%]{padding:0 8px;height:55px}.user-btn[_ngcontent-%COMP%]   .user-btn-cont[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#fff}.user-btn[_ngcontent-%COMP%]   .user-btn-cont[_ngcontent-%COMP%]     svg{max-height:52px}.user-btn[_ngcontent-%COMP%]   .user-btn-cont[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--app-amarillo-claro)}.ddm-lvl-0[_ngcontent-%COMP%]{padding:0;margin-top:0;border-radius:0;border:1px #0000;filter:drop-shadow(0 2px 3px rgba(64,148,171,.24))}.ddm-lvl-0[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a.dropdown-item[_ngcontent-%COMP%]{min-width:250px;padding:12px;font-family:Montserrat;font-style:normal;font-weight:500;font-size:14px;line-height:17px;display:flex;align-items:center;color:var(--app-text-primary)}.ddm-lvl-0[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a.dropdown-item[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{margin-left:auto;font-size:16px;color:var(--app-amarillo-claro)}div.ddm-lvl-1[_ngcontent-%COMP%]{padding:0;margin-top:6px;border-radius:0;border:1px #0000;filter:drop-shadow(0 2px 3px rgba(64,148,171,.24))}div.ddm-lvl-1[_ngcontent-%COMP%]   div.sm-header[_ngcontent-%COMP%]{padding:12px 50px;color:#fff;background-color:var(--app-amarillo-claro)}div.ddm-lvl-1[_ngcontent-%COMP%]   div.sm-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:14px;line-height:17px}div.ddm-lvl-1[_ngcontent-%COMP%]   div.sm-body[_ngcontent-%COMP%]{display:flex;padding:20px 40px}.dropdown-item.active[_ngcontent-%COMP%], .dropdown-item[_ngcontent-%COMP%]:active{color:#fff!important;text-decoration:none;background-color:var(--app-blue-cyan)}@media (max-width:767px){.navbar-collapse[_ngcontent-%COMP%]{position:fixed;left:0;top:0;background:#fff;height:100vh}}"]}),t})();var j=e(168),H=e(2589);function G(t,n){1&t&&(o.TgZ(0,"a",16),o.TgZ(1,"span"),o._uU(2,"Usuarios"),o.qZA(),o.TgZ(3,"mat-icon",8),o._uU(4,"chevron_right"),o.qZA(),o.qZA())}let R=(()=>{class t{constructor(t,n){this.router=t,this.authenticationService=n}ngOnInit(){this._userSub=this.authenticationService.currentUser.subscribe(t=>this.currentUser=t)}ngOnDestroy(){this._userSub.unsubscribe()}logout(){this.authenticationService.logout(),this.router.navigate(["/login"])}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(a.F0),o.Y36(s.$h))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-side-nav"]],decls:34,vars:5,consts:[[1,"container-sidebar"],[1,"section-user"],["mat-button","","routerLink","/empresas/perfil","routerLinkActive","active",1,"user-btn"],[1,"user-btn-cont"],[3,"image"],[1,"user-name","text-right"],["aria-hidden","false"],["mat-list-item","","routerLink","/empresas/general","routerLinkActive","active"],[1,"chevron-right"],["mat-list-item","","routerLink","/empresas/cotizaciones","routerLinkActive","active"],["mat-list-item","","routerLink","/empresas/ofertas-relampago","routerLinkActive","active"],["mat-list-item","","routerLink","/empresas/usuarios","routerLinkActive","active",4,"ngIf"],["mat-list-item","","routerLink","/empresas/incidencias","routerLinkActive","active"],[3,"matBadge","matBadgeHidden"],[1,"flex-spacer"],["mat-button","",1,"logout-btn",3,"click"],["mat-list-item","","routerLink","/empresas/usuarios","routerLinkActive","active"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"a",2),o.TgZ(3,"div",3),o._UZ(4,"app-user-image",4),o.TgZ(5,"span",5),o._uU(6),o.qZA(),o.TgZ(7,"mat-icon",6),o._uU(8,"chevron_right"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(9,"mat-nav-list"),o.TgZ(10,"a",7),o.TgZ(11,"span"),o._uU(12,"General"),o.qZA(),o.TgZ(13,"mat-icon",8),o._uU(14,"chevron_right"),o.qZA(),o.qZA(),o.TgZ(15,"a",9),o.TgZ(16,"span"),o._uU(17,"Cotizaciones"),o.qZA(),o.TgZ(18,"mat-icon",8),o._uU(19,"chevron_right"),o.qZA(),o.qZA(),o.TgZ(20,"a",10),o.TgZ(21,"span"),o._uU(22,"Ofertas Rel\xe1mpago"),o.qZA(),o.TgZ(23,"mat-icon",8),o._uU(24,"chevron_right"),o.qZA(),o.qZA(),o.YNc(25,G,5,0,"a",11),o.TgZ(26,"a",12),o.TgZ(27,"span",13),o._uU(28,"Incidencias"),o.qZA(),o.TgZ(29,"mat-icon",8),o._uU(30,"chevron_right"),o.qZA(),o.qZA(),o.qZA(),o._UZ(31,"div",14),o.TgZ(32,"a",15),o.NdJ("click",function(){return n.logout()}),o._uU(33,"Cerrar sesi\xf3n"),o.qZA(),o.qZA()),2&t&&(o.xp6(4),o.Q6J("image",null==n.currentUser||null==n.currentUser.company?null:n.currentUser.company.profile_picture),o.xp6(2),o.Oqu((null==n.currentUser?null:n.currentUser.username)||"-"),o.xp6(19),o.Q6J("ngIf","administrator"==(null==n.currentUser||null==n.currentUser.role?null:n.currentUser.role.type)),o.xp6(2),o.Q6J("matBadge",0)("matBadgeHidden",!0))},directives:[Z.zs,a.yS,a.Od,Y,C.Hw,U.Hk,U.Tg,x.O5,y.k],styles:[".container-sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;width:var(--app-sidebar-width);padding:0!important;margin:0!important}@media (max-width:599px){.container-sidebar[_ngcontent-%COMP%]{min-height:100%}}.user-btn[_ngcontent-%COMP%]{padding:8px;width:100%;background-color:var(--app-amarillo-claro);border-radius:0}.user-btn[_ngcontent-%COMP%]   .user-btn-cont[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#fff}.user-btn[_ngcontent-%COMP%]   .user-btn-cont[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{position:relative;overflow:visible}.user-btn[_ngcontent-%COMP%]   .user-btn-cont[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.user-btn[_ngcontent-%COMP%]   .user-btn-cont[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-grow:1}.user-btn[_ngcontent-%COMP%]   .user-btn-cont[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}mat-nav-list[_ngcontent-%COMP%]{padding:0}mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:41px;font-family:Montserrat;font-style:normal;font-weight:600;font-size:14px;color:var(--app-azul-marino)}mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]     .mat-list-item-content{padding:0 8px}mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-grow:1}mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]     .mat-badge-content{right:0;top:auto;font-weight:400}mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   mat-icon.chevron-right[_ngcontent-%COMP%]{color:var(--app-amarillo-claro)}mat-nav-list[_ngcontent-%COMP%]   .mat-list-item.active[_ngcontent-%COMP%]{color:#fff;background-color:var(--app-cyan)}mat-nav-list[_ngcontent-%COMP%]   .mat-list-item.active[_ngcontent-%COMP%]   mat-icon.chevron-right[_ngcontent-%COMP%]{color:#fff}.logout-btn[_ngcontent-%COMP%]{background:#01a9d62b;color:var(--app-azul-marino)}"]}),t})();var V=e(3148),X=e(994),W=e(5522),K=e(6489);function tt(t,n){if(1&t&&(o.TgZ(0,"mat-list-option",18),o._uU(1),o.qZA()),2&t){const t=n.$implicit;o.Q6J("value",t.id),o.xp6(1),o.hij(" ",t.name," ")}}function nt(t,n){if(1&t&&(o.TgZ(0,"mat-expansion-panel",16),o.TgZ(1,"mat-expansion-panel-header"),o.TgZ(2,"div",17),o.NdJ("click",function(t){return t.stopPropagation()}),o.TgZ(3,"mat-list-option",18),o._uU(4),o.qZA(),o.qZA(),o.qZA(),o.TgZ(5,"div",19),o.YNc(6,tt,2,2,"mat-list-option",20),o.qZA(),o.qZA()),2&t){const t=n.$implicit;o.Q6J("disabled",!(null!=t.key.childrens&&t.key.childrens.length)),o.xp6(3),o.Q6J("value",t.key.id),o.xp6(1),o.hij(" ",t.key.name," "),o.xp6(2),o.Q6J("ngForOf",t.key.childrens)}}function et(t,n){if(1&t){const t=o.EpF();o.TgZ(0,"mat-chip",21,22),o.NdJ("click",function(){o.CHM(t);const n=o.MAs(1);return o.oxw().toggleSelection(n)}),o._uU(2),o.qZA()}if(2&t){const t=n.$implicit;o.Q6J("value",t.key.id),o.xp6(2),o.Oqu(t.key.name)}}function ot(t,n){if(1&t){const t=o.EpF();o.TgZ(0,"mat-chip",21,22),o.NdJ("click",function(){o.CHM(t);const n=o.MAs(1);return o.oxw().toggleSelection(n)}),o._uU(2),o.qZA()}if(2&t){const t=n.$implicit;o.Q6J("value",t.key.id),o.xp6(2),o.Oqu(t.key.name)}}let at=(()=>{class t{constructor(t,n,e,o,r,i){this.http=t,this.router=n,this.route=e,this.location=o,this.formBuilder=r,this.filterService=i,this.skipReload=!1,this.is_cat_page=!1,this.categories=new Map,this.sub_categories=new Map,this.payment_methods=new Map,this.payment_terms=new Map,this.checkSlug(),this.navSubscription=this.router.events.subscribe(t=>{t instanceof a.m2&&this.checkSlug()});let c=this.filterService.currentFiltersValue;this.filterForm=this.formBuilder.group({_q:[c._q?c._q:null],_favs:[!!c._favs&&c._favs],categories:[c.categories?c.categories:null],payment_terms:[c.payment_terms?c.payment_terms:null],payment_methods:[c.payment_methods?c.payment_methods:null]}),this.filterForm.valueChanges.pipe((0,d.b)(500)).subscribe(t=>{let n=this.filterForm.getRawValue();this.filterService.setFilters(n)})}get categoriesFormArray(){return this.filterForm.controls.categories}addCategories(){this.categories.forEach(()=>this.categoriesFormArray.push(new h.NI(!1)))}ngOnInit(){(0,V.D)([this.filterService.getCategories(),this.filterService.getPaymentMethods(),this.filterService.getPaymentTerms()]).subscribe(([t,n,e])=>{t.forEach(t=>{0==t.depth?this.categories.set(t,!1):this.sub_categories.set(t,!1)}),n.forEach(t=>this.payment_methods.set(t,!1)),e.forEach(t=>this.payment_terms.set(t,!1))})}ngOnDestroy(){this.navSubscription.unsubscribe()}checkSlug(){this.is_cat_page=this.router.url.startsWith("/empresas/catalogo/category"),this.slug=this.route.children[0].snapshot.paramMap.get("slug")}toggleSelection(t){t.toggleSelected(!0)}categoryChangue(){var t;let n=null===(t=this.filterForm.get("categories"))||void 0===t?void 0:t.value;this.is_cat_page&&n.length&&"/empresas/catalogo"!=this.router.url.split("?")[0]&&(this.skipReload=!0,this.router.navigate(["/empresas/catalogo"],{state:{ignoreInitial:!0}}))}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(c.eN),o.Y36(a.F0),o.Y36(a.gz),o.Y36(x.Ye),o.Y36(h.qu),o.Y36(s.qX))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-side-search"]],decls:33,vars:10,consts:[[1,"container-sidebar",3,"formGroup"],[1,"search-row"],["appearance","outline",1,"search-field"],["matPrefix","",3,"click"],["mat-icon-button","","color","primary"],["matInput","","placeholder","Buscar","formControlName","_q"],[1,"fav-row"],["color","primary","formControlName","_favs",1,"example-margin"],[1,"cat-row"],[1,"row-title"],["formControlName","categories",1,"categories-list",3,"selectionChange"],["class","mat-elevation-z",3,"disabled",4,"ngFor","ngForOf"],[1,"pm-row"],["formControlName","payment_methods","selectable","","multiple","",1,"payment-options"],[3,"value","click",4,"ngFor","ngForOf"],["formControlName","payment_terms","selectable","","multiple","",1,"payment-options"],[1,"mat-elevation-z",3,"disabled"],[3,"click"],["checkboxPosition","before",3,"value"],[1,"sub-categories"],["checkboxPosition","before",3,"value",4,"ngFor","ngForOf"],[3,"value","click"],["c","matChip"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"mat-form-field",2),o.TgZ(3,"span",3),o.NdJ("click",function(t){return t.preventDefault()}),o.TgZ(4,"button",4),o.TgZ(5,"mat-icon"),o._uU(6,"search"),o.qZA(),o.qZA(),o.qZA(),o._UZ(7,"input",5),o.qZA(),o.qZA(),o.TgZ(8,"div",6),o.TgZ(9,"mat-checkbox",7),o._uU(10," Ver solo favoritos "),o.qZA(),o.qZA(),o._UZ(11,"mat-divider"),o.TgZ(12,"div",8),o.TgZ(13,"h4",9),o._uU(14,"Categor\xedas"),o.qZA(),o.TgZ(15,"mat-selection-list",10),o.NdJ("selectionChange",function(){return n.categoryChangue()}),o.YNc(16,nt,7,4,"mat-expansion-panel",11),o.ALo(17,"keyvalue"),o.qZA(),o.qZA(),o._UZ(18,"mat-divider"),o.TgZ(19,"div",12),o.TgZ(20,"h4",9),o._uU(21,"M\xe9todos de pago"),o.qZA(),o.TgZ(22,"mat-chip-list",13),o.YNc(23,et,3,2,"mat-chip",14),o.ALo(24,"keyvalue"),o.qZA(),o.qZA(),o._UZ(25,"mat-divider"),o.TgZ(26,"div",12),o.TgZ(27,"h4",9),o._uU(28,"Plazos de pago"),o.qZA(),o.TgZ(29,"mat-chip-list",15),o.YNc(30,ot,3,2,"mat-chip",14),o.ALo(31,"keyvalue"),o.qZA(),o.qZA(),o._UZ(32,"mat-divider"),o.qZA()),2&t&&(o.Q6J("formGroup",n.filterForm),o.xp6(16),o.Q6J("ngForOf",o.lcZ(17,4,n.categories)),o.xp6(7),o.Q6J("ngForOf",o.lcZ(24,6,n.payment_methods)),o.xp6(7),o.Q6J("ngForOf",o.lcZ(31,8,n.payment_terms)))},directives:[h.JL,h.sg,_.KE,_.qo,Z.lW,C.Hw,M.Nt,h.Fj,h.JJ,h.u,X.oG,N.d,U.Ub,x.sg,W.qn,K.ib,K.yz,U.vS,W.HS],pipes:[x.Nd],styles:[".container-sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;width:var(--app-sidebar-width);padding:0!important;margin:0!important}@media (max-width:599px){.container-sidebar[_ngcontent-%COMP%]{min-height:100%}}.container-sidebar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:1rem}.container-sidebar[_ngcontent-%COMP%]   h4.row-title[_ngcontent-%COMP%]{margin-bottom:.75em;font-family:Montserrat;font-style:normal;font-weight:700;font-size:11px;line-height:13px;color:#5a6a6f}.container-sidebar[_ngcontent-%COMP%]   .search-row[_ngcontent-%COMP%]{padding:1em;background:var(--app-amarillo-claro)}.container-sidebar[_ngcontent-%COMP%]   .search-row[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%}.container-sidebar[_ngcontent-%COMP%]   .search-row[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.container-sidebar[_ngcontent-%COMP%]   .search-row[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-form-field-outline{transition:none!important}.container-sidebar[_ngcontent-%COMP%]   .search-row[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-form-field-prefix{top:.45em;left:-5px}.container-sidebar[_ngcontent-%COMP%]   .search-row[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-form-field-infix{border-top-width:0;padding:1em 0 .75em}.container-sidebar[_ngcontent-%COMP%]   .fav-row[_ngcontent-%COMP%]{display:flex;justify-content:center}.container-sidebar[_ngcontent-%COMP%]   .cat-row[_ngcontent-%COMP%]   mat-selection-list[_ngcontent-%COMP%]{margin-left:-1rem;margin-right:-1rem}.container-sidebar[_ngcontent-%COMP%]   .cat-row[_ngcontent-%COMP%]   mat-selection-list[_ngcontent-%COMP%]   mat-list-option[_ngcontent-%COMP%]{height:2em;font-family:Montserrat;font-style:normal;font-weight:600;font-size:11px;line-height:13px;color:#00aad3}.container-sidebar[_ngcontent-%COMP%]   .cat-row[_ngcontent-%COMP%]   mat-selection-list[_ngcontent-%COMP%]   mat-list-option[_ngcontent-%COMP%]:focus{background:none}.container-sidebar[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{border-radius:0}.container-sidebar[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{display:flex;padding-left:0;padding-right:0}.container-sidebar[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]     .mat-expansion-indicator{margin-left:10px;margin-right:10px}.container-sidebar[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex-grow:1}.container-sidebar[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   mat-list-option[_ngcontent-%COMP%]{height:36px}.container-sidebar[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0 14px 16px}"]}),t})();function rt(t,n){1&t&&o._UZ(0,"app-side-nav")}function it(t,n){1&t&&o._UZ(0,"app-side-search")}let ct=(()=>{class t{constructor(t,n,e){this.route=t,this.sidebar="nav",this.sidebarSub=this.route.data.subscribe(t=>this.sidebar=t.sidebar),this.mobileQuery=e.matchMedia("(max-width: 767px)"),this._mobileQueryListener=()=>n.detectChanges(),this.mobileQuery.addListener(this._mobileQueryListener)}ngOnInit(){}ngOnDestroy(){this.sidebarSub.unsubscribe(),this.mobileQuery.removeListener(this._mobileQueryListener)}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(a.gz),o.Y36(o.sBO),o.Y36(r.vx))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-layout"]],decls:13,vars:9,consts:[[1,"wrapper"],[3,"snav","sidebar"],[1,"app-main-drawer",3,"hasBackdrop"],[3,"opened","mode","fixedInViewport","fixedTopGap"],["snav",""],[4,"ngIf"],[1,"content-wrapper"],[1,"flex-spacer"],[1,"footer-bg"]],template:function(t,n){if(1&t&&(o.TgZ(0,"div",0),o._UZ(1,"app-header",1),o.TgZ(2,"mat-sidenav-container",2),o.TgZ(3,"mat-sidenav",3,4),o.YNc(5,rt,1,0,"app-side-nav",5),o.YNc(6,it,1,0,"app-side-search",5),o.qZA(),o.TgZ(7,"mat-sidenav-content"),o.TgZ(8,"div",6),o._UZ(9,"router-outlet"),o.qZA(),o._UZ(10,"div",7),o._UZ(11,"footer",8),o.qZA(),o.qZA(),o.qZA(),o._UZ(12,"ngx-spinner")),2&t){const t=o.MAs(4);o.xp6(1),o.Q6J("snav",t)("sidebar",n.sidebar),o.xp6(1),o.Q6J("hasBackdrop",!1),o.xp6(1),o.Q6J("opened",!n.mobileQuery.matches)("mode",n.mobileQuery.matches?"over":"side")("fixedInViewport",!1)("fixedTopGap",100),o.xp6(2),o.Q6J("ngIf","nav"==n.sidebar),o.xp6(1),o.Q6J("ngIf","search"==n.sidebar)}},directives:[L,j.TM,j.JX,x.O5,j.Rh,a.lC,H.Ro,R,at],styles:["app-header[_ngcontent-%COMP%]{position:relative;width:100vw;z-index:2}mat-sidenav-container[_ngcontent-%COMP%]{flex-grow:1;background-color:initial}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{filter:drop-shadow(2px 0 2px rgba(64,148,171,.12))}@media (max-width:599px){mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav.mat-sidenav-fixed[_ngcontent-%COMP%]{top:92px!important}}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav-content[_ngcontent-%COMP%]{min-height:calc(100vh - 100px);display:flex;flex-direction:column}@media (max-width:599px){mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav-content[_ngcontent-%COMP%]{min-height:calc(100vh - 92px)!important}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav-content[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{margin-top:92px}}"]}),t})()},1814:(t,n,e)=>{"use strict";e.r(n),e.d(n,{EmpresasModule:()=>wi});var o=e(1116),a=e(3464),r=e(1041),i=e(2693),c=e(7952),l=e(2705),s=e(2905),u=e(18),g=e(2589),d=e(3582),m=e(5366);let p=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[o.ez,a.Bz,r.u5,r.UX,g.ef,l.q,d.D]]}),t})();var f=e(8970),h=e(5530),_=e(6304),Z=e(9609),C=e(9692);let M=(()=>{class t{constructor(t,n){this.router=t,this.authenticationService=n}canActivate(t,n){var e=this;return(0,_.Z)(function*(){var t,n,o;const a=e.authenticationService.currentUserValue;return"active"!=(null===(t=a.company)||void 0===t?void 0:t.subscription_status)?(e.router.navigate(["/empresas/subscripcion-expirada"]),!1):(null===(n=a.company)||void 0===n?void 0:n.current_period_end)&&!!Z().isSameOrBefore(Z(null===(o=a.company)||void 0===o?void 0:o.current_period_end),"minute")||(e.router.navigate(["/empresas/subscripcion-expirada"]),!1)})()}}return t.\u0275fac=function(n){return new(n||t)(m.LFG(a.F0),m.LFG(C.$h))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})();var q=e(3383),x=e(529),O=e(3251),v=e(4369),b=e(7307),P=e(7217);function A(t,n){if(1&t&&m._UZ(0,"mat-icon",20),2&t){const t=m.oxw();m.Q6J("matBadge",t.pending)}}function T(t,n){1&t&&m._UZ(0,"mat-icon",21)}function w(t,n){if(1&t&&m._UZ(0,"mat-icon",22),2&t){const t=m.oxw();m.Q6J("matBadge",t.unread)}}function y(t,n){1&t&&m._UZ(0,"mat-icon",23)}function U(t,n){if(1&t&&m._UZ(0,"mat-icon",24),2&t){const t=m.oxw();m.Q6J("matBadge",t.unrated)}}function N(t,n){1&t&&m._UZ(0,"mat-icon",25)}let k=(()=>{class t{constructor(t,n){this.http=t,this.authenticationService=n,this.pending=0,this.unread=0,this.unrated=0,this.currentUser=n.currentUserValue}ngOnInit(){this.countPending(),this.countUnread(),this.countUnrated()}countPending(){let t=(new i.LE).append("status_in",2);this.http.get(`${x.N.apiUrl}/quotations/count`,{params:t}).subscribe(t=>{this.pending=t})}countUnread(){let t=(new i.LE).append("user",this.currentUser.id).append("chat_room.unread_a_gt",0);this.http.get(`${x.N.apiUrl}/quotations/count`,{params:t}).subscribe(t=>{this.unread+=t}),this.http.get(`${x.N.apiUrl}/offer-requests/count`,{params:t}).subscribe(t=>{this.unread+=t})}countUnrated(){let t=Z().format("YYYY-MM-DD"),n=(new i.LE).append("status_in",5).append("offer.deliver_at_lte",t);this.http.get(`${x.N.apiUrl}/quotations/count`,{params:n}).subscribe(t=>{this.unrated=t})}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(C.$h))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-index"]],decls:77,vars:12,consts:[[1,"container","mt-5"],[1,"row","gy-4","justify-content-around","mb-5"],[1,"col-auto","d-flex","flex-column","justify-content-center","align-items-center"],[1,"step","step-gold"],[1,"pb-5"],[1,"my-2"],[1,"py-2","px-3"],["mat-flat-button","","color","accent","routerLink","catalogo",1,"btn-round"],["mat-flat-button","","color","accent","routerLink","catalogo/proveedores",1,"btn-round"],["mat-flat-button","","color","accent","routerLink","cotizador",1,"btn-round"],[1,"notes","px-4","py-3"],[1,"icon-cont"],["svgIcon","cotizacion",3,"matBadge",4,"ngIf"],["svgIcon","cotizacion-disable",4,"ngIf"],["mat-flat-button","","color","accent","routerLink","cotizaciones",1,"btn-round"],["svgIcon","mnsg",3,"matBadge",4,"ngIf"],["svgIcon","mnsg-disable",4,"ngIf"],[1,"step"],["svgIcon","star",3,"matBadge",4,"ngIf"],["svgIcon","star-disable",4,"ngIf"],["svgIcon","cotizacion",3,"matBadge"],["svgIcon","cotizacion-disable"],["svgIcon","mnsg",3,"matBadge"],["svgIcon","mnsg-disable"],["svgIcon","star",3,"matBadge"],["svgIcon","star-disable"]],template:function(t,n){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"div",3),m.TgZ(4,"span"),m._uU(5,"1"),m.qZA(),m.qZA(),m.TgZ(6,"mat-card",4),m.TgZ(7,"mat-card-header"),m.TgZ(8,"mat-card-title"),m._uU(9,"Busca"),m.qZA(),m.qZA(),m.TgZ(10,"mat-card-content"),m.TgZ(11,"p",5),m._uU(12,"Utiliza nuestras herramientas y encuentra lo que necesitas."),m.qZA(),m.qZA(),m.TgZ(13,"mat-card-actions",6),m.TgZ(14,"button",7),m._uU(15,"Por departamento"),m.qZA(),m.TgZ(16,"button",8),m._uU(17,"Por Proveedor"),m.qZA(),m.TgZ(18,"button",9),m._uU(19,"Cotizador autom\xe1tico"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(20,"div",2),m.TgZ(21,"div",3),m.TgZ(22,"span"),m._uU(23,"2"),m.qZA(),m.qZA(),m.TgZ(24,"mat-card",4),m.TgZ(25,"mat-card-header"),m.TgZ(26,"mat-card-title"),m._uU(27,"Recibe propuestas"),m.qZA(),m.qZA(),m.TgZ(28,"mat-card-content"),m.TgZ(29,"p",5),m._uU(30,"Eval\xfaa las cotizaciones que te env\xeden nuestros proveedores."),m.qZA(),m.TgZ(31,"div",10),m.TgZ(32,"div",11),m.YNc(33,A,1,1,"mat-icon",12),m.YNc(34,T,1,0,"mat-icon",13),m.qZA(),m._uU(35," Cotizaciones pendientes "),m.qZA(),m.qZA(),m.TgZ(36,"mat-card-actions",6),m.TgZ(37,"button",14),m._uU(38,"Ir al panel"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(39,"div",2),m.TgZ(40,"div",3),m.TgZ(41,"span"),m._uU(42,"3"),m.qZA(),m.qZA(),m.TgZ(43,"mat-card",4),m.TgZ(44,"mat-card-header"),m.TgZ(45,"mat-card-title"),m._uU(46,"Contacta a tu proveedor"),m.qZA(),m.qZA(),m.TgZ(47,"mat-card-content"),m.TgZ(48,"p",5),m._uU(49,"Afina los detalles de la propuesta y cierra el trato."),m.qZA(),m.TgZ(50,"div",10),m.TgZ(51,"div",11),m.YNc(52,w,1,1,"mat-icon",15),m.YNc(53,y,1,0,"mat-icon",16),m.qZA(),m._uU(54," Conversaciones sin leer "),m.qZA(),m.qZA(),m.TgZ(55,"mat-card-actions",6),m.TgZ(56,"button",14),m._uU(57,"Ir al panel"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(58,"div",2),m.TgZ(59,"div",17),m.TgZ(60,"span"),m._uU(61,"4"),m.qZA(),m.qZA(),m.TgZ(62,"mat-card",4),m.TgZ(63,"mat-card-header"),m.TgZ(64,"mat-card-title"),m._uU(65,"Eval\xfaa"),m.qZA(),m.qZA(),m.TgZ(66,"mat-card-content"),m.TgZ(67,"p",5),m._uU(68,"Califica tu experiencia con nuestros proveedores."),m.qZA(),m.TgZ(69,"div",10),m.TgZ(70,"div",11),m.YNc(71,U,1,1,"mat-icon",18),m.YNc(72,N,1,0,"mat-icon",19),m.qZA(),m._uU(73," Proveedores sin calificar "),m.qZA(),m.qZA(),m.TgZ(74,"mat-card-actions",6),m.TgZ(75,"button",14),m._uU(76,"Ir al panel"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(31),m.ekj("disable",!n.pending),m.xp6(2),m.Q6J("ngIf",n.pending),m.xp6(1),m.Q6J("ngIf",!n.pending),m.xp6(16),m.ekj("disable",!n.unread),m.xp6(2),m.Q6J("ngIf",n.unread),m.xp6(1),m.Q6J("ngIf",!n.unread),m.xp6(16),m.ekj("disable",!n.unrated),m.xp6(2),m.Q6J("ngIf",n.unrated),m.xp6(1),m.Q6J("ngIf",!n.unrated))},directives:[O.a8,O.dk,O.n5,O.dn,O.hq,v.lW,a.rH,o.O5,b.Hw,P.k],styles:[".step[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;width:95px;height:108px;background-image:url(hexagono-B.bc24c274b2ebfbc070aa.png),url(hex-frame.b3d98c4687a28bbb2055.svg);background-size:contain;background-position:50%;background-repeat:no-repeat;margin-bottom:15px}.step[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600;font-size:28px;line-height:34px;color:var(--app-cyan)}.step.step-gold[_ngcontent-%COMP%]{background-image:url(hexagono-Y.7201c47b8e52279b8f0e.png),url(hex-frame.b3d98c4687a28bbb2055.svg)}.step.step-gold[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--app-amarillo-claro)}mat-card[_ngcontent-%COMP%]{width:240px;max-width:100%;display:flex;flex-direction:column;flex-grow:1;background:#fff;border:1px solid #97bcc566;box-sizing:border-box;border-radius:10px;box-shadow:none!important}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{min-height:58px;display:flex;text-align:center;align-items:center;justify-content:center}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:24px;line-height:29px;margin:0;color:#1136a8}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex-grow:1}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:11px;line-height:13px;text-align:center}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;display:flex;align-items:center;color:#5a6a6f}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:17px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notes.disable[_ngcontent-%COMP%]{color:#c4c4c4}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .icon-cont[_ngcontent-%COMP%]{padding-right:15px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .icon-cont[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:50px;height:50px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .icon-cont[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     .mat-badge-content{top:5px;right:-10px;width:25px;height:25px;line-height:25px}mat-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px}"]}),t})();function J(t,n){if(1&t&&(m.ynx(0),m.TgZ(1,"video",4),m._UZ(2,"source",5),m._uU(3," Your browser does not support the video tag. "),m.qZA(),m.BQk()),2&t){const t=m.oxw();m.xp6(2),m.Q6J("src",t.publicUrl(t.videoConfig.value),m.LSH)}}let Q=(()=>{class t{constructor(t){this.http=t}ngOnInit(){this.getConfig()}getConfig(){this.http.get(`${x.N.apiUrl}/configs/welcome-video-url`).subscribe(t=>{this.videoConfig=t})}publicUrl(t){return`${x.N.apiUrl}${t}`}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-bienvenido"]],decls:9,vars:1,consts:[[1,"container","mt-5"],[1,"app-modal-shadow","text-center","p-5"],[4,"ngIf"],["mat-raised-button","","color","accent","routerLink","/empresas",1,"btn-round","btn-sm","mt-4"],["width","560","height","315","controls",""],["type","video/mp4",3,"src"]],template:function(t,n){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"mat-card",1),m.TgZ(2,"h2"),m._uU(3,"\xa1Felicidades ahora formas parte de Exphotel Hive"),m.qZA(),m.TgZ(4,"p"),m._uU(5,"A partir de este momento puedes utilizar la plataforma ,si tienes alg\xfan problema visita nuestra p\xe1gina de ayuda."),m.qZA(),m.YNc(6,J,4,1,"ng-container",2),m.TgZ(7,"a",3),m._uU(8,"Ir a mi panel de usuario"),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(6),m.Q6J("ngIf",n.videoConfig&&n.videoConfig.value))},directives:[O.a8,o.O5,v.zs,a.yS],styles:["@media (min-width:992px){.container[_ngcontent-%COMP%]{max-width:calc(763px + var(--bs-gutter-x,.75rem)*2)}}mat-card[_ngcontent-%COMP%]{border-radius:30px}mat-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;font-size:18px;line-height:150.19%;color:var(--app-blue-cyan)}mat-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;text-align:center}mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:126.69%;color:var(--app-gris-muy-oscuro)}mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:var(--app-cyan)}mat-card[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border-radius:20px;background-color:#00000040}mat-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{max-width:100%}mat-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:220px}"]}),t})();var I=e(5078),Y=e(6278),S=e(7064);function z(t,n){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"a",9),m.NdJ("click",function(n){const e=m.CHM(t).$implicit;return m.oxw(2).onClick(n,e)}),m.TgZ(2,"div",10),m._UZ(3,"span",11),m._UZ(4,"p",12),m.qZA(),m.TgZ(5,"div",13),m.TgZ(6,"span",14),m._uU(7),m.ALo(8,"date"),m.qZA(),m.TgZ(9,"span",15),m._uU(10),m.qZA(),m.qZA(),m.qZA(),m._UZ(11,"mat-divider"),m.BQk()}if(2&t){const t=n.$implicit;m.xp6(3),m.ekj("unread",!t.read),m.xp6(1),m.Q6J("innerHtml",t.message,m.oJD),m.xp6(3),m.Oqu(m.xi3(8,5,t.created_at,"dd/MM/yyyy")),m.xp6(3),m.Oqu((null==t.user?null:t.user.firstname)+" "+(null==t.user?null:t.user.lastname))}}function F(t,n){if(1&t&&(m.TgZ(0,"mat-nav-list",7),m._UZ(1,"mat-divider"),m.YNc(2,z,12,8,"ng-container",8),m.qZA()),2&t){const t=m.oxw();m.xp6(2),m.Q6J("ngForOf",t._notifications)}}function D(t,n){1&t&&(m.ynx(0),m.TgZ(1,"span",16),m._uU(2," No hay notificaciones. "),m.qZA(),m.BQk())}let $=(()=>{class t{constructor(t,n){this.router=t,this.notificationsService=n,this._notifications=[],this._unread=0,this._sort="created_at:DESC",this._start=0,this._limit=100}ngOnInit(){this.unread_sub=this.notificationsService.unread.subscribe(t=>{this._unread=t}),this.notifications_sub=this.notificationsService.notificationsFull.subscribe(t=>{this._notifications=t}),this.doRefresh(null)}ngOnDestroy(){this.unread_sub.unsubscribe(),this.notifications_sub.unsubscribe()}loadData(t){console.log("scroll reach end"),this.notificationsService.loadNotificationsFull(this._sort,this._notifications.length,this._limit).then(n=>{t&&t.target.complete()})}doRefresh(t){this._notifications=[],this.notificationsService.refreshNotificationsFull(this._sort,this._notifications.length,this._limit).then(n=>{t&&t.target.complete()})}onClick(t,n){n.read||this.notificationsService.setRead(n),n.link&&this.router.navigate([n.link])}onDelete(t){console.log("Borrando notificacion",t.id),this.notificationsService.delete(t)}onDeleteAll(){console.log("Borrando todals las notificaciones"),this.notificationsService.deleteAll()}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(a.F0),m.Y36(C.TF))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-notifications-full"]],decls:15,vars:5,consts:[[1,"actividad-card","app-modal-shadow","pb-4"],[1,"card-tools"],["mat-icon-button","","color","accent",3,"disabled"],["matBadgePosition","before",3,"matBadge","matBadgeHidden"],["class","notification-list",4,"ngIf"],[4,"ngIf"],["mat-button","","color","warn",1,"btn-xs",3,"click"],[1,"notification-list"],[4,"ngFor","ngForOf"],["mat-list-item","",3,"click"],["mat-line","",1,"notification-msg"],[1,"notification-status"],[3,"innerHtml"],[1,"list-item-end"],[1,"date"],[1,"user"],[1,"no-notifications","pt-3"]],template:function(t,n){1&t&&(m.TgZ(0,"mat-card",0),m.TgZ(1,"mat-card-title"),m._uU(2," Actividad "),m.TgZ(3,"div",1),m.TgZ(4,"a",2),m.TgZ(5,"mat-icon",3),m._uU(6,"notifications"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(7,"mat-card-content"),m.YNc(8,F,3,1,"mat-nav-list",4),m.YNc(9,D,3,0,"ng-container",5),m.qZA(),m.TgZ(10,"mat-card-actions"),m.TgZ(11,"button",6),m.NdJ("click",function(){return n.onDeleteAll()}),m.TgZ(12,"mat-icon"),m._uU(13,"delete_forever"),m.qZA(),m._uU(14,"Borrar todas"),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(4),m.Q6J("disabled",!n._unread),m.xp6(1),m.Q6J("matBadge",n._unread)("matBadgeHidden",!n._unread),m.xp6(3),m.Q6J("ngIf",n._notifications.length),m.xp6(1),m.Q6J("ngIf",!n._notifications.length))},directives:[O.a8,O.n5,v.zs,b.Hw,P.k,O.dn,o.O5,O.hq,v.lW,I.Hk,Y.d,o.sg,I.Tg,S.X2],pipes:[o.uU],styles:["mat-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:10px}mat-card.actividad-card[_ngcontent-%COMP%]{height:510px;overflow-x:auto}mat-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{flex-shrink:0;display:flex;justify-content:space-between;align-items:center;font-family:Montserrat;font-style:normal;font-weight:600;font-size:18px;line-height:22px;min-height:42px;color:var(--app-gris-muy-oscuro)}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{position:relative;flex-grow:1}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]   span.date[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]   span.date[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600;font-size:10px;line-height:12px;color:#999d9e}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]   span.user[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]   span.user[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600;font-size:10px;line-height:12px;margin-top:3px;color:#00aad3}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .no-notifications[_ngcontent-%COMP%]{display:block;font-family:Montserrat;font-style:normal;font-size:12px;line-height:16px;text-align:center;color:#6b6b6b}mat-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{text-align:right}"]}),t})();var B=e(7298),E=e(7123);function L(t,n){1&t&&m._UZ(0,"mat-icon",27)}function j(t,n){1&t&&m._UZ(0,"mat-icon",28)}function H(t,n){1&t&&m._UZ(0,"mat-icon",29)}function G(t,n){1&t&&m._UZ(0,"mat-icon",30)}function R(t,n){1&t&&m._UZ(0,"mat-icon",31),2&t&&m.Q6J("matBadge",0)("matBadgeHidden",!0)}function V(t,n){1&t&&m._UZ(0,"mat-icon",32)}const X=function(){return[1,2,3]},W=function(){return[5,7]},K=function(){return[4,6]},tt=function(){return[3,5]};function nt(t,n){if(1&t&&(m.ynx(0),m.TgZ(1,"a",11),m.TgZ(2,"div",12),m._UZ(3,"app-profile-picture",13),m.qZA(),m.TgZ(4,"div",14),m._uU(5),m.qZA(),m.TgZ(6,"div",15),m._uU(7),m.qZA(),m.TgZ(8,"div",16),m.TgZ(9,"span",17),m._uU(10),m.ALo(11,"date"),m.qZA(),m.TgZ(12,"span",18),m._uU(13),m.qZA(),m.TgZ(14,"div",19),m.TgZ(15,"span"),m._uU(16),m.qZA(),m.ynx(17,20),m.YNc(18,L,1,0,"mat-icon",21),m.YNc(19,j,1,0,"mat-icon",22),m.YNc(20,H,1,0,"mat-icon",23),m.YNc(21,G,1,0,"mat-icon",24),m.BQk(),m.ynx(22,20),m.YNc(23,R,1,2,"mat-icon",25),m.YNc(24,V,1,0,"mat-icon",26),m.BQk(),m.qZA(),m.qZA(),m.qZA(),m._UZ(25,"mat-divider"),m.BQk()),2&t){const t=n.$implicit;m.xp6(1),m.hYB("routerLink","/empresas/cotizaciones/",null==t.group?null:t.group.id,"/",t.id,""),m.xp6(2),m.Q6J("profile_picture",null==t.supplier?null:t.supplier.profile_picture),m.xp6(2),m.Oqu(null==t.supplier?null:t.supplier.name),m.xp6(2),m.Oqu((null==t.service?null:t.service.name)||(null==t.group?null:t.group.name)),m.xp6(3),m.Oqu(m.xi3(11,17,t.created_at,"dd/MM/yyyy")),m.xp6(3),m.Oqu((null==t.user?null:t.user.firstname)+" "+(null==t.user?null:t.user.lastname)),m.xp6(2),m.Gre("pill pill-",null==t.status?null:t.status.class,""),m.xp6(1),m.Oqu(null==t.status?null:t.status.name),m.xp6(1),m.Q6J("ngSwitch",null==t.status?null:t.status.id),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(20,X)),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(21,W)),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(22,K)),m.xp6(2),m.Q6J("ngSwitch",null==t.status?null:t.status.id),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(23,tt))}}function et(t,n){1&t&&m._UZ(0,"mat-icon",27)}function ot(t,n){1&t&&m._UZ(0,"mat-icon",28)}function at(t,n){1&t&&m._UZ(0,"mat-icon",29)}function rt(t,n){1&t&&m._UZ(0,"mat-icon",30)}function it(t,n){1&t&&m._UZ(0,"mat-icon",31),2&t&&m.Q6J("matBadge",0)("matBadgeHidden",!0)}function ct(t,n){1&t&&m._UZ(0,"mat-icon",32)}function lt(t,n){if(1&t&&(m.ynx(0),m.TgZ(1,"a",11),m.TgZ(2,"div",12),m._UZ(3,"app-profile-picture",13),m.qZA(),m.TgZ(4,"div",14),m._uU(5),m.qZA(),m.TgZ(6,"div",15),m._uU(7),m.qZA(),m.TgZ(8,"div",16),m.TgZ(9,"span",17),m._uU(10),m.ALo(11,"date"),m.qZA(),m.TgZ(12,"span",18),m._uU(13),m.qZA(),m.TgZ(14,"div",19),m.TgZ(15,"span"),m._uU(16),m.qZA(),m.ynx(17,20),m.YNc(18,et,1,0,"mat-icon",21),m.YNc(19,ot,1,0,"mat-icon",22),m.YNc(20,at,1,0,"mat-icon",23),m.YNc(21,rt,1,0,"mat-icon",24),m.BQk(),m.ynx(22,20),m.YNc(23,it,1,2,"mat-icon",25),m.YNc(24,ct,1,0,"mat-icon",26),m.BQk(),m.qZA(),m.qZA(),m.qZA(),m._UZ(25,"mat-divider"),m.BQk()),2&t){const t=n.$implicit;m.xp6(1),m.MGl("routerLink","/proveedores/ofertas-relampago/",t.id,""),m.xp6(2),m.Q6J("profile_picture",null==t.company?null:t.company.profile_picture),m.xp6(2),m.Oqu(null==t.company?null:t.company.name),m.xp6(2),m.Oqu(null==t.offer?null:t.offer.name),m.xp6(3),m.Oqu(m.xi3(11,16,t.created_at,"dd/MM/yyyy")),m.xp6(3),m.Oqu((null==t.user?null:t.user.firstname)+" "+(null==t.user?null:t.user.lastname)),m.xp6(2),m.Gre("pill pill-",null==t.status?null:t.status.class,""),m.xp6(1),m.Oqu(null==t.status?null:t.status.name),m.xp6(1),m.Q6J("ngSwitch",null==t.status?null:t.status.id),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(19,X)),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(20,W)),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(21,K)),m.xp6(2),m.Q6J("ngSwitch",null==t.status?null:t.status.id),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(22,tt))}}let st=(()=>{class t{constructor(t,n){this.http=t,this.authenticationService=n,this.quotations=[],this.requests=[],this.currentUser=this.authenticationService.currentUserValue}ngOnInit(){this.loadQuotations(),this.loadOfferRequests()}loadQuotations(){const t=(new i.LE).set("_sort","created_at:DESC").set("_limit",5);this.http.get(`${x.N.apiUrl}/quotations`,{params:t}).subscribe(t=>{this.quotations=t},t=>{})}loadOfferRequests(){const t=(new i.LE).set("_sort","created_at:DESC").set("_limit",5);this.http.get(`${x.N.apiUrl}/offer-requests`,{params:t}).subscribe(t=>{this.requests=t},t=>{})}publicUrl(t){return`${x.N.apiUrl}${t}`}assetUrl(t){return`${x.N.basehref}${t}`}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(C.$h))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-general"]],decls:28,vars:2,consts:[[1,"container-fluid","pt-5","px-md-5"],[1,"row","g-4"],[1,"col-xl-6"],[1,"col-md-12"],[1,"cotizaciones-card","app-modal-shadow","pb-4"],[1,"card-tools"],["mat-raised-button","","color","accent","routerLink","/empresas/cotizaciones",1,"btn-round","btn-xs"],[4,"ngFor","ngForOf"],[1,"col-12"],[1,"ofertas-card","app-modal-shadow","pb-4"],["mat-raised-button","","color","accent","routerLink","/empresas/ofertas-relampago",1,"btn-round","btn-xs"],["mat-list-item","",3,"routerLink"],["mat-list-icon","",1,"proveedor-logo"],[3,"profile_picture"],["mat-line","",1,"proveedor-nombre"],["mat-line","",1,"servicio-nombre"],[1,"list-item-end"],[1,"date"],[1,"user"],[1,"list-item-utils"],[3,"ngSwitch"],["svgIcon","cotizacion-pending",4,"jrSwitchCases"],["svgIcon","cotizacion-active",4,"jrSwitchCases"],["svgIcon","cotizacion-reject",4,"jrSwitchCases"],["svgIcon","cotizacion",4,"ngSwitchDefault"],["svgIcon","mnsg","matBadgeSize","small",3,"matBadge","matBadgeHidden",4,"jrSwitchCases"],["svgIcon","mnsg-disable",4,"ngSwitchDefault"],["svgIcon","cotizacion-pending"],["svgIcon","cotizacion-active"],["svgIcon","cotizacion-reject"],["svgIcon","cotizacion"],["svgIcon","mnsg","matBadgeSize","small",3,"matBadge","matBadgeHidden"],["svgIcon","mnsg-disable"]],template:function(t,n){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"div",1),m.TgZ(4,"div",3),m.TgZ(5,"mat-card",4),m.TgZ(6,"mat-card-title"),m._uU(7," Cotizaciones "),m.TgZ(8,"div",5),m.TgZ(9,"a",6),m._uU(10,"Ver Todas"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(11,"mat-card-content"),m.TgZ(12,"mat-nav-list"),m._UZ(13,"mat-divider"),m.YNc(14,nt,26,24,"ng-container",7),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(15,"div",8),m.TgZ(16,"mat-card",9),m.TgZ(17,"mat-card-title"),m._uU(18," Ofertas Rel\xe1mpago "),m.TgZ(19,"div",5),m.TgZ(20,"a",10),m._uU(21,"Ver Todas"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(22,"mat-card-content"),m.TgZ(23,"mat-nav-list"),m._UZ(24,"mat-divider"),m.YNc(25,lt,26,23,"ng-container",7),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(26,"div",2),m._UZ(27,"app-notifications-full"),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(14),m.Q6J("ngForOf",n.quotations),m.xp6(11),m.Q6J("ngForOf",n.requests))},directives:[O.a8,O.n5,v.zs,a.yS,O.dn,I.Hk,Y.d,o.sg,$,I.Tg,I.Nh,B.q,S.X2,o.RF,E.I,o.ED,b.Hw,P.k],pipes:[o.uU],styles:["mat-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:10px}mat-card.actividad-card[_ngcontent-%COMP%]{min-height:510px}mat-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{flex-shrink:0;display:flex;justify-content:space-between;align-items:center;font-family:Montserrat;font-style:normal;font-weight:600;font-size:18px;line-height:22px;min-height:42px;color:var(--app-gris-muy-oscuro)}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{position:relative;flex-grow:1}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.proveedor-logo[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.proveedor-logo[_ngcontent-%COMP%]{overflow:hidden;width:30px;height:30px;padding:0;border-radius:30px;border:1px solid #97bcc566;box-sizing:border-box;background:#f2f2f2;box-shadow:0 2px 3px #4094ab3d}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.proveedor-logo[_ngcontent-%COMP%]     img, mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.proveedor-logo[_ngcontent-%COMP%]     img{width:100%;height:100%}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .proveedor-nombre[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .proveedor-nombre[_ngcontent-%COMP%]{margin-bottom:.25em;font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .servicio-nombre[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .servicio-nombre[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:500;font-size:12px;line-height:15px;color:var(--app-gris)}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]   span.date[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]   span.date[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600;font-size:10px;line-height:12px;color:#999d9e}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]   span.user[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]   span.user[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600;font-size:10px;line-height:12px;margin-top:3px;color:#00aad3}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]   .list-item-utils[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]   .list-item-utils[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:5px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]   .list-item-utils[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]   .list-item-utils[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]{height:20px;width:75px;margin-right:8px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]   .list-item-utils[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]   .list-item-utils[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{line-height:27px;height:27px;width:27px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]   .list-item-utils[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     .mat-badge-content, mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   div.list-item-end[_ngcontent-%COMP%]   .list-item-utils[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     .mat-badge-content{top:2px;right:-4px;font-size:7px;line-height:12px;width:12px;height:12px}mat-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{text-align:right}"]}),t})();var ut=e(8378),gt=e(9199),dt=e(9241),mt=e(5609),pt=e(3070),ft=e(9550),ht=e(3841),_t=e(2762),Zt=e(994);function Ct(t,n){if(1&t&&(m.TgZ(0,"mat-option",12),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.Q6J("value",t.id),m.xp6(1),m.Oqu(t.name)}}function Mt(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"th",46),m.TgZ(1,"mat-checkbox",47),m.NdJ("change",function(n){m.CHM(t);const e=m.oxw();return n?e.masterToggle():null}),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(1),m.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function qt(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"td",48),m.NdJ("click",function(t){return t.stopPropagation()}),m.TgZ(1,"mat-checkbox",49),m.NdJ("click",function(t){return t.stopPropagation()})("change",function(n){const e=m.CHM(t).$implicit,o=m.oxw();return n?o.selection.toggle(e):null}),m.qZA(),m.qZA()}if(2&t){const t=n.$implicit,e=m.oxw();m.xp6(1),m.Q6J("checked",e.selection.isSelected(t))("aria-label",e.checkboxLabel(t))}}function xt(t,n){1&t&&(m.TgZ(0,"th",50),m._uU(1," ID "),m.qZA())}function Ot(t,n){if(1&t&&(m.TgZ(0,"td",51),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",t.id," ")}}function vt(t,n){1&t&&(m.TgZ(0,"th",50),m._uU(1," Nombre "),m.qZA())}function bt(t,n){if(1&t&&(m.TgZ(0,"td",51),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",t.name," ")}}function Pt(t,n){1&t&&(m.TgZ(0,"th",50),m._uU(1," Usuario "),m.qZA())}function At(t,n){if(1&t&&(m.TgZ(0,"td",51),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",t.user.firstname," ")}}function Tt(t,n){1&t&&(m.TgZ(0,"th",52),m._uU(1," N\xb0 de Cotizaciones "),m.qZA())}function wt(t,n){if(1&t&&(m.TgZ(0,"td",53),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",t.quotations.length," ")}}function yt(t,n){1&t&&(m.TgZ(0,"th",50),m._uU(1," Fecha "),m.qZA())}function Ut(t,n){if(1&t&&(m.TgZ(0,"td",51),m._uU(1),m.ALo(2,"date"),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",m.xi3(2,1,t.created_at,"dd/MM/yyyy")," ")}}function Nt(t,n){1&t&&m._UZ(0,"th",46)}function kt(t,n){if(1&t&&(m.TgZ(0,"span",55),m._uU(1),m.qZA()),2&t){const t=m.oxw().$implicit,n=m.oxw();m.xp6(1),m.Oqu(n.countInTab(t,"open"))}}function Jt(t,n){if(1&t&&(m.TgZ(0,"td",51),m.YNc(1,kt,2,1,"span",54),m.qZA()),2&t){const t=n.$implicit,e=m.oxw();m.xp6(1),m.Q6J("ngIf",e.countInTab(t,"open"))}}function Qt(t,n){1&t&&m._UZ(0,"th",46)}function It(t,n){if(1&t&&(m.TgZ(0,"td",56),m.NdJ("click",function(t){return t.stopPropagation()}),m.TgZ(1,"a",57),m.TgZ(2,"mat-icon"),m._uU(3,"chevron_right"),m.qZA(),m.qZA(),m.qZA()),2&t){const t=n.$implicit,e=m.oxw();m.xp6(1),m.Q6J("routerLink",t.id)("matBadge",e.countInTab(t,"open"))("matBadgeHidden",!e.countInTab(t,"open"))}}function Yt(t,n){1&t&&m._UZ(0,"tr",58)}function St(t,n){1&t&&m._UZ(0,"tr",59),2&t&&m.Q6J("routerLink",n.$implicit.id)}function zt(t,n){1&t&&(m.TgZ(0,"tr",60),m.TgZ(1,"td",61),m._uU(2,"No tienes cotizaci\xf3nes."),m.qZA(),m.qZA())}const Ft=function(){return[5,10,20]};let Dt=(()=>{class t{constructor(t,n,e){this.http=t,this.router=n,this.route=e,this.displayedColumns=["select","id","name","user","number","date","actions"],this.dataSource=new gt.by([]),this.selection=new ut.Ov(!0,[]),this.users=[],this.filters={_q:null,status:null,user:null},this._statusInTab={open:[2,3,5],discarded:[4,6],finalized:[7],outbox:[1]},this.route.queryParamMap.subscribe(t=>{this.filters._q=t.get("_q")?t.get("_q"):null,this.filters.status=t.get("status")?Number(t.get("status")):null,this.filters.user=t.get("user")?Number(t.get("user")):null,this.applyFilter(!1)}),this.dataSource.sortingDataAccessor=(t,n)=>{var e,o;switch(n){case"user":return null===(e=t.user)||void 0===e?void 0:e.firstname;case"number":return null===(o=t.quotations)||void 0===o?void 0:o.length;case"date":return t.created_at;default:return t[n]}},this.dataSource.filterPredicate=(t,n)=>!(null!==this.filters.status&&t.status!=this.filters.status||null!==this.filters.user&&t.user.id!=this.filters.user||(null==n?void 0:n._q)&&n._q.trim()&&-1==JSON.stringify([t.id,t.name]).toLowerCase().indexOf(n._q.toLowerCase()))}ngOnInit(){this.loadQuotationGroups(),this.loadUsers()}ngAfterViewInit(){this.sort.sort({id:"date",start:"desc"}),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}loadQuotationGroups(){this.http.get(`${x.N.apiUrl}/quotation-groups`).subscribe(t=>{this.dataSource.data=t},t=>{})}loadUsers(){this.http.get(`${x.N.apiUrl}/users`).subscribe(t=>{this.users=t.map(t=>({id:t.id,name:t.username}))},t=>{})}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.id+1}`:(this.isAllSelected()?"deselect":"select")+" all"}applyFilter(t=!0){this.dataSource.filter=this.filters,t&&this.router.navigate([],{queryParams:this.filters,queryParamsHandling:"merge",replaceUrl:!0})}bulkAction(){console.log(this.selection.isEmpty())}countInTab(t,n){var e;let o=null===(e=t.quotations)||void 0===e?void 0:e.filter(t=>this._statusInTab[n].includes(t.status));return null==o?void 0:o.length}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(a.F0),m.Y36(a.gz))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-cotizaciones"]],viewQuery:function(t,n){if(1&t&&(m.Gf(dt.YE,5),m.Gf(mt.NW,5)),2&t){let t;m.iGM(t=m.CRH())&&(n.sort=t.first),m.iGM(t=m.CRH())&&(n.paginator=t.first)}},decls:83,vars:17,consts:[[1,"container-fluid","pt-5","px-md-5"],[1,"row"],[1,"col","page-title"],[1,"row","search-form"],[1,"form-group","col-auto","mt-2"],["for","search_name",1,"form-label"],["appearance","outline",1,"search-name"],["matPrefix",""],["matInput","","id","search_name","placeholder","Buscar por nombre",3,"ngModel","ngModelChange","keyup"],["for","tipo",1,"form-label"],["appearance","outline"],["id","order","placeholder","Todas","disableOptionCentering","",3,"ngModel","ngModelChange","selectionChange"],[3,"value"],["for","search_usuario",1,"form-label"],["appearance","outline",1,"search-user"],["id","search_usuario","placeholder","Todos","disableOptionCentering","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"row","actions-form"],[1,"form-group","col-auto","mt-3"],["for","tipo",1,"form-label","me-3"],["appearance","outline",1,"me-3"],["id","order","placeholder","Cerrar","disableOptionCentering",""],["mat-raised-button","","color","accent",1,"btn-round","btn-sm",3,"disabled","click"],[1,"col","py-4"],["name","estatus",1,"tabs",3,"ngModel","ngModelChange","change"],[1,"col"],["mat-table","","matSort","",1,"cotizacion-table",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","user"],["matColumnDef","number"],["mat-header-cell","","mat-sort-header","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","counts"],["matColumnDef","actions"],["mat-cell","","class","actions-cell text-end",3,"click",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"routerLink",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell","",3,"click"],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"text-center"],["mat-cell","",1,"text-center"],["class","status-count open",4,"ngIf"],[1,"status-count","open"],["mat-cell","",1,"actions-cell","text-end",3,"click"],["mat-button","","color","primary","matBadgePosition","before",1,"badge-center-v",3,"routerLink","matBadge","matBadgeHidden"],["mat-header-row",""],["mat-row","",3,"routerLink"],[1,"mat-row"],["colspan","7",1,"mat-cell"]],template:function(t,n){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"h1"),m._uU(4,"Cotizaciones"),m.qZA(),m.TgZ(5,"p"),m._uU(6,"Encuentra tus solicitudes de manera organizada"),m.qZA(),m.qZA(),m.qZA(),m._UZ(7,"mat-divider"),m.TgZ(8,"div",3),m.TgZ(9,"div",4),m.TgZ(10,"label",5),m._uU(11,"\xa0"),m.qZA(),m.TgZ(12,"mat-form-field",6),m.TgZ(13,"mat-icon",7),m._uU(14,"search"),m.qZA(),m.TgZ(15,"input",8),m.NdJ("ngModelChange",function(t){return n.filters._q=t})("keyup",function(){return n.applyFilter()}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(16,"div",4),m.TgZ(17,"label",9),m._uU(18,"Estado"),m.qZA(),m.TgZ(19,"mat-form-field",10),m.TgZ(20,"mat-select",11),m.NdJ("ngModelChange",function(t){return n.filters.status=t})("selectionChange",function(){return n.applyFilter()}),m.TgZ(21,"mat-option",12),m._uU(22,"Todas"),m.qZA(),m.TgZ(23,"mat-option",12),m._uU(24,"Abiertas"),m.qZA(),m.TgZ(25,"mat-option",12),m._uU(26,"Cerradas"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(27,"div",4),m.TgZ(28,"label",13),m._uU(29,"Usuario"),m.qZA(),m.TgZ(30,"mat-form-field",14),m.TgZ(31,"mat-select",15),m.NdJ("ngModelChange",function(t){return n.filters.user=t})("selectionChange",function(){return n.applyFilter()}),m.TgZ(32,"mat-option",12),m._uU(33,"Todos"),m.qZA(),m.YNc(34,Ct,2,2,"mat-option",16),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m._UZ(35,"mat-divider"),m.TgZ(36,"div",17),m.TgZ(37,"div",18),m.TgZ(38,"label",19),m._uU(39,"Acciones en lote"),m.qZA(),m.TgZ(40,"mat-form-field",20),m._UZ(41,"mat-select",21),m.qZA(),m.TgZ(42,"button",22),m.NdJ("click",function(){return n.bulkAction()}),m._uU(43,"Aplicar"),m.qZA(),m.qZA(),m.qZA(),m._UZ(44,"mat-divider"),m.TgZ(45,"div",1),m.TgZ(46,"div",23),m.TgZ(47,"mat-button-toggle-group",24),m.NdJ("ngModelChange",function(t){return n.filters.status=t})("change",function(){return n.applyFilter()}),m.TgZ(48,"mat-button-toggle",12),m._uU(49,"Abiertas"),m.qZA(),m.TgZ(50,"mat-button-toggle",12),m._uU(51,"Cerradas"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(52,"div",1),m.TgZ(53,"div",25),m.TgZ(54,"table",26),m.ynx(55,27),m.YNc(56,Mt,2,3,"th",28),m.YNc(57,qt,2,2,"td",29),m.BQk(),m.ynx(58,30),m.YNc(59,xt,2,0,"th",31),m.YNc(60,Ot,2,1,"td",32),m.BQk(),m.ynx(61,33),m.YNc(62,vt,2,0,"th",31),m.YNc(63,bt,2,1,"td",32),m.BQk(),m.ynx(64,34),m.YNc(65,Pt,2,0,"th",31),m.YNc(66,At,2,1,"td",32),m.BQk(),m.ynx(67,35),m.YNc(68,Tt,2,0,"th",36),m.YNc(69,wt,2,1,"td",37),m.BQk(),m.ynx(70,38),m.YNc(71,yt,2,0,"th",31),m.YNc(72,Ut,3,4,"td",32),m.BQk(),m.ynx(73,39),m.YNc(74,Nt,1,0,"th",28),m.YNc(75,Jt,2,1,"td",32),m.BQk(),m.ynx(76,40),m.YNc(77,Qt,1,0,"th",28),m.YNc(78,It,4,3,"td",41),m.BQk(),m.YNc(79,Yt,1,0,"tr",42),m.YNc(80,St,1,1,"tr",43),m.YNc(81,zt,3,0,"tr",44),m.qZA(),m._UZ(82,"mat-paginator",45),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(15),m.Q6J("ngModel",n.filters._q),m.xp6(5),m.Q6J("ngModel",n.filters.status),m.xp6(1),m.Q6J("value",null),m.xp6(2),m.Q6J("value",1),m.xp6(2),m.Q6J("value",0),m.xp6(6),m.Q6J("ngModel",n.filters.user),m.xp6(1),m.Q6J("value",null),m.xp6(2),m.Q6J("ngForOf",n.users),m.xp6(8),m.Q6J("disabled",n.selection.isEmpty()),m.xp6(5),m.Q6J("ngModel",n.filters.status),m.xp6(1),m.Q6J("value",1),m.xp6(2),m.Q6J("value",0),m.xp6(4),m.Q6J("dataSource",n.dataSource),m.xp6(25),m.Q6J("matHeaderRowDef",n.displayedColumns),m.xp6(1),m.Q6J("matRowDefColumns",n.displayedColumns),m.xp6(2),m.Q6J("pageSizeOptions",m.DdM(16,Ft)))},directives:[Y.d,pt.KE,b.Hw,pt.qo,ft.Nt,r.Fj,r.JJ,r.On,ht.gD,S.ey,o.sg,v.lW,_t.A9,_t.Yi,gt.BZ,dt.YE,gt.w1,gt.fO,gt.Dz,gt.as,gt.nj,gt.Ee,mt.NW,gt.ge,Zt.oG,gt.ev,dt.nU,o.O5,v.zs,a.yS,P.k,gt.XQ,gt.Gk,a.rH],pipes:[o.uU],styles:[".search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{display:block;width:130px;max-width:100%}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field.search-name[_ngcontent-%COMP%]{width:330px}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field.search-name[_ngcontent-%COMP%]  .mat-form-field-prefix{align-self:center}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field.search-user[_ngcontent-%COMP%]{width:156px}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--app-amarillo-claro)}.actions-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}table.mat-table[_ngcontent-%COMP%]{display:table;width:100%;border-radius:10px;overflow:hidden;filter:drop-shadow(0 5px 5px rgba(64,148,171,.24))}table.mat-table[_ngcontent-%COMP%]     .mat-header-cell{background-color:var(--app-blue-cyan);color:#fff}table.mat-table[_ngcontent-%COMP%]     .mat-row:nth-child(odd){background-color:#fff}table.mat-table[_ngcontent-%COMP%]     .mat-row:not(:nth-child(odd)){background-color:#f6f9fa}table.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{font-weight:600;font-size:12px;line-height:15px;cursor:pointer}table.mat-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{cursor:unset}table.mat-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]   mat-badge-medium.mat-badge-above[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{top:unset;right:unset}span.status-count[_ngcontent-%COMP%]{display:inline-block;text-align:center;min-width:23px;padding:.25em .5em;border-radius:50%;background-color:var(--app-gris-muy-oscuro);color:#fff}span.status-count.open[_ngcontent-%COMP%]{background-color:var(--app-amarillo-claro);color:#fff}"]}),t})();var $t=e(6936);function Bt(t,n){if(1&t&&(m.TgZ(0,"mat-option",15),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.Q6J("value",t.id),m.xp6(1),m.Oqu(t.name)}}function Et(t,n){if(1&t&&(m.TgZ(0,"mat-option",15),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.Q6J("value",t.id),m.xp6(1),m.Oqu(t.name)}}function Lt(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"th",61),m.TgZ(1,"mat-checkbox",62),m.NdJ("change",function(n){m.CHM(t);const e=m.oxw();return n?e.masterToggle():null}),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(1),m.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function jt(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"td",63),m.NdJ("click",function(t){return t.stopPropagation()}),m.TgZ(1,"mat-checkbox",64),m.NdJ("click",function(t){return t.stopPropagation()})("change",function(n){const e=m.CHM(t).$implicit,o=m.oxw();return n?o.selection.toggle(e):null}),m.qZA(),m.qZA()}if(2&t){const t=n.$implicit,e=m.oxw();m.xp6(1),m.Q6J("checked",e.selection.isSelected(t))("aria-label",e.checkboxLabel(t))}}function Ht(t,n){1&t&&(m.TgZ(0,"th",65),m._uU(1," ID "),m.qZA())}function Gt(t,n){if(1&t&&(m.TgZ(0,"td",66),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.AsE(" ",null==t.group?null:t.group.id,"-",t.id," ")}}function Rt(t,n){1&t&&(m.TgZ(0,"th",67),m._uU(1," Nombre del proveedor "),m.qZA())}function Vt(t,n){if(1&t&&(m.TgZ(0,"td",63),m.NdJ("click",function(t){return t.stopPropagation()}),m.TgZ(1,"a",68),m._UZ(2,"app-profile-picture-avatar",69),m._uU(3),m.qZA(),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.MGl("routerLink","/empresas/catalogo/proveedores/",null==t.supplier?null:t.supplier.id,""),m.xp6(1),m.Q6J("profile_picture",null==t.supplier?null:t.supplier.profile_picture),m.xp6(1),m.hij(" ",null==t.supplier?null:t.supplier.name," ")}}function Xt(t,n){1&t&&(m.TgZ(0,"th",67),m._uU(1," Usuario "),m.qZA())}function Wt(t,n){if(1&t&&(m.TgZ(0,"td",70),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",null==t.user?null:t.user.firstname," ")}}function Kt(t,n){1&t&&(m.TgZ(0,"th",67),m._uU(1," Servicio "),m.qZA())}function tn(t,n){if(1&t&&(m.TgZ(0,"td",70),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",(null==t.service?null:t.service.name)||"N/A"," ")}}function nn(t,n){1&t&&(m.TgZ(0,"th",67),m._uU(1," Fecha "),m.qZA())}function en(t,n){if(1&t&&(m.TgZ(0,"td",70),m._uU(1),m.ALo(2,"date"),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",m.xi3(2,1,t.created_at,"dd/MM/yyyy")," ")}}function on(t,n){1&t&&(m.TgZ(0,"th",71),m._uU(1," Estado "),m.qZA())}function an(t,n){if(1&t&&(m.TgZ(0,"td",72),m.TgZ(1,"span"),m._uU(2),m.qZA(),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.Gre("pill pill-lg pill-",null==t.status?null:t.status.class," mx-auto"),m.xp6(1),m.Oqu(null==t.status?null:t.status.name)}}function rn(t,n){1&t&&(m.TgZ(0,"th",71),m._uU(1," Precio "),m.qZA())}function cn(t,n){if(1&t&&(m.TgZ(0,"td",73),m._uU(1),m.ALo(2,"currency"),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",m.lcZ(2,1,null==t.offer?null:t.offer.amount)||"-"," ")}}function ln(t,n){1&t&&m._UZ(0,"th",74)}function sn(t,n){1&t&&m._UZ(0,"mat-icon",84)}function un(t,n){1&t&&m._UZ(0,"mat-icon",85)}function gn(t,n){1&t&&m._UZ(0,"mat-icon",86)}function dn(t,n){1&t&&m._UZ(0,"mat-icon",87)}function mn(t,n){if(1&t&&m._UZ(0,"mat-icon",88),2&t){const t=m.oxw().$implicit;m.Q6J("matBadge",null==t.chat_room?null:t.chat_room.unread_a)("matBadgeHidden",!(null!=t.chat_room&&t.chat_room.unread_a))}}function pn(t,n){if(1&t&&m._UZ(0,"mat-icon",89),2&t){const t=m.oxw().$implicit;m.Q6J("matBadge",null==t.chat_room?null:t.chat_room.unread_a)("matBadgeHidden",!(null!=t.chat_room&&t.chat_room.unread_a))}}function fn(t,n){1&t&&(m.ynx(0),m._UZ(1,"mat-icon",90),m.BQk())}function hn(t,n){1&t&&(m.ynx(0),m._UZ(1,"mat-icon",91),m.BQk())}const _n=function(){return[1,2,3]},Zn=function(){return[5,7]},Cn=function(){return[4,6]},Mn=function(){return[3,5]};function qn(t,n){if(1&t&&(m.TgZ(0,"td",75),m.ynx(1,76),m.YNc(2,sn,1,0,"mat-icon",77),m.YNc(3,un,1,0,"mat-icon",78),m.YNc(4,gn,1,0,"mat-icon",79),m.YNc(5,dn,1,0,"mat-icon",80),m.BQk(),m.ynx(6,76),m.YNc(7,mn,1,2,"mat-icon",81),m.YNc(8,pn,1,2,"mat-icon",82),m.BQk(),m.YNc(9,fn,2,0,"ng-container",83),m.YNc(10,hn,2,0,"ng-container",83),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.Q6J("ngSwitch",null==t.status?null:t.status.id),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(8,_n)),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(9,Zn)),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(10,Cn)),m.xp6(2),m.Q6J("ngSwitch",null==t.status?null:t.status.id),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(11,Mn)),m.xp6(2),m.Q6J("ngIf",t.rating),m.xp6(1),m.Q6J("ngIf",!t.rating)}}function xn(t,n){1&t&&m._UZ(0,"th",61)}function On(t,n){if(1&t&&(m.TgZ(0,"td",92),m.NdJ("click",function(t){return t.stopPropagation()}),m.TgZ(1,"a",93),m.TgZ(2,"mat-icon"),m._uU(3,"chevron_right"),m.qZA(),m.qZA(),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.Q6J("routerLink",t.id)}}function vn(t,n){1&t&&m._UZ(0,"tr",94)}function bn(t,n){1&t&&m._UZ(0,"tr",95),2&t&&m.Q6J("routerLink",n.$implicit.id)}function Pn(t,n){1&t&&(m.TgZ(0,"tr",96),m.TgZ(1,"td",97),m._uU(2,"No tienes cotizaci\xf3nes."),m.qZA(),m.qZA())}const An=function(){return[5,10,20]};let Tn=(()=>{class t{constructor(t,n,e,o,a){this.http=t,this.router=n,this.route=e,this.alert=o,this.authenticationService=a,this.displayedColumns=["select","id","supplier","user","service","date","status","price","badges","actions"],this.dataSource=new gt.by([]),this.selection=new ut.Ov(!0,[]),this.users=[],this.motives=[],this.statuses=[],this.filters={_q:null,status:null,user:null,unread:null,notrated:null,tab:"open"},this._statusInTab={open:[2,3,5],discarded:[4,6],finalized:[7],outbox:[1]},this.route.paramMap.subscribe(t=>{this.id=t.get("grupoId")}),this.currentUser=this.authenticationService.currentUserValue,this.route.queryParamMap.subscribe(t=>{this.filters._q=t.get("_q")?t.get("_q"):null,this.filters.status=t.get("status")?Number(t.get("status")):null,this.filters.user=t.get("user")?Number(t.get("user")):null,this.filters.unread=t.get("unread")?"true"==t.get("unread"):null,this.filters.notrated=t.get("notrated")?"true"==t.get("notrated"):null,t.get("tab")&&(this.filters.tab=t.get("tab")),console.log(this.filters),this.applyFilter(!1)}),this.dataSource.sortingDataAccessor=(t,n)=>{var e,o,a,r,i,c;switch(n){case"id":return(null===(e=t.group)||void 0===e?void 0:e.id)+"-"+t.id;case"supplier":return null===(o=t.supplier)||void 0===o?void 0:o.name;case"user":return null===(a=t.user)||void 0===a?void 0:a.firstname;case"service":return null===(r=t.service)||void 0===r?void 0:r.name;case"date":return t.created_at;case"status":return null===(i=t.status)||void 0===i?void 0:i.id;case"price":return null===(c=t.offer)||void 0===c?void 0:c.amount;default:return t[n]}},this.dataSource.filterPredicate=(t,n)=>{var e,o,a,r,i,c;return!(!this.statusInTab(null===(e=t.status)||void 0===e?void 0:e.id)||null!==this.filters.status&&t.status.id!=this.filters.status||null!==this.filters.user&&t.user.id!=this.filters.user||this.filters.unread&&!(null===(o=t.chat_room)||void 0===o?void 0:o.unread_a)||this.filters.notrated&&(5!=t.status.id||null!=t.rating||!(null===(a=t.offer)||void 0===a?void 0:a.deliver_at)||Z().isSameOrBefore(Z(t.offer.deliver_at),"minute"))||(null==n?void 0:n._q)&&n._q.trim()&&-1==JSON.stringify([(null===(r=t.group)||void 0===r?void 0:r.id)+"-"+t.id,null===(i=t.supplier)||void 0===i?void 0:i.name,null===(c=t.service)||void 0===c?void 0:c.name]).toLowerCase().indexOf(n._q.toLowerCase()))}}ngOnInit(){this.loadQuotationGroup(),this.loadQuotations(),this.loadQuotationStatuses(),this.loadUsers(),this.loadDiscardMotives()}ngAfterViewInit(){this.sort.sort({id:"date",start:"desc"}),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}loadQuotationGroup(){this.http.get(`${x.N.apiUrl}/quotation-groups/${this.id}`).subscribe(t=>{this.group=t},t=>{})}loadQuotations(){const t=(new i.LE).set("group",this.id);this.http.get(`${x.N.apiUrl}/quotations`,{params:t}).subscribe(t=>{this.dataSource.data=t},t=>{})}loadQuotationStatuses(){this.http.get(`${x.N.apiUrl}/quotation-statuses`).subscribe(t=>{this.statuses=t},t=>{})}loadUsers(){this.http.get(`${x.N.apiUrl}/users`).subscribe(t=>{this.users=t.map(t=>({id:t.id,name:t.username}))},t=>{})}loadDiscardMotives(){const t=new i.LE;this.http.get(`${x.N.apiUrl}/discard-motives`,{params:t}).subscribe(t=>{this.motives=t},t=>{})}share(){this.alert.open({title:"\xbfQuieres compartir este Grupo?",text:"Puedes compartir este grupo de cotizaciones con alguien de tu equipo, sin embargo una vez la asignes ya no podr\xe1s contestar los mensajes del chat.",input:"select",inputLabel:"Usuario",inputPlaceholder:"Nombre del usuario",inputOptions:this.users.filter(t=>t.id!=this.currentUser.id),inputRequired:!0}).then(t=>{if(t){let{isConfirmed:n,value:e}=t;n&&e&&this.http.post(`${x.N.apiUrl}/quotation-groups/share/${this.id}`,{user:e}).subscribe(t=>{console.log(t),this.router.navigateByUrl("/empresas/cotizaciones")},t=>{})}})}close(){this.alert.open({title:"\xbfEst\xe1s seguro de cerrar este grupo?",text:"Una vez cerrado todas tus cotizaci\xf3nes pendientes y me interesan se descartar\xe1n y ya no podr\xe1s continuar con los procesos.",input:"pills",multiple:!0,inputLabel:"Ayuda al proveedor a mejorar contandole el motivo de tu descarte:",inputOptions:this.motives,showDetails:t=>!!t&&t.includes(6)}).then(t=>{if(t){let{isConfirmed:n,value:e,details:o}=t;n&&this.http.post(`${x.N.apiUrl}/quotation-groups/close/${this.id}`,{discard_motives:e,discard_details:o}).subscribe(t=>{window.location.reload()},t=>{})}})}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.id+1}`:(this.isAllSelected()?"deselect":"select")+" all"}statusInTab(t){return null!==this.filters.tab&&void 0!==this._statusInTab[this.filters.tab]&&this._statusInTab[this.filters.tab].includes(t)}tabChangue(t){this.filters.status=null,this.applyFilter()}applyFilter(t=!0){this.dataSource.filter=this.filters,t&&this.router.navigate([],{queryParams:this.filters,queryParamsHandling:"merge",replaceUrl:!0})}bulkAction(){console.log(this.selection.isEmpty())}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(a.F0),m.Y36(a.gz),m.Y36(C.c9),m.Y36(C.$h))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-cotizacion-grupo"]],viewQuery:function(t,n){if(1&t&&(m.Gf(dt.YE,5),m.Gf(mt.NW,5)),2&t){let t;m.iGM(t=m.CRH())&&(n.sort=t.first),m.iGM(t=m.CRH())&&(n.paginator=t.first)}},decls:103,vars:19,consts:[[1,"container-fluid","pt-5","px-md-5"],[1,"row"],[1,"col","page-title"],[1,"col","page-actions"],["mat-button","","color","accent",1,"btn-round","btn-sm","btn-share","me-3",3,"disabled","click"],["mat-raised-button","","color","primary",1,"btn-round","btn-sm",3,"disabled","click"],[1,"row","search-form"],[1,"form-group","col-auto","mt-2"],["for","search_name",1,"form-label"],["appearance","outline",1,"search-name"],["matPrefix",""],["matInput","","id","search_name","placeholder","Buscar por nombre del proveedor o servicio",3,"ngModel","ngModelChange","keyup"],["for","tipo",1,"form-label"],["appearance","outline"],["id","order","placeholder","Todas","disableOptionCentering","",3,"ngModel","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","search_usuario",1,"form-label"],["appearance","outline",1,"search-user"],["id","search_usuario","placeholder","Nombre de usuario","disableOptionCentering","",3,"ngModel","ngModelChange","selectionChange"],[1,"row","actions-form","pt-3"],[1,"form-group","col-auto","mt-1"],["for","tipo",1,"form-label","me-3"],["appearance","outline",1,"me-3"],["id","order","placeholder","Cerrar","disableOptionCentering",""],["mat-raised-button","","color","accent",1,"btn-round","btn-sm",3,"disabled","click"],[3,"ngModel","ngModelChange","change"],[1,"col","py-4"],["name","estatus",1,"tabs",3,"ngModel","ngModelChange","change"],["value","open"],["value","discarded"],["value","finalized"],["value","outbox"],[1,"col"],["mat-table","","matSort","",1,"cotizacion-table",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","class","px-3","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","px-3 text-nowrap",4,"matCellDef"],["matColumnDef","supplier"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","user"],["mat-cell","",4,"matCellDef"],["matColumnDef","service"],["matColumnDef","date"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","status-cell text-center",4,"matCellDef"],["matColumnDef","price"],["mat-cell","","class","price-cell text-center",4,"matCellDef"],["matColumnDef","badges"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","badges-cell text-end text-nowrap",4,"matCellDef"],["matColumnDef","actions"],["mat-cell","","class","actions-cell text-end",3,"click",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"routerLink",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell","",3,"click"],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header","",1,"px-3"],["mat-cell","",1,"px-3","text-nowrap"],["mat-header-cell","","mat-sort-header",""],[3,"routerLink"],[3,"profile_picture"],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"text-center"],["mat-cell","",1,"status-cell","text-center"],["mat-cell","",1,"price-cell","text-center"],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"badges-cell","text-end","text-nowrap"],[3,"ngSwitch"],["svgIcon","cotizacion-pending",4,"jrSwitchCases"],["svgIcon","cotizacion-active",4,"jrSwitchCases"],["svgIcon","cotizacion-reject",4,"jrSwitchCases"],["svgIcon","cotizacion",4,"ngSwitchDefault"],["svgIcon","mnsg",3,"matBadge","matBadgeHidden",4,"jrSwitchCases"],["svgIcon","mnsg-disable",3,"matBadge","matBadgeHidden",4,"ngSwitchDefault"],[4,"ngIf"],["svgIcon","cotizacion-pending"],["svgIcon","cotizacion-active"],["svgIcon","cotizacion-reject"],["svgIcon","cotizacion"],["svgIcon","mnsg",3,"matBadge","matBadgeHidden"],["svgIcon","mnsg-disable",3,"matBadge","matBadgeHidden"],["svgIcon","star-active",1,"ms-1"],["svgIcon","star-disable"],["mat-cell","",1,"actions-cell","text-end",3,"click"],["mat-button","","color","primary",3,"routerLink"],["mat-header-row",""],["mat-row","",3,"routerLink"],[1,"mat-row"],["colspan","7",1,"mat-cell"]],template:function(t,n){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"h1"),m._uU(4),m.qZA(),m.TgZ(5,"p"),m._uU(6,"Compara las diferentes ofertas que te han enviado nuestros proveedores"),m.qZA(),m.qZA(),m.TgZ(7,"div",3),m.TgZ(8,"button",4),m.NdJ("click",function(){return n.share()}),m.TgZ(9,"mat-icon"),m._uU(10,"share"),m.qZA(),m._uU(11," Compartir Grupo "),m.qZA(),m.TgZ(12,"button",5),m.NdJ("click",function(){return n.close()}),m._uU(13," Cerrar este grupo "),m.qZA(),m.qZA(),m.qZA(),m._UZ(14,"mat-divider"),m.TgZ(15,"div",6),m.TgZ(16,"div",7),m.TgZ(17,"label",8),m._uU(18,"\xa0"),m.qZA(),m.TgZ(19,"mat-form-field",9),m.TgZ(20,"mat-icon",10),m._uU(21,"search"),m.qZA(),m.TgZ(22,"input",11),m.NdJ("ngModelChange",function(t){return n.filters._q=t})("keyup",function(){return n.applyFilter()}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(23,"div",7),m.TgZ(24,"label",12),m._uU(25,"Estado"),m.qZA(),m.TgZ(26,"mat-form-field",13),m.TgZ(27,"mat-select",14),m.NdJ("ngModelChange",function(t){return n.filters.status=t})("selectionChange",function(){return n.applyFilter()}),m.TgZ(28,"mat-option",15),m._uU(29,"Todas"),m.qZA(),m.YNc(30,Bt,2,2,"mat-option",16),m.qZA(),m.qZA(),m.qZA(),m.TgZ(31,"div",7),m.TgZ(32,"label",17),m._uU(33,"Usuario"),m.qZA(),m.TgZ(34,"mat-form-field",18),m.TgZ(35,"mat-select",19),m.NdJ("ngModelChange",function(t){return n.filters.user=t})("selectionChange",function(){return n.applyFilter()}),m.TgZ(36,"mat-option",15),m._uU(37,"Todas"),m.qZA(),m.YNc(38,Et,2,2,"mat-option",16),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m._UZ(39,"mat-divider"),m.TgZ(40,"div",20),m.TgZ(41,"div",21),m.TgZ(42,"label",22),m._uU(43,"Acciones en lote"),m.qZA(),m.TgZ(44,"mat-form-field",23),m._UZ(45,"mat-select",24),m.qZA(),m.TgZ(46,"button",25),m.NdJ("click",function(){return n.bulkAction()}),m._uU(47,"Aplicar"),m.qZA(),m.qZA(),m.TgZ(48,"div",21),m.TgZ(49,"mat-checkbox",26),m.NdJ("ngModelChange",function(t){return n.filters.unread=t})("change",function(){return n.applyFilter()}),m._uU(50,"Conversaciones sin leer"),m.qZA(),m.qZA(),m.TgZ(51,"div",21),m.TgZ(52,"mat-checkbox",26),m.NdJ("ngModelChange",function(t){return n.filters.notrated=t})("change",function(){return n.applyFilter()}),m._uU(53,"Cotizaciones sin calificar"),m.qZA(),m.qZA(),m.qZA(),m._UZ(54,"mat-divider"),m.TgZ(55,"div",1),m.TgZ(56,"div",27),m.TgZ(57,"mat-button-toggle-group",28),m.NdJ("ngModelChange",function(t){return n.filters.tab=t})("change",function(t){return n.tabChangue(t)}),m.TgZ(58,"mat-button-toggle",29),m._uU(59,"Abiertas"),m.qZA(),m.TgZ(60,"mat-button-toggle",30),m._uU(61,"Descartadas"),m.qZA(),m.TgZ(62,"mat-button-toggle",31),m._uU(63,"Finalizadas"),m.qZA(),m.TgZ(64,"mat-button-toggle",32),m._uU(65,"Buz\xf3n de salilda"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(66,"div",1),m.TgZ(67,"div",33),m.TgZ(68,"table",34),m.ynx(69,35),m.YNc(70,Lt,2,3,"th",36),m.YNc(71,jt,2,2,"td",37),m.BQk(),m.ynx(72,38),m.YNc(73,Ht,2,0,"th",39),m.YNc(74,Gt,2,2,"td",40),m.BQk(),m.ynx(75,41),m.YNc(76,Rt,2,0,"th",42),m.YNc(77,Vt,4,3,"td",37),m.BQk(),m.ynx(78,43),m.YNc(79,Xt,2,0,"th",42),m.YNc(80,Wt,2,1,"td",44),m.BQk(),m.ynx(81,45),m.YNc(82,Kt,2,0,"th",42),m.YNc(83,tn,2,1,"td",44),m.BQk(),m.ynx(84,46),m.YNc(85,nn,2,0,"th",42),m.YNc(86,en,3,4,"td",44),m.BQk(),m.ynx(87,47),m.YNc(88,on,2,0,"th",48),m.YNc(89,an,3,4,"td",49),m.BQk(),m.ynx(90,50),m.YNc(91,rn,2,0,"th",48),m.YNc(92,cn,3,3,"td",51),m.BQk(),m.ynx(93,52),m.YNc(94,ln,1,0,"th",53),m.YNc(95,qn,11,12,"td",54),m.BQk(),m.ynx(96,55),m.YNc(97,xn,1,0,"th",36),m.YNc(98,On,4,1,"td",56),m.BQk(),m.YNc(99,vn,1,0,"tr",57),m.YNc(100,bn,1,1,"tr",58),m.YNc(101,Pn,3,0,"tr",59),m.qZA(),m._UZ(102,"mat-paginator",60),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(4),m.Oqu((null==n.group?null:n.group.name)||"[Nombre cotizacion]"),m.xp6(4),m.Q6J("disabled",n.currentUser.id!=(null==n.group||null==n.group.user?null:n.group.user.id)||!n.group.status),m.xp6(4),m.Q6J("disabled",n.currentUser.id!=(null==n.group||null==n.group.user?null:n.group.user.id)||!n.group.status),m.xp6(10),m.Q6J("ngModel",n.filters._q),m.xp6(5),m.Q6J("ngModel",n.filters.status),m.xp6(1),m.Q6J("value",null),m.xp6(2),m.Q6J("ngForOf",n.statuses),m.xp6(5),m.Q6J("ngModel",n.filters.user),m.xp6(1),m.Q6J("value",null),m.xp6(2),m.Q6J("ngForOf",n.users),m.xp6(8),m.Q6J("disabled",n.selection.isEmpty()),m.xp6(3),m.Q6J("ngModel",n.filters.unread),m.xp6(3),m.Q6J("ngModel",n.filters.notrated),m.xp6(5),m.Q6J("ngModel",n.filters.tab),m.xp6(11),m.Q6J("dataSource",n.dataSource),m.xp6(31),m.Q6J("matHeaderRowDef",n.displayedColumns),m.xp6(1),m.Q6J("matRowDefColumns",n.displayedColumns),m.xp6(2),m.Q6J("pageSizeOptions",m.DdM(18,An)))},directives:[v.lW,b.Hw,Y.d,pt.KE,pt.qo,ft.Nt,r.Fj,r.JJ,r.On,ht.gD,S.ey,o.sg,Zt.oG,_t.A9,_t.Yi,gt.BZ,dt.YE,gt.w1,gt.fO,gt.Dz,gt.as,gt.nj,gt.Ee,mt.NW,gt.ge,gt.ev,dt.nU,a.yS,$t.X,o.RF,E.I,o.ED,o.O5,P.k,v.zs,gt.XQ,gt.Gk,a.rH],pipes:[o.uU,o.H9],styles:[".search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{display:block;width:130px;max-width:100%}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field.search-name[_ngcontent-%COMP%]{width:330px}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field.search-name[_ngcontent-%COMP%]  .mat-form-field-prefix{align-self:center}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field.search-user[_ngcontent-%COMP%]{width:156px}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--app-amarillo-claro)}.actions-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}.actions-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{line-height:40px}table.mat-table[_ngcontent-%COMP%]{display:table;width:100%;border-radius:10px;overflow:hidden;filter:drop-shadow(0 5px 5px rgba(64,148,171,.24))}table.mat-table[_ngcontent-%COMP%]     .mat-header-cell{background-color:var(--app-blue-cyan);color:#fff}table.mat-table[_ngcontent-%COMP%]     .mat-row:nth-child(odd){background-color:#fff}table.mat-table[_ngcontent-%COMP%]     .mat-row:not(:nth-child(odd)){background-color:#f6f9fa}table.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{cursor:pointer}table.mat-table[_ngcontent-%COMP%]   .status-cell[_ngcontent-%COMP%]   span.pill[_ngcontent-%COMP%]{width:100px}table.mat-table[_ngcontent-%COMP%]   .price-cell[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600;font-size:10px;line-height:12px;color:#64c97a}table.mat-table[_ngcontent-%COMP%]   .badges-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{line-height:27px;height:27px;width:27px;margin-right:5px}table.mat-table[_ngcontent-%COMP%]   .badges-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     .mat-badge-content{top:2px;right:-4px;font-size:7px;line-height:12px;width:12px;height:12px}table.mat-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{cursor:unset}table.mat-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]   mat-badge-medium.mat-badge-above[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{top:unset;right:unset}"]}),t})();var wn=e(2935),yn=e(1895);function Un(t,n){if(1&t&&(m.TgZ(0,"mat-option",17),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.Q6J("value",t.id),m.xp6(1),m.Oqu(t.name)}}function Nn(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Selecciona el problema que quieres reportar."),m.qZA())}function kn(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Describe el problema."),m.qZA())}let Jn=(()=>{class t{constructor(t,n,e,o,a,i,c){var l;this.http=t,this.router=n,this.route=e,this.alert=o,this.authenticationService=a,this.formBuilder=i,this.dialogRef=c,this.typesList=[],this.wait=!1,this.currentUser=a.currentUserValue,this.issueForm=this.formBuilder.group({type:[null,[r.kI.required]],details:[null,[r.kI.required]],screenshot:[null],screenshot_source:[null],user:[this.currentUser.id],company:[null===(l=this.currentUser.company)||void 0===l?void 0:l.id],status:[1]})}ngOnInit(){this.loadTypes()}loadTypes(){const t=new i.LE;this.http.get(`${x.N.apiUrl}/issue-types`,{params:t}).subscribe(t=>{this.typesList=t},t=>{})}onSubmit(){var t,n,e;if(this.issueForm.invalid)return console.log("form invalid"),void this.issueForm.markAllAsTouched();console.log("submit..."),this.wait=!0;const o=new FormData;let a=this.issueForm.getRawValue();delete a.screenshot,delete a.screenshot_source,o.append("data",JSON.stringify(a)),(null===(t=this.issueForm.get("screenshot"))||void 0===t?void 0:t.value)&&o.append("files.screenshot",null===(n=this.issueForm.get("screenshot_source"))||void 0===n?void 0:n.value,null===(e=this.issueForm.get("screenshot"))||void 0===e?void 0:e.value.split("\\").pop()),this.http.post(`${x.N.apiUrl}/issues`,o).subscribe(t=>{this.wait=!1,this.dialogRef.close(t)},t=>{this.wait=!1,console.log(t)})}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(a.F0),m.Y36(a.gz),m.Y36(C.c9),m.Y36(C.$h),m.Y36(r.qu),m.Y36(wn.so))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-incidencia-reportar"]],decls:31,vars:6,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title","",1,"text-center"],[1,"pb-3"],[1,"row","justify-content-center","pt-3"],[1,"col-sm-8"],["for","type"],["appearance","outline"],["id","type","placeholder","Origen del problema","formControlName","type","disableOptionCentering",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-sm-11"],["matInput","","id","details","formControlName","details","rows","6","placeholder","Escribenos mas detalles"],[1,"col-auto"],["field","screenshot","placeholder","Adjuntar una captura","hint","JPG o PNG","accept","image/png, image/jpeg","direction","col",3,"form","showStatus"],[1,"row","justify-content-center","py-3"],["type","submit","mat-flat-button","","color","accent","cdkFocusInitial","",1,"btn-round"],["type","button","mat-flat-button","","color","primary","mat-dialog-close","",1,"btn-round"],[3,"value"]],template:function(t,n){if(1&t&&(m.TgZ(0,"form",0),m.NdJ("ngSubmit",function(){return n.onSubmit()}),m.TgZ(1,"h2",1),m._uU(2,"\xbfTienes algun problema?"),m.qZA(),m.TgZ(3,"mat-dialog-content",2),m.TgZ(4,"p"),m._uU(5,"No te preocupes estamos para ayudarte, ayudanos con el siguiente formulario para poder atender tu problema, podr\xe1s consultar el status de tu solicitud en el panel de incidencias. Puedes adjuntar una captura para entender mejor la situaci\xf3n"),m.qZA(),m._UZ(6,"mat-divider"),m.TgZ(7,"div",3),m.TgZ(8,"div",4),m.TgZ(9,"label",5),m._uU(10,"Tipo de problema"),m.qZA(),m.TgZ(11,"mat-form-field",6),m.TgZ(12,"mat-select",7),m.YNc(13,Un,2,2,"mat-option",8),m.qZA(),m.YNc(14,Nn,2,0,"mat-error",9),m.qZA(),m.qZA(),m.qZA(),m.TgZ(15,"div",3),m.TgZ(16,"div",10),m.TgZ(17,"mat-form-field",6),m._UZ(18,"textarea",11),m.YNc(19,kn,2,0,"mat-error",9),m.qZA(),m.qZA(),m.qZA(),m.TgZ(20,"div",3),m.TgZ(21,"div",12),m._UZ(22,"app-file-field",13),m.qZA(),m.qZA(),m.qZA(),m._UZ(23,"mat-divider"),m.TgZ(24,"mat-dialog-actions",14),m.TgZ(25,"div",12),m.TgZ(26,"button",15),m._uU(27,"Aceptar"),m.qZA(),m.qZA(),m.TgZ(28,"div",12),m.TgZ(29,"button",16),m._uU(30,"Cancelar"),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t){let t,e;m.Q6J("formGroup",n.issueForm),m.xp6(13),m.Q6J("ngForOf",n.typesList),m.xp6(1),m.Q6J("ngIf",null==(t=n.issueForm.get("type"))?null:t.hasError("required")),m.xp6(5),m.Q6J("ngIf",null==(e=n.issueForm.get("type"))?null:e.hasError("required")),m.xp6(3),m.Q6J("form",n.issueForm)("showStatus",!1)}},directives:[r._Y,r.JL,r.sg,wn.uh,wn.xY,Y.d,pt.KE,ht.gD,r.JJ,r.u,o.sg,o.O5,ft.Nt,r.Fj,yn.O,wn.H8,v.lW,wn.ZT,S.ey,pt.TO],styles:[".mat-dialog-title[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:18px;line-height:22px;text-align:center;color:var(--app-azul-marino)}mat-dialog-content[_ngcontent-%COMP%]{font-weight:500}mat-dialog-content[_ngcontent-%COMP%], mat-dialog-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-size:12px;line-height:15px;color:#5a6a6f}mat-dialog-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;margin-left:6px;font-weight:700;display:flex;align-items:center}mat-dialog-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:15px;color:#062ebd}mat-dialog-content[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:100%}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:103px}"]}),t})();var Qn=e(5522),In=e(9024),Yn=e(8417),Sn=e(5972);const zn=["scroll"];function Fn(t,n){if(1&t&&(m.ynx(0),m.TgZ(1,"dt",15),m._uU(2,"Plazo de entrega:"),m.qZA(),m.TgZ(3,"dd",15),m._uU(4),m.ALo(5,"date"),m.qZA(),m._UZ(6,"div",17),m.BQk()),2&t){const t=m.oxw(2);m.xp6(4),m.Oqu(m.xi3(5,1,null==t.quotation.offer?null:t.quotation.offer.deliver_at,"dd/MM/yyyy"))}}function Dn(t,n){1&t&&m._UZ(0,"mat-icon",31)}function $n(t,n){1&t&&m._UZ(0,"mat-icon",32)}function Bn(t,n){1&t&&m._UZ(0,"mat-icon",33)}function En(t,n){1&t&&m._UZ(0,"mat-icon",34)}function Ln(t,n){if(1&t&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"date"),m.qZA()),2&t){const t=m.oxw(3);m.xp6(1),m.hij("Aceptada el ",m.xi3(2,1,null==t.quotation.offer?null:t.quotation.offer.accepted_at,"dd/MM/yyyy")||"--/--/----","")}}function jn(t,n){if(1&t&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"date"),m.qZA()),2&t){const t=m.oxw(3);m.xp6(1),m.hij("Rechazada el ",m.xi3(2,1,null==t.quotation.offer?null:t.quotation.offer.rejected_at,"dd/MM/yyyy")||"--/--/----","")}}function Hn(t,n){if(1&t&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"date"),m.qZA()),2&t){const t=m.oxw(3);m.xp6(1),m.hij("Rechazada el ",m.xi3(2,1,null==t.quotation?null:t.quotation.discarded_at,"dd/MM/yyyy")||"--/--/----","")}}function Gn(t,n){if(1&t&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"date"),m.qZA()),2&t){const t=m.oxw(3);m.xp6(1),m.hij("Enviada el ",m.xi3(2,1,null==t.quotation.offer?null:t.quotation.offer.created_at,"dd/MM/yyyy")||"--/--/----","")}}const Rn=function(){return[5,7]};function Vn(t,n){if(1&t&&(m.TgZ(0,"div",35),m.TgZ(1,"div",36),m.TgZ(2,"h5",37),m._uU(3),m.ALo(4,"currency"),m.qZA(),m.TgZ(5,"div",38),m.YNc(6,Ln,3,4,"span",39),m.YNc(7,jn,3,4,"span",40),m.YNc(8,Hn,3,4,"span",40),m.YNc(9,Gn,3,4,"span",41),m.qZA(),m.qZA(),m.TgZ(10,"div",36),m.TgZ(11,"a",42),m._uU(12,"Ver cotizaci\xf3n"),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.oxw(2);m.xp6(3),m.Oqu(m.lcZ(4,7,null==t.quotation.offer?null:t.quotation.offer.amount)||"-"),m.xp6(2),m.Q6J("ngSwitch",null==t.quotation.status?null:t.quotation.status.id),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(9,Rn)),m.xp6(1),m.Q6J("ngSwitchCase",6),m.xp6(1),m.Q6J("ngSwitchCase",4),m.xp6(3),m.s9C("href",t.publicUrl(null==t.quotation.offer||null==t.quotation.offer.file?null:t.quotation.offer.file.url),m.LSH),m.Q6J("disabled",!(null!=t.quotation.offer&&t.quotation.offer.file))}}function Xn(t,n){1&t&&(m.TgZ(0,"p",43),m._uU(1,"El proveedor aun no ha enviado una cotizaci\xf3n."),m.qZA())}function Wn(t,n){if(1&t){const t=m.EpF();m.ynx(0),m._UZ(1,"mat-divider"),m.TgZ(2,"div",44),m.TgZ(3,"div",45),m.TgZ(4,"button",46),m.NdJ("click",function(){return m.CHM(t),m.oxw(2).discard()}),m._uU(5,"Descartar"),m.qZA(),m.qZA(),m.TgZ(6,"div",47),m.TgZ(7,"p"),m._uU(8,"Si descartas esta cotizaci\xf3n no podr\xe1s continuar con el proceso"),m.qZA(),m.qZA(),m.qZA(),m.BQk()}}function Kn(t,n){if(1&t){const t=m.EpF();m.ynx(0),m._UZ(1,"mat-divider"),m.TgZ(2,"div",44),m.TgZ(3,"div",45),m.TgZ(4,"button",48),m.NdJ("click",function(){return m.CHM(t),m.oxw(2).interested()}),m._uU(5,"Me interesa"),m.qZA(),m.qZA(),m.TgZ(6,"div",45),m.TgZ(7,"button",46),m.NdJ("click",function(){return m.CHM(t),m.oxw(2).discard()}),m._uU(8,"Descartar"),m.qZA(),m.qZA(),m.TgZ(9,"div",47),m.TgZ(10,"p"),m._uU(11,"Para poder ver los datos y el chat con este proveedor debes aceptar esta cotizaci\xf3n"),m.qZA(),m.qZA(),m.qZA(),m.BQk()}}function te(t,n){if(1&t){const t=m.EpF();m.ynx(0),m._UZ(1,"mat-divider"),m.TgZ(2,"div",44),m.TgZ(3,"div",45),m.TgZ(4,"button",48),m.NdJ("click",function(){return m.CHM(t),m.oxw(2).close()}),m._uU(5,"Cerrar trato"),m.qZA(),m.qZA(),m.TgZ(6,"div",45),m.TgZ(7,"button",46),m.NdJ("click",function(){return m.CHM(t),m.oxw(2).reject()}),m._uU(8,"Rechazar"),m.qZA(),m.qZA(),m.TgZ(9,"div",47),m.TgZ(10,"p"),m._uU(11,"Una vez cerado el trato podr\xe1s calificar tu experiencia"),m.qZA(),m.qZA(),m.qZA(),m.BQk()}}function ne(t,n){if(1&t&&(m.TgZ(0,"mat-chip",53,54),m._uU(2),m.qZA()),2&t){const t=n.$implicit;m.Q6J("value",t.id)("selected",!0)("selectable",!1),m.xp6(2),m.Oqu(t.name)}}function ee(t,n){if(1&t&&(m.ynx(0),m.TgZ(1,"div",49),m.TgZ(2,"div",55),m.TgZ(3,"p"),m._uU(4),m.qZA(),m.qZA(),m.qZA(),m.BQk()),2&t){const t=m.oxw(3);m.xp6(4),m.Oqu(t.quotation.discard_details)}}function oe(t,n){if(1&t&&(m.ynx(0),m.TgZ(1,"div",49),m.TgZ(2,"div",50),m.TgZ(3,"mat-chip-list",51),m.YNc(4,ne,3,4,"mat-chip",52),m.qZA(),m.qZA(),m.qZA(),m.YNc(5,ee,5,1,"ng-container",18),m.BQk()),2&t){const t=m.oxw(2);m.xp6(3),m.Q6J("multiple",!0),m.xp6(1),m.Q6J("ngForOf",t.quotation.discard_motives),m.xp6(1),m.Q6J("ngIf",t.quotation.discard_details)}}function ae(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Seleccione un plazo de entrega."),m.qZA())}function re(t,n){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"form",56),m.NdJ("ngSubmit",function(){return m.CHM(t),m.oxw(2).setDelivery()}),m._UZ(2,"mat-divider"),m.TgZ(3,"div",57),m.TgZ(4,"div",58),m.TgZ(5,"label",59),m._uU(6,"Si ya estableciste un plazo de entrega con tu proveedor ingr\xe9salo aqu\xed"),m.qZA(),m.TgZ(7,"mat-form-field",60),m.TgZ(8,"input",61),m.NdJ("click",function(){return m.CHM(t),m.MAs(11).open()}),m.qZA(),m._UZ(9,"mat-datepicker-toggle",62),m._UZ(10,"mat-datepicker",null,63),m.YNc(12,ae,2,0,"mat-error",18),m.qZA(),m.qZA(),m.qZA(),m._UZ(13,"mat-divider"),m.TgZ(14,"div",44),m.TgZ(15,"div",45),m.TgZ(16,"button",64),m._uU(17,"Aceptar"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.BQk()}if(2&t){const t=m.MAs(11),n=m.oxw(2);let e;m.xp6(1),m.Q6J("formGroup",n.deliveryForm),m.xp6(7),m.Q6J("min",n.minDate)("matDatepicker",t),m.xp6(1),m.Q6J("for",t),m.xp6(3),m.Q6J("ngIf",null==(e=n.deliveryForm.get("deliver_at"))?null:e.hasError("required")),m.xp6(4),m.Q6J("disabled",n.wait)}}function ie(t,n){if(1&t&&(m.TgZ(0,"div",47),m.TgZ(1,"h5",67),m._uU(2,"Motivo del rechazo"),m.qZA(),m.TgZ(3,"p",68),m._uU(4),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(4),m.Oqu(null==t.quotation.offer?null:t.quotation.offer.reject_details)}}function ce(t,n){if(1&t&&(m.ynx(0),m._UZ(1,"mat-divider"),m.TgZ(2,"div",65),m.YNc(3,ie,5,1,"div",66),m.qZA(),m.BQk()),2&t){const t=m.oxw(2);m.xp6(3),m.Q6J("ngIf",null==t.quotation.offer?null:t.quotation.offer.reject_details)}}function le(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"mat-chip",79,54),m.NdJ("click",function(){m.CHM(t);const n=m.MAs(1);return m.oxw(4).toggleMotive(n)}),m._uU(2),m.qZA()}if(2&t){const t=n.$implicit;m.Q6J("value",t.id),m.xp6(2),m.Oqu(t.name)}}function se(t,n){if(1&t&&(m.TgZ(0,"div"),m.TgZ(1,"div",49),m.TgZ(2,"div",50),m.TgZ(3,"mat-chip-list",77),m.YNc(4,le,3,2,"mat-chip",78),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(3),m.Q6J("multiple",!0),m.xp6(1),m.Q6J("ngForOf",t.rating_motives)}}function ue(t,n){1&t&&(m.ynx(0),m.TgZ(1,"div",49),m.TgZ(2,"div",55),m.TgZ(3,"mat-form-field",80),m._UZ(4,"textarea",81),m.qZA(),m.qZA(),m.qZA(),m.BQk())}function ge(t,n){if(1&t&&(m.TgZ(0,"div",82),m.TgZ(1,"div",15),m.TgZ(2,"button",64),m._uU(3,"Calificar"),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(2),m.Q6J("disabled",t.wait)}}function de(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"mat-card",69),m.TgZ(1,"mat-card-header"),m.TgZ(2,"mat-card-title"),m._UZ(3,"mat-icon",70),m._uU(4," Calificai\xf3n "),m.qZA(),m.qZA(),m.TgZ(5,"mat-card-content",71),m.TgZ(6,"form",72),m.NdJ("ngSubmit",function(){return m.CHM(t),m.oxw(2).setRating()}),m.TgZ(7,"div",57),m.TgZ(8,"div",73),m.TgZ(9,"ngx-stars",74),m.NdJ("ratingOutput",function(n){return m.CHM(t),m.oxw(2).onRatingSet(n)}),m.qZA(),m.qZA(),m.TgZ(10,"div",75),m.TgZ(11,"p"),m._uU(12,"Por favor califica tu experiencia con este proveedor"),m.qZA(),m.qZA(),m.qZA(),m.YNc(13,se,5,2,"div",18),m.YNc(14,ue,5,0,"ng-container",18),m.YNc(15,ge,4,1,"div",76),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(2);let n,e,o,a;m.xp6(6),m.Q6J("formGroup",t.ratingForm),m.xp6(3),m.ekj("unrated",!(null!=(n=t.ratingForm.get("rating"))&&n.value)),m.Q6J("color","#DFBF03")("size",3)("maxStars",5)("wholeStars",!0)("customStarIcons",t.matStars),m.xp6(1),m.Q6J("hidden",null==(e=t.ratingForm.get("rating"))?null:e.value),m.xp6(3),m.Q6J("ngIf",null==(o=t.ratingForm.get("rating"))?null:o.valid),m.xp6(1),m.Q6J("ngIf",null==(a=t.ratingForm.get("motives"))||null==a.value?null:a.value.includes(6)),m.xp6(1),m.Q6J("ngIf",t.ratingForm.valid)}}function me(t,n){if(1&t&&(m.TgZ(0,"mat-chip",53,54),m._uU(2),m.qZA()),2&t){const t=n.$implicit;m.Q6J("value",t.id)("selected",!0)("selectable",!1),m.xp6(2),m.Oqu(t.name)}}function pe(t,n){if(1&t&&(m.ynx(0),m.TgZ(1,"div",49),m.TgZ(2,"div",55),m.TgZ(3,"p"),m._uU(4),m.qZA(),m.qZA(),m.qZA(),m.BQk()),2&t){const t=m.oxw(3);m.xp6(4),m.Oqu(t.quotation.rating.rating_details)}}function fe(t,n){if(1&t&&(m.TgZ(0,"mat-card",69),m.TgZ(1,"mat-card-header"),m.TgZ(2,"mat-card-title"),m._UZ(3,"mat-icon",83),m._uU(4," Calificai\xf3n "),m.qZA(),m.qZA(),m.TgZ(5,"mat-card-content",71),m.TgZ(6,"div",57),m.TgZ(7,"div",73),m._UZ(8,"ngx-stars",84),m.qZA(),m.qZA(),m.TgZ(9,"div",49),m.TgZ(10,"div",50),m.TgZ(11,"mat-chip-list",51),m.YNc(12,me,3,4,"mat-chip",52),m.qZA(),m.qZA(),m.qZA(),m.YNc(13,pe,5,1,"ng-container",18),m.qZA(),m.qZA()),2&t){const t=m.oxw(2);m.xp6(8),m.ekj("unrated",!t.quotation.rating.rating),m.Q6J("initialStars",t.quotation.rating.rating)("color","#DFBF03")("size",3)("maxStars",5)("customStarIcons",t.matStars)("readonly",!0),m.xp6(3),m.Q6J("multiple",!0),m.xp6(1),m.Q6J("ngForOf",t.quotation.rating.motives),m.xp6(1),m.Q6J("ngIf",t.quotation.rating.rating_details)}}function he(t,n){if(1&t&&(m.TgZ(0,"mat-card",88),m.TgZ(1,"mat-card-title"),m._uU(2),m.qZA(),m.TgZ(3,"mat-card-content"),m.TgZ(4,"div",89),m.TgZ(5,"div",15),m.TgZ(6,"mat-icon"),m._uU(7,"phone"),m.qZA(),m.TgZ(8,"span",90),m._uU(9),m.ALo(10,"phone"),m.qZA(),m.qZA(),m.TgZ(11,"div",15),m.TgZ(12,"mat-icon"),m._uU(13,"mail"),m.qZA(),m.TgZ(14,"span",91),m._uU(15),m.qZA(),m.qZA(),m.TgZ(16,"div",47),m.TgZ(17,"mat-icon"),m._uU(18,"place"),m.qZA(),m.TgZ(19,"p"),m._uU(20),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(2),m.AsE("",null==t.quotation.offer||null==t.quotation.offer.author?null:t.quotation.offer.author.firstname," ",null==t.quotation.offer||null==t.quotation.offer.author?null:t.quotation.offer.author.lastname,""),m.xp6(7),m.Oqu(m.lcZ(10,10,null==t.quotation.supplier?null:t.quotation.supplier.phone)),m.xp6(6),m.Oqu(null==t.quotation.offer||null==t.quotation.offer.author?null:t.quotation.offer.author.email),m.xp6(5),m.gL8("",null==t.quotation.supplier?null:t.quotation.supplier.address,", col. ",null==t.quotation.supplier?null:t.quotation.supplier.neighborhood,", ",null==t.quotation.supplier?null:t.quotation.supplier.city,", ",null==t.quotation.supplier?null:t.quotation.supplier.state,", ",null==t.quotation.supplier?null:t.quotation.supplier.country," C.P. ",null==t.quotation.supplier?null:t.quotation.supplier.postal_code,"")}}function _e(t,n){if(1&t&&(m.TgZ(0,"div",85),m._UZ(1,"app-chat-card",86),m.YNc(2,he,21,12,"mat-card",87),m.qZA()),2&t){const t=m.oxw(2);m.xp6(1),m.Q6J("id",t.quotation.id)("type","quotation")("room","cotizacion_"+t.quotation.id)("titleName",null==t.quotation.supplier?null:t.quotation.supplier.name)("titlePicture",null==t.quotation.supplier?null:t.quotation.supplier.profile_picture)("titleLink","/empresas/catalogo/proveedores/"+(null==t.quotation.supplier?null:t.quotation.supplier.id))("canChat",t.canChat()),m.xp6(1),m.Q6J("ngIf",(null==t.quotation.offer?null:t.quotation.offer.author)&&m.DdM(8,Rn).includes(null==t.quotation.status?null:t.quotation.status.id))}}const Ze=function(){return[1,2,3]},Ce=function(){return[4,6]},Me=function(){return[3,5,6,7]};function qe(t,n){if(1&t&&(m.TgZ(0,"div",8),m.TgZ(1,"div",9),m.TgZ(2,"mat-card",10),m.TgZ(3,"mat-card-header"),m.TgZ(4,"mat-card-title"),m._UZ(5,"app-profile-picture-avatar",11),m._uU(6),m.qZA(),m.TgZ(7,"span",12),m._uU(8),m.qZA(),m.TgZ(9,"div"),m.TgZ(10,"span"),m._uU(11),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(12,"mat-card",13),m.TgZ(13,"mat-card-content"),m.TgZ(14,"dl",14),m.TgZ(15,"dt",15),m._uU(16,"Servicio solicitado:"),m.qZA(),m.TgZ(17,"dd",16),m._uU(18),m.qZA(),m._UZ(19,"div",17),m.TgZ(20,"dt",15),m._uU(21,"Fecha de la solicitud:"),m.qZA(),m.TgZ(22,"dd",15),m._uU(23),m.ALo(24,"date"),m.qZA(),m._UZ(25,"div",17),m.TgZ(26,"dt",15),m._uU(27,"Usuario de la solicitud:"),m.qZA(),m.TgZ(28,"dd",15),m._uU(29),m.qZA(),m._UZ(30,"div",17),m.TgZ(31,"dt",15),m._uU(32,"Cantidad:"),m.qZA(),m.TgZ(33,"dd",15),m._uU(34),m.qZA(),m._UZ(35,"div",17),m.YNc(36,Fn,7,4,"ng-container",18),m.qZA(),m._UZ(37,"mat-divider"),m.TgZ(38,"div",19),m.TgZ(39,"h2"),m._uU(40,"Detalles"),m.qZA(),m.TgZ(41,"p"),m._uU(42),m.qZA(),m.qZA(),m.TgZ(43,"a",20),m.TgZ(44,"mat-icon"),m._uU(45,"note_add"),m.qZA(),m._uU(46," Ver documento "),m.qZA(),m.qZA(),m.qZA(),m.TgZ(47,"mat-card",21),m.TgZ(48,"mat-card-header"),m.TgZ(49,"mat-card-title",22),m.YNc(50,Dn,1,0,"mat-icon",23),m.YNc(51,$n,1,0,"mat-icon",24),m.YNc(52,Bn,1,0,"mat-icon",25),m.YNc(53,En,1,0,"mat-icon",26),m._uU(54," Cotizaci\xf3n "),m.qZA(),m.qZA(),m.TgZ(55,"mat-card-content"),m.YNc(56,Vn,13,10,"div",27),m.YNc(57,Xn,2,0,"ng-template",null,28,m.W1O),m.YNc(59,Wn,9,0,"ng-container",18),m.YNc(60,Kn,12,0,"ng-container",18),m.YNc(61,te,12,0,"ng-container",18),m.YNc(62,oe,6,3,"ng-container",18),m.YNc(63,re,18,6,"ng-container",18),m.YNc(64,ce,4,1,"ng-container",18),m.qZA(),m.qZA(),m.YNc(65,de,16,12,"mat-card",29),m.YNc(66,fe,14,11,"mat-card",29),m.qZA(),m.YNc(67,_e,3,9,"div",30),m.qZA()),2&t){const t=m.MAs(58),n=m.oxw();m.xp6(5),m.Q6J("profile_picture",null==n.quotation.company?null:n.quotation.company.profile_picture),m.xp6(1),m.hij(" ",null==n.quotation.company?null:n.quotation.company.name," "),m.xp6(2),m.AsE("ID: ",null==n.quotation.group?null:n.quotation.group.id,"-",n.quotation.id,""),m.xp6(2),m.Gre("pill pill-lg pill-",null==n.quotation.status?null:n.quotation.status.class," mx-auto"),m.xp6(1),m.Oqu(null==n.quotation.status?null:n.quotation.status.name),m.xp6(7),m.Oqu((null==n.quotation.service?null:n.quotation.service.name)||"N/A"),m.xp6(5),m.Oqu(m.xi3(24,31,n.quotation.created_at,"dd/MM/yyyy")),m.xp6(6),m.Oqu((null==n.quotation.user?null:n.quotation.user.firstname)+" "+(null==n.quotation.user?null:n.quotation.user.lastname)),m.xp6(5),m.Oqu(n.quotation.qty),m.xp6(2),m.Q6J("ngIf",null==n.quotation.offer?null:n.quotation.offer.deliver_at),m.xp6(6),m.Oqu(n.quotation.details),m.xp6(1),m.s9C("href",n.publicUrl(null==n.quotation.file?null:n.quotation.file.url),m.LSH),m.Q6J("disabled",!n.quotation.file),m.xp6(6),m.Q6J("ngSwitch",null==n.quotation.status?null:n.quotation.status.id),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(34,Ze)),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(35,Rn)),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(36,Ce)),m.xp6(4),m.Q6J("ngIf",n.quotation.offer||4==(null==n.quotation.status?null:n.quotation.status.id))("ngIfElse",t),m.xp6(3),m.Q6J("ngIf",1==(null==n.quotation.status?null:n.quotation.status.id)),m.xp6(1),m.Q6J("ngIf",2==(null==n.quotation.status?null:n.quotation.status.id)),m.xp6(1),m.Q6J("ngIf",3==(null==n.quotation.status?null:n.quotation.status.id)),m.xp6(1),m.Q6J("ngIf",4==(null==n.quotation.status?null:n.quotation.status.id)),m.xp6(1),m.Q6J("ngIf",5==(null==n.quotation.status?null:n.quotation.status.id)&&null===(null==n.quotation.offer?null:n.quotation.offer.deliver_at)),m.xp6(1),m.Q6J("ngIf",6==(null==n.quotation.status?null:n.quotation.status.id)),m.xp6(1),m.Q6J("ngIf",5==(null==n.quotation.status?null:n.quotation.status.id)&&n.canRate()),m.xp6(1),m.Q6J("ngIf",7==(null==n.quotation.status?null:n.quotation.status.id)&&n.quotation.rating),m.xp6(1),m.Q6J("ngIf",m.DdM(37,Me).includes(null==n.quotation.status?null:n.quotation.status.id))}}let xe=(()=>{class t{constructor(t,n,e,o,a,r,i){this.http=t,this.router=n,this.route=e,this.dialog=o,this.alert=a,this.authenticationService=r,this.formBuilder=i,this.users=[],this.rating_motives=[],this.discard_motives=[],this.minDate=new Date,this.wait=!1,this.matStars={empty:`${x.N.basehref}assets/images/star_outline.svg`,half:`${x.N.basehref}assets/images/star_half.svg`,full:`${x.N.basehref}assets/images/star.svg`},this.currentUser=r.currentUserValue,this.route.paramMap.subscribe(t=>{this.id=t.get("cotizacionId"),this.groupId=t.get("grupoId"),this.ngOnInit()}),this.loadUsers(),this.loadDiscardMotives(),this.loadRatingMotives()}ngOnInit(){this.deliveryForm=this.formBuilder.group({deliver_at:[null,[r.kI.required]]}),this.ratingForm=this.formBuilder.group({rating:[null,[r.kI.required]],motives:[null,[r.kI.required]],rating_details:[null,[]]}),this.loadQuotation(),this.loadUsers(),this.loadDiscardMotives()}loadQuotation(){this.http.get(`${x.N.apiUrl}/quotations/${this.id}`).subscribe(t=>{this.quotation=t},t=>{})}loadUsers(){const t=(new i.LE).set("id_ne",this.currentUser.id);this.http.get(`${x.N.apiUrl}/users`,{params:t}).subscribe(t=>{this.users=t.map(t=>({id:t.id,name:t.username}))},t=>{})}loadDiscardMotives(){const t=new i.LE;this.http.get(`${x.N.apiUrl}/discard-motives`,{params:t}).subscribe(t=>{this.discard_motives=t},t=>{})}loadRatingMotives(){const t=new i.LE;this.http.get(`${x.N.apiUrl}/rating-motives`,{params:t}).subscribe(t=>{this.rating_motives=t},t=>{})}share(){this.alert.open({title:"\xbfQuieres compartir esta cotizaci\xf3n?",text:"Puedes compartir esta cotizaci\xf3n con alguien de tu equipo, sin embargo una vez la asignes ya no podr\xe1s contestar los mensajes del chat.",input:"select",inputLabel:"Usuario",inputPlaceholder:"Nombre del usuario",inputOptions:this.users,inputRequired:!0}).then(t=>{if(t){let{isConfirmed:n,value:e}=t;n&&e&&this.http.post(`${x.N.apiUrl}/quotations/share/${this.id}`,{user:e}).subscribe(t=>{console.log(t),this.router.navigateByUrl("/empresas/cotizaciones")},t=>{})}})}openReport(){this.dialog.open(Jn,{width:"677px",panelClass:["dialog-py-48","dialog-px-75"],data:{}}).afterClosed().subscribe(t=>{console.log("The dialog was closed")})}interested(){this.alert.open({title:"\xbfTe Interesa esta cotizaci\xf3n?",text:"Una vez aceptada esta cotizaci\xf3n podr\xe1s acceder al chat con el proveedor, por favor solo acepta si estas seguro de continuar con el proceso."}).then(t=>{t&&this.http.put(`${x.N.apiUrl}/quotations/interest/${this.id}`,{}).subscribe(t=>{console.log(t),this.quotation=t},t=>{})})}close(){this.alert.open({title:"\xbfEst\xe1s seguro de cerrar el trato?",text:"Una vez aceptada esta cotizaci\xf3n podr\xe1s calificar a el proveedor, por favor solo acepta si est\xe1s seguro de cerrar el trato con este proveedor."}).then(t=>{t&&this.http.put(`${x.N.apiUrl}/quotations/close/${this.id}`,{}).subscribe(t=>{console.log(t),this.quotation=t},t=>{})})}discard(){this.alert.open({title:"\xbfEst\xe1s seguro de descartar esta cotizaci\xf3n?",text:"Una vez descartada esta cotizaci\xf3n no podr\xe1s acceder a los datos y ni al chat con el proveedor, por favor solo rechazala si estas seguro de no querer continuar con el proceso.",input:"pills",multiple:!0,inputLabel:"Ayuda al proveedor a mejorar contandole el motivo de tu descarte:",inputOptions:this.discard_motives,inputRequired:!0,showDetails:t=>!!t&&t.includes(6)}).then(t=>{if(t){let{isConfirmed:n,value:e,details:o}=t;n&&this.http.put(`${x.N.apiUrl}/quotations/discard/${this.id}`,{discard_motives:e,discard_details:o}).subscribe(t=>{this.quotation=t},t=>{})}})}reject(){this.alert.open({title:"\xbfEst\xe1s seguro de Rechazar esta cotizaci\xf3n?",text:"Una vez descartada esta cotizaci\xf3n no podr\xe1s acceder a los datos y ni al chat con el proveedor, por favor solo rechazarla si est\xe1s seguro de no querer continuar con el proceso.",input:"textarea",inputPlaceholder:"Ayuda a tu proveedor a mejorar, cuentale el motivo del rechazo",inputOptions:this.discard_motives,inputRequired:!0,showDetails:t=>!!t&&t.includes(6)}).then(t=>{if(t){let{isConfirmed:n,value:e}=t;n&&this.http.put(`${x.N.apiUrl}/quotations/reject/${this.id}`,{reject_details:e}).subscribe(t=>{this.quotation=t},t=>{})}})}setDelivery(){if(this.deliveryForm.invalid)return console.log("form invalid"),void this.deliveryForm.markAllAsTouched();this.alert.open({title:"\xbfEst\xe1s seguro de establecer este plazo?",text:"No podr\xe1s calificar a este proveedor hasta la fecha establecida de entrega, por favor solo acepta si est\xe1s seguro."}).then(t=>{if(t){let t=this.deliveryForm.getRawValue();this.wait=!0,this.http.put(`${x.N.apiUrl}/quotations/set-delivery/${this.id}`,t).subscribe(t=>{console.log(t),this.wait=!1,this.quotation.offer=t},t=>{this.wait=!1})}})}setRating(){if(this.ratingForm.invalid)return console.log("form invalid"),void this.ratingForm.markAllAsTouched();this.alert.open({title:"\xbfEst\xe1s seguro de tu calificaci\xf3n?",text:"Una vez calificada tu experiencia la cotizaci\xf3n se marcar\xe1 como finalizada y ya no podr\xe1s enviarle mensajes a tu proveedor ni modificar su puntuaci\xf3n."}).then(t=>{if(t){let t=this.ratingForm.getRawValue();this.wait=!0,this.http.put(`${x.N.apiUrl}/quotations/set-rating/${this.id}`,t).subscribe(t=>{console.log(t),this.wait=!1,this.quotation=t},t=>{this.wait=!1})}})}onRatingSet(t){var n;null===(n=this.ratingForm.get("rating"))||void 0===n||n.setValue(t)}canRate(){var t,n;return!!(null===(t=this.quotation.offer)||void 0===t?void 0:t.deliver_at)&&Z().isSameOrAfter(Z(null===(n=this.quotation.offer)||void 0===n?void 0:n.deliver_at),"day")}toggleMotive(t){t.toggleSelected(!0)}canChat(){var t,n;return this.currentUser.id==(null===(t=this.quotation.user)||void 0===t?void 0:t.id)&&[3,5].includes(null===(n=this.quotation.status)||void 0===n?void 0:n.id)}publicUrl(t){return`${x.N.apiUrl}${t}`}assetUrl(t){return`${x.N.basehref}${t}`}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(a.F0),m.Y36(a.gz),m.Y36(wn.uw),m.Y36(C.c9),m.Y36(C.$h),m.Y36(r.qu))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-cotizacion-detalles"]],viewQuery:function(t,n){if(1&t&&m.Gf(zn,5),2&t){let t;m.iGM(t=m.CRH())&&(n.myScrollContainer=t.first)}},decls:17,vars:3,consts:[[1,"container","pt-5","px-md-5"],[1,"row"],[1,"col","page-title"],["routerLink","..",1,"btn-return"],[1,"col","page-actions"],["mat-button","","color","accent",1,"btn-round","btn-sm","btn-share","me-3",3,"disabled","click"],["mat-button","","color","warn",1,"btn-round","btn-sm","btn-report",3,"disabled","click"],["class","row pt-3 gy-5",4,"ngIf"],[1,"row","pt-3","gy-5"],[1,"col-lg-7"],[1,"card-empresa"],[3,"profile_picture"],[1,"empresa-id"],[1,"card-info","mt-3"],[1,"row","list-info"],[1,"col-auto"],[1,"col-auto","serv-name"],[1,"w-100"],[4,"ngIf"],[1,"details","pt-4"],["mat-flat-button","","color","primary","target","_blank",1,"btn-round","btn-sm",3,"href","disabled"],[1,"card-offer","mt-5"],[3,"ngSwitch"],["svgIcon","cotizacion-pending",4,"jrSwitchCases"],["svgIcon","cotizacion-active",4,"jrSwitchCases"],["svgIcon","cotizacion-reject",4,"jrSwitchCases"],["svgIcon","cotizacion",4,"ngSwitchDefault"],["class","row gx-5 justify-content-center align-items-center row-info",4,"ngIf","ngIfElse"],["no_offer",""],["class","card-rating mt-5",4,"ngIf"],["class","col-lg-5",4,"ngIf"],["svgIcon","cotizacion-pending"],["svgIcon","cotizacion-active"],["svgIcon","cotizacion-reject"],["svgIcon","cotizacion"],[1,"row","gx-5","justify-content-center","align-items-center","row-info"],[1,"col-auto","my-3"],[1,"price"],[1,"date",3,"ngSwitch"],[4,"jrSwitchCases"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["mat-flat-button","","color","accent","target","_blank",1,"btn-round","btn-view",3,"href","disabled"],[1,"no_offer","my-4"],[1,"row","gx-5","justify-content-center","align-items-center","row-controls"],[1,"col-auto","my-4"],["mat-flat-button","","color","primary",1,"btn-round","btn-md",3,"click"],[1,"col-12"],["mat-flat-button","","color","accent",1,"btn-round","btn-md",3,"click"],[1,"row","justify-content-center","pt-3"],[1,"col-sm-10"],[3,"multiple"],[3,"value","selected","selectable",4,"ngFor","ngForOf"],[3,"value","selected","selectable"],["c","matChip"],[1,"col-sm-11"],[1,"plazo-form",3,"formGroup","ngSubmit"],[1,"row","pt-4","justify-content-center","align-items-center","row-controls"],[1,"form-group","col-8"],["for","deliver_at",1,"form-label"],["color","primary","appearance","outline"],["matInput","","id","deliver_at","formControlName","deliver_at","placeholder","00/00/0000","readonly","",3,"min","matDatepicker","click"],["matSuffix","",3,"for"],["picker",""],["type","submit","mat-flat-button","","color","accent",1,"btn-round",3,"disabled"],[1,"row","gx-4","justify-content-center","align-items-center","row-reject-info"],["class","col-12 ",4,"ngIf"],[1,"mt-4"],[1,"text-right"],[1,"card-rating","mt-5"],["svgIcon","star"],[1,"pb-4"],[1,"rating-form",3,"formGroup","ngSubmit"],[1,"form-group","col-auto"],[3,"color","size","maxStars","wholeStars","customStarIcons","ratingOutput"],[1,"col-10",3,"hidden"],["class","row mt-4 justify-content-center align-items-center row-controls",4,"ngIf"],["selectable","","formControlName","motives",3,"multiple"],[3,"value","click",4,"ngFor","ngForOf"],[3,"value","click"],["appearance","outline",1,"w-100"],["matInput","","id","details","rows","6","formControlName","rating_details","placeholder",""],[1,"row","mt-4","justify-content-center","align-items-center","row-controls"],["svgIcon","star-active"],[3,"initialStars","color","size","maxStars","customStarIcons","readonly"],[1,"col-lg-5"],[3,"id","type","room","titleName","titlePicture","titleLink","canChat"],["class","card-in-chargue mt-3",4,"ngIf"],[1,"card-in-chargue","mt-3"],[1,"row","g-3"],[1,"phone"],[1,"email"]],template:function(t,n){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"a",3),m.TgZ(4,"mat-icon"),m._uU(5,"arrow_back_ios"),m.qZA(),m._uU(6," Cotizaciones "),m.qZA(),m.qZA(),m.TgZ(7,"div",4),m.TgZ(8,"button",5),m.NdJ("click",function(){return n.share()}),m.TgZ(9,"mat-icon"),m._uU(10,"share"),m.qZA(),m._uU(11," Compartir cotizaci\xf3n "),m.qZA(),m.TgZ(12,"button",6),m.NdJ("click",function(){return n.openReport()}),m.TgZ(13,"mat-icon"),m._uU(14,"error"),m.qZA(),m._uU(15," Reportar un problema "),m.qZA(),m.qZA(),m.qZA(),m.YNc(16,qe,68,38,"div",7),m.qZA()),2&t&&(m.xp6(8),m.Q6J("disabled",n.currentUser.id!=(null==n.quotation||null==n.quotation.user?null:n.quotation.user.id)),m.xp6(4),m.Q6J("disabled",n.currentUser.id!=(null==n.quotation||null==n.quotation.user?null:n.quotation.user.id)),m.xp6(4),m.Q6J("ngIf",n.quotation))},directives:[a.yS,b.Hw,v.lW,o.O5,O.a8,O.dk,O.n5,$t.X,O.dn,Y.d,v.zs,o.RF,E.I,o.ED,o.n9,Qn.qn,o.sg,Qn.HS,r._Y,r.JL,r.sg,pt.KE,ft.Nt,r.Fj,In.hl,r.JJ,r.u,In.nW,pt.R9,In.Mq,pt.TO,c.ve,Yn.a],pipes:[o.uU,o.H9,Sn.E],styles:["mat-card[_ngcontent-%COMP%]{background:#fff;box-shadow:0 5px 5px #4094ab3d!important;border-radius:10px}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:15px;display:flex;align-items:center;color:#062ebd}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:1em}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]     .mat-card-header-text{margin:0}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{position:relative}mat-card.card-empresa[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{align-items:center;justify-content:space-between}mat-card.card-empresa[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:14px;display:flex;align-items:center;color:#062ebd;margin-bottom:0}mat-card.card-empresa[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]     img{margin-right:15px;background:#fbfbfb;border:1px solid #97bcc566;box-sizing:border-box}mat-card.card-empresa[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .empresa-id[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:500;font-size:11px;line-height:13px;color:#5a6a6f}mat-card.card-info[_ngcontent-%COMP%]   dl.list-info[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{color:var(--app-text-gris-oscuro)}mat-card.card-info[_ngcontent-%COMP%]   dl.list-info[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%], mat-card.card-info[_ngcontent-%COMP%]   dl.list-info[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:15px}mat-card.card-info[_ngcontent-%COMP%]   dl.list-info[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{color:var(--app-text-cyan)}mat-card.card-info[_ngcontent-%COMP%]   dl.list-info[_ngcontent-%COMP%]   dd.serv-name[_ngcontent-%COMP%]{color:var(--app-azul-marino)}mat-card.card-info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;color:#062ebd}mat-card.card-info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], mat-card.card-info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-size:12px;line-height:15px}mat-card.card-info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;color:#5a6a6f}mat-card.card-offer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:11px;line-height:13px}mat-card.card-offer[_ngcontent-%COMP%]   .row-info[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%], mat-card.card-offer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;text-align:center;color:#5a6a6f}mat-card.card-offer[_ngcontent-%COMP%]   .row-info[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700;font-size:14px;line-height:17px}mat-card.card-offer[_ngcontent-%COMP%]   .row-info[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:500;font-size:11px;line-height:13px;color:#5a6a6f}mat-card.card-offer[_ngcontent-%COMP%]   .row-info[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]{width:160px}mat-card.card-offer[_ngcontent-%COMP%]   .row-reject-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:15px;display:flex;align-items:center;color:#062ebd}mat-card.card-offer[_ngcontent-%COMP%]   .row-reject-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:left}mat-card.card-offer[_ngcontent-%COMP%]   .plazo-form[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%], mat-card.card-offer[_ngcontent-%COMP%]   .row-reject-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:500;font-size:12px;line-height:15px;color:#5a6a6f}mat-card.card-offer[_ngcontent-%COMP%]   .plazo-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}mat-card.card-rating[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;font-weight:400;font-size:12px;line-height:14px;text-align:center;color:#5a6a6f}mat-card.card-in-chargue[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:13px;line-height:16px;color:var(--app-gris-muy-oscuro)}mat-card.card-in-chargue[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center}mat-card.card-in-chargue[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:5px;color:var(--app-amarillo-claro)}mat-card.card-in-chargue[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:13px;line-height:16px;color:var(--app-text-cyan)}mat-card.card-in-chargue[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:Montserrat;font-style:normal;font-weight:500;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}mat-chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:9px;line-height:11px;display:flex;justify-content:center;align-items:center;text-align:center;color:#5a6a6f;min-width:calc(33.3% - 8px);height:37px;background:#f7f7f7;border:1px solid #c4c4c4;box-sizing:border-box;border-radius:50px}mat-chip-list[_ngcontent-%COMP%]   mat-chip.mat-chip.mat-standard-chip.mat-chip-selected.mat-primary[_ngcontent-%COMP%]{background:#fed00114;border:1px solid #fed001;color:#5a6a6f}"]}),t})();function Oe(t,n){if(1&t&&(m.TgZ(0,"mat-option",13),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.Q6J("value",t.id),m.xp6(1),m.Oqu(t.name)}}function ve(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"th",45),m.TgZ(1,"mat-checkbox",46),m.NdJ("change",function(n){m.CHM(t);const e=m.oxw();return n?e.masterToggle():null}),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(1),m.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function be(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"td",47),m.NdJ("click",function(t){return t.stopPropagation()}),m.TgZ(1,"mat-checkbox",48),m.NdJ("click",function(t){return t.stopPropagation()})("change",function(n){const e=m.CHM(t).$implicit,o=m.oxw();return n?o.selection.toggle(e):null}),m.qZA(),m.qZA()}if(2&t){const t=n.$implicit,e=m.oxw();m.xp6(1),m.Q6J("checked",e.selection.isSelected(t))("aria-label",e.checkboxLabel(t))}}function Pe(t,n){1&t&&(m.TgZ(0,"th",49),m._uU(1," ID "),m.qZA())}function Ae(t,n){if(1&t&&(m.TgZ(0,"td",50),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",t.id," ")}}function Te(t,n){1&t&&(m.TgZ(0,"th",51),m._uU(1," Nombre del proveedor "),m.qZA())}function we(t,n){if(1&t&&(m.TgZ(0,"td",52),m.TgZ(1,"a",53),m._UZ(2,"app-profile-picture-avatar",54),m._uU(3),m.qZA(),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.MGl("routerLink","/empresas/catalogo/proveedores/",null==t.supplier?null:t.supplier.id,""),m.xp6(1),m.Q6J("profile_picture",null==t.supplier?null:t.supplier.profile_picture),m.xp6(1),m.hij(" ",null==t.supplier?null:t.supplier.name," ")}}function ye(t,n){1&t&&(m.TgZ(0,"th",51),m._uU(1," Servicio "),m.qZA())}function Ue(t,n){if(1&t&&(m.TgZ(0,"td",52),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",null==t.offer?null:t.offer.name," ")}}function Ne(t,n){1&t&&(m.TgZ(0,"th",51),m._uU(1," Fecha "),m.qZA())}function ke(t,n){if(1&t&&(m.TgZ(0,"td",52),m._uU(1),m.ALo(2,"date"),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",m.xi3(2,1,t.created_at,"dd/MM/yyyy")," ")}}function Je(t,n){1&t&&(m.TgZ(0,"th",55),m._uU(1," Estado "),m.qZA())}function Qe(t,n){if(1&t&&(m.TgZ(0,"td",56),m.TgZ(1,"span"),m._uU(2),m.qZA(),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.Gre("pill pill-lg pill-",null==t.status?null:t.status.class," mx-auto"),m.xp6(1),m.Oqu(null==t.status?null:t.status.name)}}function Ie(t,n){1&t&&(m.TgZ(0,"th",55),m._uU(1," Precio "),m.qZA())}function Ye(t,n){if(1&t&&(m.TgZ(0,"td",57),m._uU(1),m.ALo(2,"currency"),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",m.lcZ(2,1,null==t.offer?null:t.offer.price)||"-"," ")}}function Se(t,n){1&t&&m._UZ(0,"th",58)}function ze(t,n){1&t&&m._UZ(0,"mat-icon",68)}function Fe(t,n){1&t&&m._UZ(0,"mat-icon",69)}function De(t,n){1&t&&m._UZ(0,"mat-icon",70)}function $e(t,n){1&t&&m._UZ(0,"mat-icon",71)}function Be(t,n){if(1&t&&m._UZ(0,"mat-icon",72),2&t){const t=m.oxw().$implicit;m.Q6J("matBadge",null==t.chat_room?null:t.chat_room.unread_a)("matBadgeHidden",!(null!=t.chat_room&&t.chat_room.unread_a))}}function Ee(t,n){if(1&t&&m._UZ(0,"mat-icon",73),2&t){const t=m.oxw().$implicit;m.Q6J("matBadge",null==t.chat_room?null:t.chat_room.unread_a)("matBadgeHidden",!(null!=t.chat_room&&t.chat_room.unread_a))}}function Le(t,n){1&t&&(m.ynx(0),m._UZ(1,"mat-icon",74),m.BQk())}function je(t,n){1&t&&(m.ynx(0),m._UZ(1,"mat-icon",75),m.BQk())}const He=function(){return[1,2,3]},Ge=function(){return[5,7]},Re=function(){return[4,6]},Ve=function(){return[3,5]};function Xe(t,n){if(1&t&&(m.TgZ(0,"td",59),m.ynx(1,60),m.YNc(2,ze,1,0,"mat-icon",61),m.YNc(3,Fe,1,0,"mat-icon",62),m.YNc(4,De,1,0,"mat-icon",63),m.YNc(5,$e,1,0,"mat-icon",64),m.BQk(),m.ynx(6,60),m.YNc(7,Be,1,2,"mat-icon",65),m.YNc(8,Ee,1,2,"mat-icon",66),m.BQk(),m.YNc(9,Le,2,0,"ng-container",67),m.YNc(10,je,2,0,"ng-container",67),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.Q6J("ngSwitch",null==t.status?null:t.status.id),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(8,He)),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(9,Ge)),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(10,Re)),m.xp6(2),m.Q6J("ngSwitch",null==t.status?null:t.status.id),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(11,Ve)),m.xp6(2),m.Q6J("ngIf",t.rating),m.xp6(1),m.Q6J("ngIf",!t.rating)}}function We(t,n){1&t&&m._UZ(0,"th",45)}function Ke(t,n){if(1&t&&(m.TgZ(0,"td",76),m.NdJ("click",function(t){return t.stopPropagation()}),m.TgZ(1,"a",77),m.TgZ(2,"mat-icon"),m._uU(3,"chevron_right"),m.qZA(),m.qZA(),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.Q6J("routerLink",t.id)}}function to(t,n){1&t&&m._UZ(0,"tr",78)}function no(t,n){1&t&&m._UZ(0,"tr",79),2&t&&m.Q6J("routerLink",n.$implicit.id)}function eo(t,n){1&t&&(m.TgZ(0,"tr",80),m.TgZ(1,"td",81),m._uU(2,"No tienes ofertas."),m.qZA(),m.qZA())}const oo=function(){return[5,10,20]};let ao=(()=>{class t{constructor(t,n,e,o,a){this.http=t,this.router=n,this.route=e,this.alert=o,this.authenticationService=a,this.displayedColumns=["select","id","supplier","offer","date","status","price","badges","actions"],this.dataSource=new gt.by([]),this.selection=new ut.Ov(!0,[]),this.users=[],this.motives=[],this.statuses=[],this.filters={_q:null,status:null,unread:null,tab:"open"},this.currentUser=this.authenticationService.currentUserValue,this.querySubscription=this.route.queryParamMap.subscribe(t=>{this.filters._q=t.get("_q")?t.get("_q"):null,this.filters.status=t.get("status")?Number(t.get("status")):null,this.filters.user=t.get("user")?Number(t.get("user")):null,this.filters.unread=t.get("unread")?"true"==t.get("unread"):null,t.get("tab")&&(this.filters.tab=t.get("tab")),this.applyFilter(!1)}),this.dataSource.sortingDataAccessor=(t,n)=>{var e,o,a,r;switch(n){case"id":return t.id;case"supplier":return null===(e=t.supplier)||void 0===e?void 0:e.name;case"offer":return null===(o=t.offer)||void 0===o?void 0:o.name;case"date":return t.created_at;case"status":return null===(a=t.status)||void 0===a?void 0:a.id;case"price":return null===(r=t.offer)||void 0===r?void 0:r.price;default:return t[n]}},this.dataSource.filterPredicate=(t,n)=>{var e,o,a;return!(null!==this.filters.status&&t.status.id!=this.filters.status||null!==this.filters.user&&t.user.id!=this.filters.user||this.filters.unread&&!(null===(e=t.chat_room)||void 0===e?void 0:e.unread_a)||(null==n?void 0:n._q)&&n._q.trim()&&-1==JSON.stringify([t.id,null===(o=t.supplier)||void 0===o?void 0:o.name,null===(a=t.offer)||void 0===a?void 0:a.name]).toLowerCase().indexOf(n._q.toLowerCase()))}}ngOnInit(){this.loadQuotationStatuses(),this.loadUsers(),this.loadDiscardMotives(),this.loadRequests()}ngOnDestroy(){this.querySubscription.unsubscribe()}ngAfterViewInit(){this.sort.sort({id:"date",start:"desc"}),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}loadRequests(){const t=new i.LE;this.http.get(`${x.N.apiUrl}/offer-requests`,{params:t}).subscribe(t=>{this.dataSource.data=t},t=>{})}loadQuotationStatuses(){this.http.get(`${x.N.apiUrl}/quotation-statuses`).subscribe(t=>{this.statuses=t},t=>{})}loadUsers(){this.http.get(`${x.N.apiUrl}/users`).subscribe(t=>{this.users=t.map(t=>({id:t.id,name:t.username}))},t=>{})}loadDiscardMotives(){const t=new i.LE;this.http.get(`${x.N.apiUrl}/discard-motives`,{params:t}).subscribe(t=>{this.motives=t},t=>{})}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.id+1}`:(this.isAllSelected()?"deselect":"select")+" all"}applyFilter(t=!0){this.dataSource.filter=this.filters,t&&this.router.navigate([],{queryParams:this.filters,queryParamsHandling:"merge",replaceUrl:!0})}bulkAction(){console.log(this.selection.isEmpty())}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(a.F0),m.Y36(a.gz),m.Y36(C.c9),m.Y36(C.$h))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-ofertas-relampago"]],viewQuery:function(t,n){if(1&t&&(m.Gf(dt.YE,5),m.Gf(mt.NW,5)),2&t){let t;m.iGM(t=m.CRH())&&(n.sort=t.first),m.iGM(t=m.CRH())&&(n.paginator=t.first)}},decls:64,vars:10,consts:[[1,"container-fluid","pt-5","px-md-5"],[1,"row"],[1,"col","page-title"],[1,"col","page-actions"],[1,"row","search-form"],[1,"form-group","col-auto","mt-2"],["for","search_name",1,"form-label"],["appearance","outline",1,"search-name"],["matPrefix",""],["matInput","","id","search_name","placeholder","Buscar por nombre del cliente o servicio",3,"ngModel","ngModelChange","keyup"],["for","tipo",1,"form-label"],["appearance","outline"],["id","order","placeholder","Todas","disableOptionCentering","",3,"ngModel","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"row","actions-form","pt-3"],[1,"form-group","col-auto","mt-1"],[3,"ngModel","ngModelChange","change"],[1,"col"],["mat-table","","matSort","",1,"cotizacion-table",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","class","px-3","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","px-3 text-nowrap",4,"matCellDef"],["matColumnDef","supplier"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","offer"],["matColumnDef","date"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","status-cell text-center",4,"matCellDef"],["matColumnDef","price"],["mat-cell","","class","price-cell text-center",4,"matCellDef"],["matColumnDef","badges"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","badges-cell text-end text-nowrap",4,"matCellDef"],["matColumnDef","actions"],["mat-cell","","class","actions-cell text-end",3,"click",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"routerLink",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell","",3,"click"],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header","",1,"px-3"],["mat-cell","",1,"px-3","text-nowrap"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],[3,"profile_picture"],["mat-header-cell","","mat-sort-header","",1,"text-center"],["mat-cell","",1,"status-cell","text-center"],["mat-cell","",1,"price-cell","text-center"],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"badges-cell","text-end","text-nowrap"],[3,"ngSwitch"],["svgIcon","cotizacion-pending",4,"jrSwitchCases"],["svgIcon","cotizacion-active",4,"jrSwitchCases"],["svgIcon","cotizacion-reject",4,"jrSwitchCases"],["svgIcon","cotizacion",4,"ngSwitchDefault"],["svgIcon","mnsg",3,"matBadge","matBadgeHidden",4,"jrSwitchCases"],["svgIcon","mnsg-disable",3,"matBadge","matBadgeHidden",4,"ngSwitchDefault"],[4,"ngIf"],["svgIcon","cotizacion-pending"],["svgIcon","cotizacion-active"],["svgIcon","cotizacion-reject"],["svgIcon","cotizacion"],["svgIcon","mnsg",3,"matBadge","matBadgeHidden"],["svgIcon","mnsg-disable",3,"matBadge","matBadgeHidden"],["svgIcon","star-active",1,"ms-1"],["svgIcon","star-disable"],["mat-cell","",1,"actions-cell","text-end",3,"click"],["mat-button","","color","primary",3,"routerLink"],["mat-header-row",""],["mat-row","",3,"routerLink"],[1,"mat-row"],["colspan","7",1,"mat-cell"]],template:function(t,n){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"h1"),m._uU(4,"Ofertas rel\xe1mpago"),m.qZA(),m.TgZ(5,"p"),m._uU(6,"En este apartado se encuentran todas tus ofertas aprobadas"),m.qZA(),m.qZA(),m._UZ(7,"div",3),m.qZA(),m._UZ(8,"mat-divider"),m.TgZ(9,"div",4),m.TgZ(10,"div",5),m.TgZ(11,"label",6),m._uU(12,"\xa0"),m.qZA(),m.TgZ(13,"mat-form-field",7),m.TgZ(14,"mat-icon",8),m._uU(15,"search"),m.qZA(),m.TgZ(16,"input",9),m.NdJ("ngModelChange",function(t){return n.filters._q=t})("keyup",function(){return n.applyFilter()}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(17,"div",5),m.TgZ(18,"label",10),m._uU(19,"Estado"),m.qZA(),m.TgZ(20,"mat-form-field",11),m.TgZ(21,"mat-select",12),m.NdJ("ngModelChange",function(t){return n.filters.status=t})("selectionChange",function(){return n.applyFilter()}),m.TgZ(22,"mat-option",13),m._uU(23,"Todas"),m.qZA(),m.YNc(24,Oe,2,2,"mat-option",14),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m._UZ(25,"mat-divider"),m.TgZ(26,"div",15),m.TgZ(27,"div",16),m.TgZ(28,"mat-checkbox",17),m.NdJ("ngModelChange",function(t){return n.filters.unread=t})("change",function(){return n.applyFilter()}),m._uU(29,"Conversaciones sin leer"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(30,"div",1),m.TgZ(31,"div",18),m.TgZ(32,"table",19),m.ynx(33,20),m.YNc(34,ve,2,3,"th",21),m.YNc(35,be,2,2,"td",22),m.BQk(),m.ynx(36,23),m.YNc(37,Pe,2,0,"th",24),m.YNc(38,Ae,2,1,"td",25),m.BQk(),m.ynx(39,26),m.YNc(40,Te,2,0,"th",27),m.YNc(41,we,4,3,"td",28),m.BQk(),m.ynx(42,29),m.YNc(43,ye,2,0,"th",27),m.YNc(44,Ue,2,1,"td",28),m.BQk(),m.ynx(45,30),m.YNc(46,Ne,2,0,"th",27),m.YNc(47,ke,3,4,"td",28),m.BQk(),m.ynx(48,31),m.YNc(49,Je,2,0,"th",32),m.YNc(50,Qe,3,4,"td",33),m.BQk(),m.ynx(51,34),m.YNc(52,Ie,2,0,"th",32),m.YNc(53,Ye,3,3,"td",35),m.BQk(),m.ynx(54,36),m.YNc(55,Se,1,0,"th",37),m.YNc(56,Xe,11,12,"td",38),m.BQk(),m.ynx(57,39),m.YNc(58,We,1,0,"th",21),m.YNc(59,Ke,4,1,"td",40),m.BQk(),m.YNc(60,to,1,0,"tr",41),m.YNc(61,no,1,1,"tr",42),m.YNc(62,eo,3,0,"tr",43),m.qZA(),m._UZ(63,"mat-paginator",44),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(16),m.Q6J("ngModel",n.filters._q),m.xp6(5),m.Q6J("ngModel",n.filters.status),m.xp6(1),m.Q6J("value",null),m.xp6(2),m.Q6J("ngForOf",n.statuses),m.xp6(4),m.Q6J("ngModel",n.filters.unread),m.xp6(4),m.Q6J("dataSource",n.dataSource),m.xp6(28),m.Q6J("matHeaderRowDef",n.displayedColumns),m.xp6(1),m.Q6J("matRowDefColumns",n.displayedColumns),m.xp6(2),m.Q6J("pageSizeOptions",m.DdM(9,oo)))},directives:[Y.d,pt.KE,b.Hw,pt.qo,ft.Nt,r.Fj,r.JJ,r.On,ht.gD,S.ey,o.sg,Zt.oG,gt.BZ,dt.YE,gt.w1,gt.fO,gt.Dz,gt.as,gt.nj,gt.Ee,mt.NW,gt.ge,gt.ev,dt.nU,a.yS,$t.X,o.RF,E.I,o.ED,o.O5,P.k,v.zs,gt.XQ,gt.Gk,a.rH],pipes:[o.uU,o.H9],styles:[".search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{display:block;width:130px;max-width:100%}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field.search-name[_ngcontent-%COMP%]{width:330px}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field.search-name[_ngcontent-%COMP%]  .mat-form-field-prefix{align-self:center}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field.search-user[_ngcontent-%COMP%]{width:156px}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--app-amarillo-claro)}.actions-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}.actions-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{line-height:40px}table.mat-table[_ngcontent-%COMP%]{margin-top:2em;display:table;width:100%;border-radius:10px;overflow:hidden;filter:drop-shadow(0 5px 5px rgba(64,148,171,.24))}table.mat-table[_ngcontent-%COMP%]     .mat-header-cell{background-color:var(--app-blue-cyan);color:#fff}table.mat-table[_ngcontent-%COMP%]     .mat-row:nth-child(odd){background-color:#fff}table.mat-table[_ngcontent-%COMP%]     .mat-row:not(:nth-child(odd)){background-color:#f6f9fa}table.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{cursor:pointer}table.mat-table[_ngcontent-%COMP%]   .status-cell[_ngcontent-%COMP%]   span.pill[_ngcontent-%COMP%]{width:100px}table.mat-table[_ngcontent-%COMP%]   .price-cell[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600;font-size:10px;line-height:12px;color:#64c97a}table.mat-table[_ngcontent-%COMP%]   .badges-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{line-height:27px;height:27px;width:27px;margin-right:5px}table.mat-table[_ngcontent-%COMP%]   .badges-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     .mat-badge-content{top:2px;right:-4px;font-size:7px;line-height:12px;width:12px;height:12px}table.mat-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{cursor:unset}table.mat-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]   mat-badge-medium.mat-badge-above[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{top:unset;right:unset}"]}),t})();const ro=["scroll"];function io(t,n){if(1&t&&(m.ynx(0),m.TgZ(1,"dt",15),m._uU(2,"Plazo de entrega:"),m.qZA(),m.TgZ(3,"dd",15),m._uU(4),m.ALo(5,"date"),m.qZA(),m._UZ(6,"div",17),m.BQk()),2&t){const t=m.oxw(2);m.xp6(4),m.Oqu(m.xi3(5,1,t.request.deliver_at,"dd/MM/yyyy"))}}function co(t,n){1&t&&m._UZ(0,"mat-icon",29)}function lo(t,n){1&t&&m._UZ(0,"mat-icon",30)}function so(t,n){1&t&&m._UZ(0,"mat-icon",31)}function uo(t,n){1&t&&m._UZ(0,"mat-icon",32)}function go(t,n){if(1&t&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"date"),m.qZA()),2&t){const t=m.oxw(3);m.xp6(1),m.hij("Aceptada el ",m.xi3(2,1,t.request.accepted_at,"dd/MM/yyyy")||"--/--/----","")}}function mo(t,n){if(1&t&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"date"),m.qZA()),2&t){const t=m.oxw(3);m.xp6(1),m.hij("Rechazada el ",m.xi3(2,1,t.request.rejected_at,"dd/MM/yyyy")||"--/--/----","")}}function po(t,n){if(1&t&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"date"),m.qZA()),2&t){const t=m.oxw(3);m.xp6(1),m.hij("Rechazada el ",m.xi3(2,1,t.request.discarded_at,"dd/MM/yyyy")||"--/--/----","")}}function fo(t,n){if(1&t&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"date"),m.qZA()),2&t){const t=m.oxw(3);m.xp6(1),m.hij("Enviada el ",m.xi3(2,1,t.request.created_at,"dd/MM/yyyy")||"--/--/----","")}}const ho=function(){return[5,7]};function _o(t,n){if(1&t&&(m.TgZ(0,"div",33),m.TgZ(1,"div",34),m.TgZ(2,"h5",35),m._uU(3),m.ALo(4,"currency"),m.qZA(),m.TgZ(5,"div",36),m.YNc(6,go,3,4,"span",37),m.YNc(7,mo,3,4,"span",38),m.YNc(8,po,3,4,"span",38),m.YNc(9,fo,3,4,"span",39),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.oxw(2);m.xp6(3),m.Oqu(m.lcZ(4,5,null==t.request.offer?null:t.request.offer.price)||"-"),m.xp6(2),m.Q6J("ngSwitch",null==t.request.status?null:t.request.status.id),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(7,ho)),m.xp6(1),m.Q6J("ngSwitchCase",6),m.xp6(1),m.Q6J("ngSwitchCase",4)}}function Zo(t,n){1&t&&(m.ynx(0),m._UZ(1,"mat-divider"),m.TgZ(2,"div",40),m.TgZ(3,"div",41),m.TgZ(4,"p"),m._uU(5,"El proveedor aun no ha revisado tu solicitud"),m.qZA(),m.qZA(),m.qZA(),m.BQk())}function Co(t,n){if(1&t&&(m.TgZ(0,"mat-chip",46,47),m._uU(2),m.qZA()),2&t){const t=n.$implicit;m.Q6J("value",t.id)("selected",!0)("selectable",!1),m.xp6(2),m.Oqu(t.name)}}function Mo(t,n){if(1&t&&(m.ynx(0),m.TgZ(1,"div",42),m.TgZ(2,"div",48),m.TgZ(3,"p"),m._uU(4),m.qZA(),m.qZA(),m.qZA(),m.BQk()),2&t){const t=m.oxw(3);m.xp6(4),m.Oqu(t.request.discard_details)}}function qo(t,n){if(1&t&&(m.ynx(0),m.TgZ(1,"div",42),m.TgZ(2,"div",43),m.TgZ(3,"mat-chip-list",44),m.YNc(4,Co,3,4,"mat-chip",45),m.qZA(),m.qZA(),m.qZA(),m.YNc(5,Mo,5,1,"ng-container",18),m.BQk()),2&t){const t=m.oxw(2);m.xp6(3),m.Q6J("multiple",!0),m.xp6(1),m.Q6J("ngForOf",t.request.discard_motives),m.xp6(1),m.Q6J("ngIf",t.request.discard_details)}}function xo(t,n){if(1&t&&(m.TgZ(0,"div",41),m.TgZ(1,"h5",51),m._uU(2,"Motivo del rechazo"),m.qZA(),m.TgZ(3,"p",52),m._uU(4),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(4),m.Oqu(t.request.reject_details)}}function Oo(t,n){if(1&t&&(m.ynx(0),m._UZ(1,"mat-divider"),m.TgZ(2,"div",49),m.YNc(3,xo,5,1,"div",50),m.qZA(),m.BQk()),2&t){const t=m.oxw(2);m.xp6(3),m.Q6J("ngIf",t.request.reject_details)}}function vo(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"mat-chip",64,47),m.NdJ("click",function(){m.CHM(t);const n=m.MAs(1);return m.oxw(4).toggleMotive(n)}),m._uU(2),m.qZA()}if(2&t){const t=n.$implicit;m.Q6J("value",t.id),m.xp6(2),m.Oqu(t.name)}}function bo(t,n){if(1&t&&(m.TgZ(0,"div"),m.TgZ(1,"div",42),m.TgZ(2,"div",43),m.TgZ(3,"mat-chip-list",62),m.YNc(4,vo,3,2,"mat-chip",63),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(3),m.Q6J("multiple",!0),m.xp6(1),m.Q6J("ngForOf",t.rating_motives)}}function Po(t,n){1&t&&(m.ynx(0),m.TgZ(1,"div",42),m.TgZ(2,"div",48),m.TgZ(3,"mat-form-field",65),m._UZ(4,"textarea",66),m.qZA(),m.qZA(),m.qZA(),m.BQk())}function Ao(t,n){if(1&t&&(m.TgZ(0,"div",67),m.TgZ(1,"div",15),m.TgZ(2,"button",68),m._uU(3,"Calificar"),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(2),m.Q6J("disabled",t.wait)}}function To(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"mat-card",53),m.TgZ(1,"mat-card-header"),m.TgZ(2,"mat-card-title"),m._UZ(3,"mat-icon",54),m._uU(4," Calificai\xf3n "),m.qZA(),m.qZA(),m.TgZ(5,"mat-card-content",55),m.TgZ(6,"form",56),m.NdJ("ngSubmit",function(){return m.CHM(t),m.oxw(2).setRating()}),m.TgZ(7,"div",57),m.TgZ(8,"div",58),m.TgZ(9,"ngx-stars",59),m.NdJ("ratingOutput",function(n){return m.CHM(t),m.oxw(2).onRatingSet(n)}),m.qZA(),m.qZA(),m.TgZ(10,"div",60),m.TgZ(11,"p"),m._uU(12,"Por favor califica tu experiencia con este proveedor"),m.qZA(),m.qZA(),m.qZA(),m.YNc(13,bo,5,2,"div",18),m.YNc(14,Po,5,0,"ng-container",18),m.YNc(15,Ao,4,1,"div",61),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(2);let n,e,o,a;m.xp6(6),m.Q6J("formGroup",t.ratingForm),m.xp6(3),m.ekj("unrated",!(null!=(n=t.ratingForm.get("rating"))&&n.value)),m.Q6J("color","#DFBF03")("size",3)("maxStars",5)("wholeStars",!0)("customStarIcons",t.matStars),m.xp6(1),m.Q6J("hidden",null==(e=t.ratingForm.get("rating"))?null:e.value),m.xp6(3),m.Q6J("ngIf",null==(o=t.ratingForm.get("rating"))?null:o.valid),m.xp6(1),m.Q6J("ngIf",null==(a=t.ratingForm.get("motives"))||null==a.value?null:a.value.includes(6)),m.xp6(1),m.Q6J("ngIf",t.ratingForm.valid)}}function wo(t,n){if(1&t&&(m.TgZ(0,"mat-chip",46,47),m._uU(2),m.qZA()),2&t){const t=n.$implicit;m.Q6J("value",t.id)("selected",!0)("selectable",!1),m.xp6(2),m.Oqu(t.name)}}function yo(t,n){if(1&t&&(m.ynx(0),m.TgZ(1,"div",42),m.TgZ(2,"div",48),m.TgZ(3,"p"),m._uU(4),m.qZA(),m.qZA(),m.qZA(),m.BQk()),2&t){const t=m.oxw(3);m.xp6(4),m.Oqu(t.request.rating.rating_details)}}function Uo(t,n){if(1&t&&(m.TgZ(0,"mat-card",53),m.TgZ(1,"mat-card-header"),m.TgZ(2,"mat-card-title"),m._UZ(3,"mat-icon",69),m._uU(4," Calificai\xf3n "),m.qZA(),m.qZA(),m.TgZ(5,"mat-card-content",55),m.TgZ(6,"div",57),m.TgZ(7,"div",58),m._UZ(8,"ngx-stars",70),m.qZA(),m.qZA(),m.TgZ(9,"div",42),m.TgZ(10,"div",43),m.TgZ(11,"mat-chip-list",44),m.YNc(12,wo,3,4,"mat-chip",45),m.qZA(),m.qZA(),m.qZA(),m.YNc(13,yo,5,1,"ng-container",18),m.qZA(),m.qZA()),2&t){const t=m.oxw(2);m.xp6(8),m.ekj("unrated",!t.request.rating.rating),m.Q6J("initialStars",t.request.rating.rating)("color","#DFBF03")("size",3)("maxStars",5)("customStarIcons",t.matStars)("readonly",!0),m.xp6(3),m.Q6J("multiple",!0),m.xp6(1),m.Q6J("ngForOf",t.request.rating.motives),m.xp6(1),m.Q6J("ngIf",t.request.rating.rating_details)}}function No(t,n){if(1&t&&(m.TgZ(0,"mat-card",74),m.TgZ(1,"mat-card-title"),m._uU(2),m.qZA(),m.TgZ(3,"mat-card-content"),m.TgZ(4,"div",75),m.TgZ(5,"div",15),m.TgZ(6,"mat-icon"),m._uU(7,"phone"),m.qZA(),m.TgZ(8,"span",76),m._uU(9),m.ALo(10,"phone"),m.qZA(),m.qZA(),m.TgZ(11,"div",15),m.TgZ(12,"mat-icon"),m._uU(13,"mail"),m.qZA(),m.TgZ(14,"span",77),m._uU(15),m.qZA(),m.qZA(),m.TgZ(16,"div",41),m.TgZ(17,"mat-icon"),m._uU(18,"place"),m.qZA(),m.TgZ(19,"p"),m._uU(20),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(2),m.AsE("",null==t.request.offer||null==t.request.offer.author?null:t.request.offer.author.firstname," ",null==t.request.offer||null==t.request.offer.author?null:t.request.offer.author.lastname,""),m.xp6(7),m.Oqu(m.lcZ(10,10,null==t.request.supplier?null:t.request.supplier.phone)),m.xp6(6),m.Oqu(null==t.request.offer||null==t.request.offer.author?null:t.request.offer.author.email),m.xp6(5),m.gL8("",null==t.request.supplier?null:t.request.supplier.address,", col. ",null==t.request.supplier?null:t.request.supplier.neighborhood,", ",null==t.request.supplier?null:t.request.supplier.city,", ",null==t.request.supplier?null:t.request.supplier.state,", ",null==t.request.supplier?null:t.request.supplier.country," C.P. ",null==t.request.supplier?null:t.request.supplier.postal_code,"")}}function ko(t,n){if(1&t&&(m.TgZ(0,"div",71),m._UZ(1,"app-chat-card",72),m.YNc(2,No,21,12,"mat-card",73),m.qZA()),2&t){const t=m.oxw(2);m.xp6(1),m.Q6J("id",t.request.id)("type","offer_request")("room","oferta_"+t.request.id)("titleName",null==t.request.supplier?null:t.request.supplier.name)("titlePicture",null==t.request.supplier?null:t.request.supplier.profile_picture)("titleLink","/empresas/catalogo/proveedores/"+(null==t.request.supplier?null:t.request.supplier.id))("canChat",t.canChat()),m.xp6(1),m.Q6J("ngIf",(null==t.request.offer?null:t.request.offer.author)&&m.DdM(8,ho).includes(null==t.request.status?null:t.request.status.id))}}const Jo=function(){return[1,2,3]},Qo=function(){return[4,6]},Io=function(){return[3,5,6,7]};function Yo(t,n){if(1&t&&(m.TgZ(0,"div",8),m.TgZ(1,"div",9),m.TgZ(2,"mat-card",10),m.TgZ(3,"mat-card-header"),m.TgZ(4,"mat-card-title"),m._UZ(5,"app-profile-picture-avatar",11),m._uU(6),m.qZA(),m.TgZ(7,"span",12),m._uU(8),m.qZA(),m.TgZ(9,"div"),m.TgZ(10,"span"),m._uU(11),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(12,"mat-card",13),m.TgZ(13,"mat-card-content"),m.TgZ(14,"dl",14),m.TgZ(15,"dt",15),m._uU(16,"Nombre de la oferta:"),m.qZA(),m.TgZ(17,"dd",16),m._uU(18),m.qZA(),m._UZ(19,"div",17),m.TgZ(20,"dt",15),m._uU(21,"Fecha de la solicitud:"),m.qZA(),m.TgZ(22,"dd",15),m._uU(23),m.ALo(24,"date"),m.qZA(),m._UZ(25,"div",17),m.TgZ(26,"dt",15),m._uU(27,"Usuario de la solicitud:"),m.qZA(),m.TgZ(28,"dd",15),m._uU(29),m.qZA(),m._UZ(30,"div",17),m.YNc(31,io,7,4,"ng-container",18),m.qZA(),m._UZ(32,"mat-divider"),m.TgZ(33,"div",19),m.TgZ(34,"h2"),m._uU(35,"Detalles"),m.qZA(),m.TgZ(36,"p"),m._uU(37),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(38,"mat-card",20),m.TgZ(39,"mat-card-header"),m.TgZ(40,"mat-card-title",21),m.YNc(41,co,1,0,"mat-icon",22),m.YNc(42,lo,1,0,"mat-icon",23),m.YNc(43,so,1,0,"mat-icon",24),m.YNc(44,uo,1,0,"mat-icon",25),m._uU(45," Precio "),m.qZA(),m.qZA(),m.TgZ(46,"mat-card-content"),m.YNc(47,_o,10,8,"div",26),m.YNc(48,Zo,6,0,"ng-container",18),m.YNc(49,qo,6,3,"ng-container",18),m.YNc(50,Oo,4,1,"ng-container",18),m.qZA(),m.qZA(),m.YNc(51,To,16,12,"mat-card",27),m.YNc(52,Uo,14,11,"mat-card",27),m.qZA(),m.YNc(53,ko,3,9,"div",28),m.qZA()),2&t){const t=m.oxw();m.xp6(5),m.Q6J("profile_picture",null==t.request.company?null:t.request.company.profile_picture),m.xp6(1),m.hij(" ",null==t.request.company?null:t.request.company.name," "),m.xp6(2),m.hij("ID: ",t.request.id,""),m.xp6(2),m.Gre("pill pill-lg pill-",null==t.request.status?null:t.request.status.class," mx-auto"),m.xp6(1),m.Oqu(null==t.request.status?null:t.request.status.name),m.xp6(7),m.Oqu(null==t.request.offer?null:t.request.offer.name),m.xp6(5),m.Oqu(m.xi3(24,23,t.request.created_at,"dd/MM/yyyy")),m.xp6(6),m.Oqu((null==t.request.user?null:t.request.user.firstname)+" "+(null==t.request.user?null:t.request.user.lastname)),m.xp6(2),m.Q6J("ngIf",t.request.deliver_at),m.xp6(6),m.Oqu(t.request.details),m.xp6(3),m.Q6J("ngSwitch",null==t.request.status?null:t.request.status.id),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(26,Jo)),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(27,ho)),m.xp6(1),m.Q6J("jrSwitchCases",m.DdM(28,Qo)),m.xp6(4),m.Q6J("ngIf",t.request.offer),m.xp6(1),m.Q6J("ngIf",2==(null==t.request.status?null:t.request.status.id)),m.xp6(1),m.Q6J("ngIf",4==(null==t.request.status?null:t.request.status.id)),m.xp6(1),m.Q6J("ngIf",6==(null==t.request.status?null:t.request.status.id)),m.xp6(1),m.Q6J("ngIf",5==(null==t.request.status?null:t.request.status.id)),m.xp6(1),m.Q6J("ngIf",7==(null==t.request.status?null:t.request.status.id)&&t.request.rating),m.xp6(1),m.Q6J("ngIf",m.DdM(29,Io).includes(null==t.request.status?null:t.request.status.id))}}let So=(()=>{class t{constructor(t,n,e,o,a,r,i){this.http=t,this.router=n,this.route=e,this.dialog=o,this.alert=a,this.authenticationService=r,this.formBuilder=i,this.users=[],this.rating_motives=[],this.discard_motives=[],this.minDate=new Date,this.wait=!1,this.matStars={empty:`${x.N.basehref}assets/images/star_outline.svg`,half:`${x.N.basehref}assets/images/star_half.svg`,full:`${x.N.basehref}assets/images/star.svg`},this.currentUser=r.currentUserValue,this.route.paramMap.subscribe(t=>{this.id=t.get("id"),this.ngOnInit()}),this.loadUsers(),this.loadDiscardMotives(),this.loadRatingMotives()}ngOnInit(){this.deliveryForm=this.formBuilder.group({deliver_at:[null,[r.kI.required]]}),this.ratingForm=this.formBuilder.group({rating:[null,[r.kI.required]],motives:[null,[r.kI.required]],rating_details:[null,[]]}),this.loadRequest()}loadRequest(){this.http.get(`${x.N.apiUrl}/offer-requests/${this.id}`).subscribe(t=>{this.request=t},t=>{})}loadUsers(){const t=(new i.LE).set("id_ne",this.currentUser.id);this.http.get(`${x.N.apiUrl}/users`,{params:t}).subscribe(t=>{this.users=t.map(t=>({id:t.id,name:t.username}))},t=>{})}loadDiscardMotives(){const t=new i.LE;this.http.get(`${x.N.apiUrl}/discard-motives`,{params:t}).subscribe(t=>{this.discard_motives=t},t=>{})}loadRatingMotives(){const t=new i.LE;this.http.get(`${x.N.apiUrl}/rating-motives`,{params:t}).subscribe(t=>{this.rating_motives=t},t=>{})}share(){this.alert.open({title:"\xbfQuieres compartir esta cotizaci\xf3n?",text:"Puedes compartir esta cotizaci\xf3n con alguien de tu equipo, sin embargo una vez la asignes ya no podr\xe1s contestar los mensajes del chat.",input:"select",inputLabel:"Usuario",inputPlaceholder:"Nombre del usuario",inputOptions:this.users,inputRequired:!0}).then(t=>{if(t){let{isConfirmed:n,value:e}=t;n&&e&&this.http.post(`${x.N.apiUrl}/offer-requests/share/${this.id}`,{user:e}).subscribe(t=>{console.log(t),this.router.navigateByUrl("/empresas/ofertas-relampago")},t=>{})}})}openReport(){this.dialog.open(Jn,{width:"677px",panelClass:["dialog-py-48","dialog-px-75"],data:{}}).afterClosed().subscribe(t=>{console.log("The dialog was closed")})}setDelivery(){if(this.deliveryForm.invalid)return console.log("form invalid"),void this.deliveryForm.markAllAsTouched();this.alert.open({title:"\xbfEst\xe1s seguro de establecer este plazo?",text:"No podr\xe1s calificar a este proveedor hasta la fecha establecida de entrega, por favor solo acepta si est\xe1s seguro."}).then(t=>{if(t){let t=this.deliveryForm.getRawValue();this.wait=!0,this.http.put(`${x.N.apiUrl}/offer-requests/set-delivery/${this.id}`,t).subscribe(t=>{console.log(t),this.wait=!1,this.request=t},t=>{this.wait=!1})}})}setRating(){if(this.ratingForm.invalid)return console.log("form invalid"),void this.ratingForm.markAllAsTouched();this.alert.open({title:"\xbfEst\xe1s seguro de tu calificaci\xf3n?",text:"Una vez calificada tu experiencia la cotizaci\xf3n se marcar\xe1 como finalizada y ya no podr\xe1s enviarle mensajes a tu proveedor ni modificar su puntuaci\xf3n."}).then(t=>{if(t){let t=this.ratingForm.getRawValue();this.wait=!0,this.http.put(`${x.N.apiUrl}/offer-requests/set-rating/${this.id}`,t).subscribe(t=>{console.log(t),this.wait=!1,this.request=t},t=>{this.wait=!1})}})}canRate(){return!!this.request.deliver_at&&Z().isSameOrAfter(Z(this.request.deliver_at),"day")}onRatingSet(t){var n;null===(n=this.ratingForm.get("rating"))||void 0===n||n.setValue(t)}toggleMotive(t){t.toggleSelected(!0)}canChat(){var t,n;return this.currentUser.id==(null===(t=this.request.user)||void 0===t?void 0:t.id)&&[3,5].includes(null===(n=this.request.status)||void 0===n?void 0:n.id)}publicUrl(t){return`${x.N.apiUrl}${t}`}assetUrl(t){return`${x.N.basehref}${t}`}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(a.F0),m.Y36(a.gz),m.Y36(wn.uw),m.Y36(C.c9),m.Y36(C.$h),m.Y36(r.qu))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-oferta-relmpago-detalles"]],viewQuery:function(t,n){if(1&t&&m.Gf(ro,5),2&t){let t;m.iGM(t=m.CRH())&&(n.myScrollContainer=t.first)}},decls:17,vars:1,consts:[[1,"container","pt-5","px-md-5"],[1,"row"],[1,"col","page-title"],["routerLink","..",1,"btn-return"],[1,"col","page-actions"],["mat-button","","color","accent",1,"btn-round","btn-sm","btn-share","me-3",3,"click"],["mat-button","","color","warn",1,"btn-round","btn-sm","btn-report",3,"click"],["class","row pt-3 gy-5",4,"ngIf"],[1,"row","pt-3","gy-5"],[1,"col-lg-7"],[1,"card-empresa"],[3,"profile_picture"],[1,"empresa-id"],[1,"card-info","mt-3"],[1,"row","list-info"],[1,"col-auto"],[1,"col-auto","serv-name"],[1,"w-100"],[4,"ngIf"],[1,"details","pt-4"],[1,"card-offer","mt-5"],[3,"ngSwitch"],["svgIcon","cotizacion-pending",4,"jrSwitchCases"],["svgIcon","cotizacion-active",4,"jrSwitchCases"],["svgIcon","cotizacion-reject",4,"jrSwitchCases"],["svgIcon","cotizacion",4,"ngSwitchDefault"],["class","row gx-5 justify-content-center align-items-center row-info",4,"ngIf"],["class","card-rating mt-5",4,"ngIf"],["class","col-lg-5",4,"ngIf"],["svgIcon","cotizacion-pending"],["svgIcon","cotizacion-active"],["svgIcon","cotizacion-reject"],["svgIcon","cotizacion"],[1,"row","gx-5","justify-content-center","align-items-center","row-info"],[1,"col-auto","my-3"],[1,"price"],[1,"date",3,"ngSwitch"],[4,"jrSwitchCases"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"row","gx-5","pt-3","justify-content-center","align-items-center","row-controls"],[1,"col-12"],[1,"row","justify-content-center","pt-3"],[1,"col-sm-10"],[3,"multiple"],[3,"value","selected","selectable",4,"ngFor","ngForOf"],[3,"value","selected","selectable"],["c","matChip"],[1,"col-sm-11"],[1,"row","gx-4","justify-content-center","align-items-center","row-reject-info"],["class","col-12 ",4,"ngIf"],[1,"mt-4"],[1,"text-right"],[1,"card-rating","mt-5"],["svgIcon","star"],[1,"pb-4"],[1,"rating-form",3,"formGroup","ngSubmit"],[1,"row","pt-4","justify-content-center","align-items-center","row-controls"],[1,"form-group","col-auto"],[3,"color","size","maxStars","wholeStars","customStarIcons","ratingOutput"],[1,"col-10",3,"hidden"],["class","row mt-4 justify-content-center align-items-center row-controls",4,"ngIf"],["selectable","","formControlName","motives",3,"multiple"],[3,"value","click",4,"ngFor","ngForOf"],[3,"value","click"],["appearance","outline",1,"w-100"],["matInput","","id","details","rows","6","formControlName","rating_details","placeholder",""],[1,"row","mt-4","justify-content-center","align-items-center","row-controls"],["type","submit","mat-flat-button","","color","accent",1,"btn-round",3,"disabled"],["svgIcon","star-active"],[3,"initialStars","color","size","maxStars","customStarIcons","readonly"],[1,"col-lg-5"],[3,"id","type","room","titleName","titlePicture","titleLink","canChat"],["class","card-in-chargue mt-3",4,"ngIf"],[1,"card-in-chargue","mt-3"],[1,"row","g-3"],[1,"phone"],[1,"email"]],template:function(t,n){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"a",3),m.TgZ(4,"mat-icon"),m._uU(5,"arrow_back_ios"),m.qZA(),m._uU(6," Ofertas rel\xe1mpago "),m.qZA(),m.qZA(),m.TgZ(7,"div",4),m.TgZ(8,"button",5),m.NdJ("click",function(){return n.share()}),m.TgZ(9,"mat-icon"),m._uU(10,"share"),m.qZA(),m._uU(11," Compartir Oferta "),m.qZA(),m.TgZ(12,"button",6),m.NdJ("click",function(){return n.openReport()}),m.TgZ(13,"mat-icon"),m._uU(14,"error"),m.qZA(),m._uU(15," Reportar un problema "),m.qZA(),m.qZA(),m.qZA(),m.YNc(16,Yo,54,30,"div",7),m.qZA()),2&t&&(m.xp6(16),m.Q6J("ngIf",n.request))},directives:[a.yS,b.Hw,v.lW,o.O5,O.a8,O.dk,O.n5,$t.X,O.dn,Y.d,o.RF,E.I,o.ED,o.n9,Qn.qn,o.sg,Qn.HS,r._Y,r.JL,r.sg,c.ve,r.JJ,r.u,pt.KE,ft.Nt,r.Fj,Yn.a],pipes:[o.uU,o.H9,Sn.E],styles:["mat-card[_ngcontent-%COMP%]{background:#fff;box-shadow:0 5px 5px #4094ab3d!important;border-radius:10px}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:15px;display:flex;align-items:center;color:#062ebd}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:1em}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]     .mat-card-header-text{margin:0}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{position:relative}mat-card.card-empresa[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{align-items:center;justify-content:space-between}mat-card.card-empresa[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:14px;display:flex;align-items:center;color:#062ebd;margin-bottom:0}mat-card.card-empresa[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]     img{margin-right:15px;background:#fbfbfb;border:1px solid #97bcc566;box-sizing:border-box}mat-card.card-empresa[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .empresa-id[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:500;font-size:11px;line-height:13px;color:#5a6a6f}mat-card.card-info[_ngcontent-%COMP%]   dl.list-info[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{color:var(--app-text-gris-oscuro)}mat-card.card-info[_ngcontent-%COMP%]   dl.list-info[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%], mat-card.card-info[_ngcontent-%COMP%]   dl.list-info[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:15px}mat-card.card-info[_ngcontent-%COMP%]   dl.list-info[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{color:var(--app-text-cyan)}mat-card.card-info[_ngcontent-%COMP%]   dl.list-info[_ngcontent-%COMP%]   dd.serv-name[_ngcontent-%COMP%]{color:var(--app-azul-marino)}mat-card.card-info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;color:#062ebd}mat-card.card-info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], mat-card.card-info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-size:12px;line-height:15px}mat-card.card-info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;color:#5a6a6f}mat-card.card-offer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:11px;line-height:13px}mat-card.card-offer[_ngcontent-%COMP%]   .row-info[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%], mat-card.card-offer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;text-align:center;color:#5a6a6f}mat-card.card-offer[_ngcontent-%COMP%]   .row-info[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700;font-size:14px;line-height:17px}mat-card.card-offer[_ngcontent-%COMP%]   .row-info[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:500;font-size:11px;line-height:13px;color:#5a6a6f}mat-card.card-offer[_ngcontent-%COMP%]   .row-info[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]{width:160px}mat-card.card-offer[_ngcontent-%COMP%]   .row-reject-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:15px;display:flex;align-items:center;color:#062ebd}mat-card.card-offer[_ngcontent-%COMP%]   .row-reject-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:left}mat-card.card-offer[_ngcontent-%COMP%]   .plazo-form[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%], mat-card.card-offer[_ngcontent-%COMP%]   .row-reject-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:500;font-size:12px;line-height:15px;color:#5a6a6f}mat-card.card-offer[_ngcontent-%COMP%]   .plazo-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}mat-card.card-rating[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;font-weight:400;font-size:12px;line-height:14px;text-align:center;color:#5a6a6f}mat-card.card-in-chargue[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:13px;line-height:16px;color:var(--app-gris-muy-oscuro)}mat-card.card-in-chargue[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center}mat-card.card-in-chargue[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:5px;color:var(--app-amarillo-claro)}mat-card.card-in-chargue[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:13px;line-height:16px;color:var(--app-text-cyan)}mat-card.card-in-chargue[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%] > div.row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:Montserrat;font-style:normal;font-weight:500;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}mat-chip-list[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:9px;line-height:11px;display:flex;justify-content:center;align-items:center;text-align:center;color:#5a6a6f;min-width:calc(33.3% - 8px);height:37px;background:#f7f7f7;border:1px solid #c4c4c4;box-sizing:border-box;border-radius:50px}mat-chip-list[_ngcontent-%COMP%]   mat-chip.mat-chip.mat-standard-chip.mat-chip-selected.mat-primary[_ngcontent-%COMP%]{background:#fed00114;border:1px solid #fed001;color:#5a6a6f}"]}),t})();var zo=e(9337),Fo=e(4311);function Do(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese nombre de usuario."),m.qZA())}function $o(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Nombre de usuario invalido."),m.qZA())}function Bo(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Nombre de usuario no disponible."),m.qZA())}function Eo(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Error de conexion al servidor."),m.qZA())}function Lo(t,n){if(1&t&&(m.TgZ(0,"mat-option",31),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.Q6J("value",t.id),m.xp6(1),m.Oqu(t.name)}}function jo(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese nombre de usuario."),m.qZA())}function Ho(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese apellido de usuario."),m.qZA())}function Go(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese direccion de correo electronico."),m.qZA())}function Ro(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese direccion de correo electronico valida."),m.qZA())}function Vo(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Direccion de correo electronico no disponible."),m.qZA())}function Xo(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Confirmar direccion de correo electronico."),m.qZA())}function Wo(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese direccion de correo electronico valida."),m.qZA())}function Ko(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Direcciones de correo electronico no coinciden."),m.qZA())}function ta(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese contrase\xf1a."),m.qZA())}function na(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Contrase\xf1a muy corta, ingrese al menos 6 caracteres."),m.qZA())}function ea(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Confirmar contrase\xf1a."),m.qZA())}function oa(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Las contrase\xf1as no coinciden."),m.qZA())}let aa=(()=>{class t{constructor(t,n,e,o,a,i){this.http=t,this.formBuilder=n,this.dialogRef=e,this.uniqueUsername=o,this.uniqueEmail=a,this.user=i,this.areas=[],this.wait=!1,this.userForm=this.formBuilder.group({area:[null],firstname:[null,[r.kI.required]],lastname:[null,[r.kI.required]],username:[null,[r.kI.required,r.kI.pattern("[A-Za-z0-9-_.]{6,20}")],o.validate],email:[null,[r.kI.required,r.kI.email,r.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")],a.validate],re_email:[null,[r.kI.required,r.kI.email]],password:[null,[r.kI.required,r.kI.minLength(6)]],re_password:[null,[r.kI.required]],tos:[!1,[r.kI.requiredTrue]]},{validators:[(0,zo.Yf)("email","re_email"),(0,zo.Yf)("password","re_password")]})}ngOnInit(){this.loadCategories()}loadCategories(){this.http.get(`${x.N.apiUrl}/categories`).subscribe(t=>{this.areas=t},t=>{})}onSubmit(){if(this.userForm.invalid)return console.log("form invalid"),void this.userForm.markAllAsTouched();console.log("submit..."),this.wait=!0;let t=this.userForm.getRawValue();this.http.post(`${x.N.apiUrl}/users`,t).subscribe(t=>{this.wait=!1,this.dialogRef.close(t)},t=>{this.wait=!1,console.log(t)})}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(r.qu),m.Y36(wn.so),m.Y36(zo.CM),m.Y36(zo.qz),m.Y36(wn.WI))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-usuario-add-form"]],decls:94,vars:19,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"user-form",3,"formGroup","ngSubmit"],[1,"row"],[1,"form-group","col-md-6"],["for","username",1,"form-label"],[1,"input-req"],["aria-hidden","false","matTooltip","Entre 6 y 20 caracteres (letras a-z, numeros 0-9 y caracteres -_ )","matTooltipPosition","above",1,"input-info"],["appearance","outline"],["matInput","","type","text","id","username","formControlName","username","placeholder","Usuario"],[4,"ngIf"],["for","area",1,"form-label"],["id","area","formControlName","area","placeholder","Categor\xeda principal","disableOptionCentering",""],[3,"value",4,"ngFor","ngForOf"],["for","firstname",1,"form-label"],["matInput","","id","firstname","formControlName","firstname","placeholder","Nombre"],["for","lastname",1,"form-label"],["matInput","","id","lastname","formControlName","lastname","placeholder","Apellido"],["for","email",1,"form-label"],["matInput","","type","email","id","email","formControlName","email","placeholder","Corrreo@correo.mx "],["for","re_email",1,"form-label"],["matInput","","type","email","id","re_email","formControlName","re_email","placeholder","Corrreo@correo.mx  "],["for","password",1,"form-label"],["matInput","","type","password","id","password","formControlName","password","placeholder","************"],["for","re_password",1,"form-label"],["matInput","","type","password","id","re_password","formControlName","re_password","placeholder","************"],[1,"checks-seccion","text-center","pt-3"],["formControlName","tos"],[1,"row","justify-content-center","buttons-row","py-3"],[1,"col-auto"],["mat-raised-button","","type","submit","color","accent",1,"btn-round",3,"disabled"],[3,"value"]],template:function(t,n){if(1&t&&(m.TgZ(0,"h2",0),m._uU(1,"Agregar Usario"),m.qZA(),m.TgZ(2,"mat-dialog-content",1),m.TgZ(3,"form",2),m.NdJ("ngSubmit",function(){return n.onSubmit()}),m.TgZ(4,"div",3),m.TgZ(5,"div",4),m.TgZ(6,"label",5),m._uU(7," Nombre de Usuario"),m.TgZ(8,"span",6),m._uU(9,"*"),m.qZA(),m.TgZ(10,"mat-icon",7),m._uU(11,"info"),m.qZA(),m.qZA(),m.TgZ(12,"mat-form-field",8),m._UZ(13,"input",9),m.YNc(14,Do,2,0,"mat-error",10),m.YNc(15,$o,2,0,"mat-error",10),m.YNc(16,Bo,2,0,"mat-error",10),m.YNc(17,Eo,2,0,"mat-error",10),m.qZA(),m.qZA(),m.TgZ(18,"div",4),m.TgZ(19,"label",11),m._uU(20,"\xc1rea"),m.TgZ(21,"span",6),m._uU(22,"*"),m.qZA(),m.qZA(),m.TgZ(23,"mat-form-field",8),m.TgZ(24,"mat-select",12),m.YNc(25,Lo,2,2,"mat-option",13),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(26,"div",3),m.TgZ(27,"div",4),m.TgZ(28,"label",14),m._uU(29,"Nombre"),m.TgZ(30,"span",6),m._uU(31,"*"),m.qZA(),m.qZA(),m.TgZ(32,"mat-form-field",8),m._UZ(33,"input",15),m.YNc(34,jo,2,0,"mat-error",10),m.qZA(),m.qZA(),m.TgZ(35,"div",4),m.TgZ(36,"label",16),m._uU(37,"Apellido"),m.TgZ(38,"span",6),m._uU(39,"*"),m.qZA(),m.qZA(),m.TgZ(40,"mat-form-field",8),m._UZ(41,"input",17),m.YNc(42,Ho,2,0,"mat-error",10),m.qZA(),m.qZA(),m.qZA(),m.TgZ(43,"div",3),m.TgZ(44,"div",4),m.TgZ(45,"label",18),m._uU(46,"Correo electr\xf3nico"),m.TgZ(47,"span",6),m._uU(48,"*"),m.qZA(),m.qZA(),m.TgZ(49,"mat-form-field",8),m._UZ(50,"input",19),m.YNc(51,Go,2,0,"mat-error",10),m.YNc(52,Ro,2,0,"mat-error",10),m.YNc(53,Vo,2,0,"mat-error",10),m.qZA(),m.qZA(),m.TgZ(54,"div",4),m.TgZ(55,"label",20),m._uU(56,"Confirmar Correo electr\xf3nico"),m.TgZ(57,"span",6),m._uU(58,"*"),m.qZA(),m.qZA(),m.TgZ(59,"mat-form-field",8),m._UZ(60,"input",21),m.YNc(61,Xo,2,0,"mat-error",10),m.YNc(62,Wo,2,0,"mat-error",10),m.YNc(63,Ko,2,0,"mat-error",10),m.qZA(),m.qZA(),m.qZA(),m.TgZ(64,"div",3),m.TgZ(65,"div",4),m.TgZ(66,"label",22),m._uU(67,"Contrase\xf1a"),m.TgZ(68,"span",6),m._uU(69,"*"),m.qZA(),m.qZA(),m.TgZ(70,"mat-form-field",8),m._UZ(71,"input",23),m.YNc(72,ta,2,0,"mat-error",10),m.YNc(73,na,2,0,"mat-error",10),m.qZA(),m.qZA(),m.TgZ(74,"div",4),m.TgZ(75,"label",24),m._uU(76,"Confirmar Contrase\xf1a"),m.TgZ(77,"span",6),m._uU(78,"*"),m.qZA(),m.qZA(),m.TgZ(79,"mat-form-field",8),m._UZ(80,"input",25),m.YNc(81,ea,2,0,"mat-error",10),m.YNc(82,oa,2,0,"mat-error",10),m.qZA(),m.qZA(),m.qZA(),m._UZ(83,"mat-divider"),m.TgZ(84,"div",26),m.TgZ(85,"p"),m.TgZ(86,"mat-checkbox",27),m._uU(87,"Entiendo que este usuario podra solicitar cotizaciones y ofertas a nombre de mi empresa."),m.qZA(),m.qZA(),m.qZA(),m.TgZ(88,"div",28),m.TgZ(89,"div",29),m.TgZ(90,"button",30),m.TgZ(91,"mat-icon"),m._uU(92,"person_add"),m.qZA(),m._uU(93," Agregar Usuario "),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t){let t,e,o,a,r,i,c,l,s,u,g,d,p,f,h,_;m.xp6(3),m.Q6J("formGroup",n.userForm),m.xp6(11),m.Q6J("ngIf",null==(t=n.userForm.get("username"))?null:t.hasError("required")),m.xp6(1),m.Q6J("ngIf",null==(e=n.userForm.get("username"))?null:e.hasError("pattern")),m.xp6(1),m.Q6J("ngIf",null==(o=n.userForm.get("username"))?null:o.hasError("unique")),m.xp6(1),m.Q6J("ngIf",null==(a=n.userForm.get("username"))?null:a.hasError("connection")),m.xp6(8),m.Q6J("ngForOf",n.areas),m.xp6(9),m.Q6J("ngIf",null==(r=n.userForm.get("firstname"))?null:r.hasError("required")),m.xp6(8),m.Q6J("ngIf",null==(i=n.userForm.get("lastname"))?null:i.hasError("lastname")),m.xp6(9),m.Q6J("ngIf",null==(c=n.userForm.get("email"))?null:c.hasError("required")),m.xp6(1),m.Q6J("ngIf",(null==(l=n.userForm.get("email"))?null:l.hasError("email"))||(null==(l=n.userForm.get("email"))?null:l.hasError("pattern"))),m.xp6(1),m.Q6J("ngIf",null==(s=n.userForm.get("email"))?null:s.hasError("unique")),m.xp6(8),m.Q6J("ngIf",null==(u=n.userForm.get("re_email"))?null:u.hasError("required")),m.xp6(1),m.Q6J("ngIf",null==(g=n.userForm.get("re_email"))?null:g.hasError("email")),m.xp6(1),m.Q6J("ngIf",null==(d=n.userForm.get("re_email"))?null:d.hasError("mustMatch")),m.xp6(9),m.Q6J("ngIf",null==(p=n.userForm.get("password"))?null:p.hasError("required")),m.xp6(1),m.Q6J("ngIf",null==(f=n.userForm.get("password"))?null:f.hasError("minlength")),m.xp6(8),m.Q6J("ngIf",null==(h=n.userForm.get("re_password"))?null:h.hasError("required")),m.xp6(1),m.Q6J("ngIf",null==(_=n.userForm.get("re_password"))?null:_.hasError("mustMatch")),m.xp6(8),m.Q6J("disabled",n.wait)}},directives:[wn.uh,wn.xY,r._Y,r.JL,r.sg,b.Hw,Fo.gM,pt.KE,ft.Nt,r.Fj,r.JJ,r.u,o.O5,ht.gD,o.sg,Y.d,Zt.oG,v.lW,pt.TO,S.ey],styles:[".mat-dialog-title[_ngcontent-%COMP%]{color:var(--app-text-primary)}.user-form[_ngcontent-%COMP%]{margin-top:1em}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:not(.text-center)   label[_ngcontent-%COMP%]{margin-left:.5em;margin-right:-1.6em}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span.input-req[_ngcontent-%COMP%]{margin-left:.3em;color:var(--app-rojo)}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   mat-icon.input-info[_ngcontent-%COMP%]{margin-left:.3em;width:auto;height:auto;font-size:15px;line-height:1em;vertical-align:middle;color:var(--app-cyan)}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.user-form[_ngcontent-%COMP%]   .checks-seccion[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;font-weight:400;font-size:12px;line-height:14px;color:var(--app-gris-muy-oscuro)}.user-form[_ngcontent-%COMP%]   .checks-seccion[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--app-cyan)}"]}),t})();function ra(t,n){if(1&t&&(m.TgZ(0,"mat-option",24),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.Q6J("value",t.id),m.xp6(1),m.Oqu(t.name)}}function ia(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese nombre de usuario."),m.qZA())}function ca(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese apellido de usuario."),m.qZA())}function la(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese direccion de correo electronico."),m.qZA())}function sa(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese direccion de correo electronico valida."),m.qZA())}function ua(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Direccion de correo electronico no disponible."),m.qZA())}function ga(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese contrase\xf1a."),m.qZA())}function da(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Contrase\xf1a muy corta, ingrese al menos 6 caracteres."),m.qZA())}let ma=(()=>{class t{constructor(t,n,e,o,a,i){var c;this.http=t,this.formBuilder=n,this.dialogRef=e,this.uniqueUsername=o,this.uniqueEmail=a,this.user=i,this.areas=[],this.wait=!1,this.userForm=this.formBuilder.group({area:[null===(c=i.area)||void 0===c?void 0:c.id],firstname:[i.firstname,[r.kI.required]],lastname:[i.lastname,[r.kI.required]],email:[i.email,[r.kI.required,r.kI.email,r.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")],[t=>a.validate(t,i.id)]],password:[null,[r.kI.minLength(6)]]},{})}ngOnInit(){this.loadCategories()}loadCategories(){this.http.get(`${x.N.apiUrl}/categories`).subscribe(t=>{this.areas=t},t=>{})}onSubmit(){if(this.userForm.invalid)return console.log("form invalid"),void this.userForm.markAllAsTouched();console.log("submit..."),this.wait=!0;let t=this.userForm.getRawValue();t.password||delete t.password,this.http.put(`${x.N.apiUrl}/users/${this.user.id}`,t).subscribe(t=>{this.wait=!1,this.dialogRef.close(t)},t=>{this.wait=!1,console.log(t)})}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(r.qu),m.Y36(wn.so),m.Y36(zo.CM),m.Y36(zo.qz),m.Y36(wn.WI))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-usuario-edit-form"]],decls:60,vars:10,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"user-form",3,"formGroup","ngSubmit"],[1,"row"],[1,"form-group","col-md-6"],["for","area",1,"form-label"],[1,"input-req"],["appearance","outline"],["id","area","formControlName","area","placeholder","Categor\xeda principal","disableOptionCentering",""],[3,"value",4,"ngFor","ngForOf"],["for","firstname",1,"form-label"],["matInput","","id","firstname","formControlName","firstname","placeholder","Nombre"],[4,"ngIf"],["for","lastname",1,"form-label"],["matInput","","id","lastname","formControlName","lastname","placeholder","Apellido"],["for","email",1,"form-label"],["matInput","","type","email","id","email","formControlName","email","placeholder","Corrreo@correo.mx "],[1,"row","pt-3"],["for","password",1,"form-label"],["matInput","","type","password","id","password","formControlName","password","placeholder","************"],[1,"row","justify-content-center","buttons-row","py-3"],[1,"col-auto"],["mat-flat-button","","type","submit","color","accent",1,"btn-round",3,"disabled"],["mat-flat-button","","color","primary","mat-dialog-close","",1,"btn-round"],[3,"value"]],template:function(t,n){if(1&t&&(m.TgZ(0,"h2",0),m._uU(1,"Editar Usuario"),m.qZA(),m.TgZ(2,"mat-dialog-content",1),m.TgZ(3,"form",2),m.NdJ("ngSubmit",function(){return n.onSubmit()}),m.TgZ(4,"div",3),m.TgZ(5,"div",4),m.TgZ(6,"label",5),m._uU(7,"\xc1rea"),m.TgZ(8,"span",6),m._uU(9,"*"),m.qZA(),m.qZA(),m.TgZ(10,"mat-form-field",7),m.TgZ(11,"mat-select",8),m.YNc(12,ra,2,2,"mat-option",9),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(13,"div",3),m.TgZ(14,"div",4),m.TgZ(15,"label",10),m._uU(16,"Nombre"),m.TgZ(17,"span",6),m._uU(18,"*"),m.qZA(),m.qZA(),m.TgZ(19,"mat-form-field",7),m._UZ(20,"input",11),m.YNc(21,ia,2,0,"mat-error",12),m.qZA(),m.qZA(),m.TgZ(22,"div",4),m.TgZ(23,"label",13),m._uU(24,"Apellido"),m.TgZ(25,"span",6),m._uU(26,"*"),m.qZA(),m.qZA(),m.TgZ(27,"mat-form-field",7),m._UZ(28,"input",14),m.YNc(29,ca,2,0,"mat-error",12),m.qZA(),m.qZA(),m.qZA(),m.TgZ(30,"div",3),m.TgZ(31,"div",4),m.TgZ(32,"label",15),m._uU(33,"Correo electr\xf3nico"),m.TgZ(34,"span",6),m._uU(35,"*"),m.qZA(),m.qZA(),m.TgZ(36,"mat-form-field",7),m._UZ(37,"input",16),m.YNc(38,la,2,0,"mat-error",12),m.YNc(39,sa,2,0,"mat-error",12),m.YNc(40,ua,2,0,"mat-error",12),m.qZA(),m.qZA(),m.qZA(),m._UZ(41,"mat-divider"),m.TgZ(42,"div",17),m.TgZ(43,"div",4),m.TgZ(44,"label",18),m._uU(45,"Contrase\xf1a"),m.TgZ(46,"span",6),m._uU(47,"*"),m.qZA(),m.qZA(),m.TgZ(48,"mat-form-field",7),m._UZ(49,"input",19),m.YNc(50,ga,2,0,"mat-error",12),m.YNc(51,da,2,0,"mat-error",12),m.qZA(),m.qZA(),m.qZA(),m._UZ(52,"mat-divider"),m.TgZ(53,"div",20),m.TgZ(54,"div",21),m.TgZ(55,"button",22),m._uU(56,"Guardar"),m.qZA(),m.qZA(),m.TgZ(57,"div",21),m.TgZ(58,"button",23),m._uU(59,"Cancelar"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t){let t,e,o,a,r,i,c;m.xp6(3),m.Q6J("formGroup",n.userForm),m.xp6(9),m.Q6J("ngForOf",n.areas),m.xp6(9),m.Q6J("ngIf",null==(t=n.userForm.get("firstname"))?null:t.hasError("required")),m.xp6(8),m.Q6J("ngIf",null==(e=n.userForm.get("lastname"))?null:e.hasError("lastname")),m.xp6(9),m.Q6J("ngIf",null==(o=n.userForm.get("email"))?null:o.hasError("required")),m.xp6(1),m.Q6J("ngIf",(null==(a=n.userForm.get("email"))?null:a.hasError("email"))||(null==(a=n.userForm.get("email"))?null:a.hasError("pattern"))),m.xp6(1),m.Q6J("ngIf",null==(r=n.userForm.get("email"))?null:r.hasError("unique")),m.xp6(10),m.Q6J("ngIf",null==(i=n.userForm.get("password"))?null:i.hasError("required")),m.xp6(1),m.Q6J("ngIf",null==(c=n.userForm.get("password"))?null:c.hasError("minlength")),m.xp6(4),m.Q6J("disabled",n.wait)}},directives:[wn.uh,wn.xY,r._Y,r.JL,r.sg,pt.KE,ht.gD,r.JJ,r.u,o.sg,ft.Nt,r.Fj,o.O5,Y.d,v.lW,wn.ZT,S.ey,pt.TO],styles:[".mat-dialog-title[_ngcontent-%COMP%]{color:var(--app-text-primary)}.user-form[_ngcontent-%COMP%]{margin-top:1em}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:not(.text-center)   label[_ngcontent-%COMP%]{margin-left:.5em;margin-right:-1.6em}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span.input-req[_ngcontent-%COMP%]{margin-left:.3em;color:var(--app-rojo)}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   mat-icon.input-info[_ngcontent-%COMP%]{margin-left:.3em;width:auto;height:auto;font-size:15px;line-height:1em;vertical-align:middle;color:var(--app-cyan)}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.user-form[_ngcontent-%COMP%]   .checks-seccion[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;font-weight:400;font-size:12px;line-height:14px;color:var(--app-gris-muy-oscuro)}.user-form[_ngcontent-%COMP%]   .checks-seccion[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--app-cyan)}"]}),t})();function pa(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"th",28),m.TgZ(1,"mat-checkbox",29),m.NdJ("change",function(n){m.CHM(t);const e=m.oxw();return n?e.masterToggle():null}),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(1),m.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function fa(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"td",30),m.TgZ(1,"mat-checkbox",31),m.NdJ("click",function(t){return t.stopPropagation()})("change",function(n){const e=m.CHM(t).$implicit,o=m.oxw();return n?o.selection.toggle(e):null}),m.qZA(),m.qZA()}if(2&t){const t=n.$implicit,e=m.oxw();m.xp6(1),m.Q6J("checked",e.selection.isSelected(t))("aria-label",e.checkboxLabel(t))}}function ha(t,n){1&t&&(m.TgZ(0,"th",28),m._uU(1," Nombre "),m.qZA())}function _a(t,n){if(1&t&&(m.TgZ(0,"td",30),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",t.firstname," ")}}function Za(t,n){1&t&&(m.TgZ(0,"th",28),m._uU(1," Apellido "),m.qZA())}function Ca(t,n){if(1&t&&(m.TgZ(0,"td",30),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",t.lastname," ")}}function Ma(t,n){1&t&&(m.TgZ(0,"th",28),m._uU(1," Area "),m.qZA())}function qa(t,n){if(1&t&&(m.TgZ(0,"td",30),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",null==t.area?null:t.area.name," ")}}function xa(t,n){1&t&&(m.TgZ(0,"th",28),m._uU(1," Correo "),m.qZA())}function Oa(t,n){if(1&t&&(m.TgZ(0,"td",30),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",t.email," ")}}function va(t,n){1&t&&m._UZ(0,"th",28)}function ba(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"td",32),m.NdJ("click",function(t){return t.stopPropagation()}),m.TgZ(1,"button",33),m.NdJ("click",function(){const n=m.CHM(t).$implicit;return m.oxw().openEdit(n)}),m.TgZ(2,"mat-icon"),m._uU(3,"edit"),m.qZA(),m.qZA(),m.TgZ(4,"button",34),m.NdJ("click",function(){const n=m.CHM(t).$implicit;return m.oxw().delete(n)}),m.TgZ(5,"mat-icon"),m._uU(6,"delete_forever"),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=n.$implicit,e=m.oxw();m.xp6(4),m.Q6J("disabled",t.id==e.currentUser.id)}}function Pa(t,n){1&t&&m._UZ(0,"tr",35)}function Aa(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"tr",36),m.NdJ("click",function(){const n=m.CHM(t).$implicit;return m.oxw().selection.toggle(n)}),m.qZA()}}let Ta=(()=>{class t{constructor(t,n,e,o,a){this.http=t,this.router=n,this.dialog=e,this.alert=o,this.authenticationService=a,this.displayedColumns=["select","name","last_name","area","email","actions"],this.dataSource=new gt.by([]),this.selection=new ut.Ov(!0,[])}ngOnInit(){this._userSub=this.authenticationService.currentUser.subscribe(t=>this.currentUser=t),this.loadUsers(),this.loadPlan()}ngOnDestroy(){this._userSub.unsubscribe()}loadUsers(){let t=new i.LE;this.http.get(`${x.N.apiUrl}/users`,{params:t}).subscribe(t=>{this.dataSource.data=t},t=>{})}loadPlan(){var t;this.http.get(`${x.N.apiUrl}/plans/${null===(t=this.currentUser.company)||void 0===t?void 0:t.plan}`).subscribe(t=>{this.currentPlan=t},t=>{})}openAdd(){this.dialog.open(aa,{width:"644px",data:{}}).afterClosed().subscribe(t=>{console.log("The dialog was closed"),t&&(this.dataSource.data.push(t),this.table.renderRows())})}openEdit(t){this.dialog.open(ma,{width:"644px",data:t}).afterClosed().subscribe(t=>{if(console.log("The dialog was closed"),t){let n=this.dataSource.data.findIndex(n=>n.id==t.id);this.dataSource.data[n]=t,this.table.renderRows()}})}delete(t){3!=t.role.id&&t.id!=this.currentUser.id?this.alert.open({title:"\xbfEst\xe1s seguro de eliminar este Usuario?",text:"Una vez eliminado el usuario no podra recuperar sus cotizaci\xf3nes, las cotizaci\xf3nes actuales seran traspasadas al administrador."}).then(n=>{n&&(console.log("borrando usuario:",n),this.http.delete(`${x.N.apiUrl}/users/${t.id}`).subscribe(n=>{console.log(n);let e=this.dataSource.data.findIndex(n=>n.id==t.id);e>-1&&this.dataSource.data.splice(e,1),this.table.renderRows()},t=>{}))}):console.error("No se puede borrar el usuario!")}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.id+1}`:(this.isAllSelected()?"deselect":"select")+" all"}bulkAction(){console.log(this.selection.isEmpty())}avalibleUsers(){var t;return(null===(t=this.currentPlan)||void 0===t?void 0:t.users)-this.dataSource.data.length}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(a.F0),m.Y36(wn.uw),m.Y36(C.c9),m.Y36(C.$h))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-usuarios"]],viewQuery:function(t,n){if(1&t&&m.Gf(gt.BZ,7),2&t){let t;m.iGM(t=m.CRH())&&(n.table=t.first)}},decls:60,vars:7,consts:[[1,"container-fluid","pt-5","px-md-5"],[1,"row"],[1,"col","page-title"],[1,"col","page-actions"],["mat-raised-button","","color","accent",1,"btn-round",3,"disabled","click"],[1,"row","py-4","gy-2","info-row"],[1,"col-auto"],[1,"w-100"],[1,"col-auto","link-col"],[1,"row","actions-form","pt-3"],[1,"form-group","col-auto","mt-1"],["for","tipo",1,"form-label","me-3"],["appearance","outline",1,"me-3"],["id","order","placeholder","Cerrar","disableOptionCentering",""],["mat-raised-button","","color","accent",1,"btn-round","btn-sm",3,"disabled","click"],[1,"col"],["mat-table","",1,"cotizacion-table",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","last_name"],["matColumnDef","area"],["matColumnDef","email"],["matColumnDef","actions"],["mat-cell","","class","actions-cell text-end",3,"click",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-cell","",1,"actions-cell","text-end",3,"click"],["mat-icon-button","","color","accent",3,"click"],["mat-icon-button","","color","warn",3,"disabled","click"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(t,n){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"h1"),m._uU(4,"Usuarios"),m.qZA(),m.TgZ(5,"p"),m._uU(6,"Gestiona tus usuarios o agrega nuevos"),m.qZA(),m.qZA(),m.TgZ(7,"div",3),m.TgZ(8,"button",4),m.NdJ("click",function(){return n.openAdd()}),m.TgZ(9,"mat-icon"),m._uU(10,"person_add"),m.qZA(),m._uU(11," Agregar Usuario "),m.qZA(),m.qZA(),m.qZA(),m._UZ(12,"mat-divider"),m.TgZ(13,"div",5),m.TgZ(14,"div",6),m._uU(15," No de usuarios Disponibles: "),m.TgZ(16,"span"),m._uU(17),m.qZA(),m.qZA(),m.TgZ(18,"div",6),m._uU(19," No de usuarios Utilizados: "),m.TgZ(20,"span"),m._uU(21),m.qZA(),m.qZA(),m._UZ(22,"div",7),m.TgZ(23,"div",8),m._uU(24," \xbfNecesitas m\xe1s usuarios? "),m.TgZ(25,"a"),m._uU(26,"crece tu plan"),m.qZA(),m.qZA(),m.qZA(),m._UZ(27,"mat-divider"),m.TgZ(28,"div",9),m.TgZ(29,"div",10),m.TgZ(30,"label",11),m._uU(31,"Acciones en lote"),m.qZA(),m.TgZ(32,"mat-form-field",12),m._UZ(33,"mat-select",13),m.qZA(),m.TgZ(34,"button",14),m.NdJ("click",function(){return n.bulkAction()}),m._uU(35,"Aplicar"),m.qZA(),m.qZA(),m.qZA(),m._UZ(36,"mat-divider"),m.TgZ(37,"div",1),m.TgZ(38,"div",15),m.TgZ(39,"table",16),m.ynx(40,17),m.YNc(41,pa,2,3,"th",18),m.YNc(42,fa,2,2,"td",19),m.BQk(),m.ynx(43,20),m.YNc(44,ha,2,0,"th",18),m.YNc(45,_a,2,1,"td",19),m.BQk(),m.ynx(46,21),m.YNc(47,Za,2,0,"th",18),m.YNc(48,Ca,2,1,"td",19),m.BQk(),m.ynx(49,22),m.YNc(50,Ma,2,0,"th",18),m.YNc(51,qa,2,1,"td",19),m.BQk(),m.ynx(52,23),m.YNc(53,xa,2,0,"th",18),m.YNc(54,Oa,2,1,"td",19),m.BQk(),m.ynx(55,24),m.YNc(56,va,1,0,"th",18),m.YNc(57,ba,7,1,"td",25),m.BQk(),m.YNc(58,Pa,1,0,"tr",26),m.YNc(59,Aa,1,0,"tr",27),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(8),m.Q6J("disabled","administrator"!==(null==n.currentUser.role?null:n.currentUser.role.type)||n.avalibleUsers()<=0),m.xp6(9),m.Oqu(n.avalibleUsers()),m.xp6(4),m.Oqu(n.dataSource.data.length),m.xp6(13),m.Q6J("disabled",n.selection.isEmpty()),m.xp6(5),m.Q6J("dataSource",n.dataSource),m.xp6(19),m.Q6J("matHeaderRowDef",n.displayedColumns),m.xp6(1),m.Q6J("matRowDefColumns",n.displayedColumns))},directives:[v.lW,b.Hw,Y.d,pt.KE,ht.gD,gt.BZ,gt.w1,gt.fO,gt.Dz,gt.as,gt.nj,gt.ge,Zt.oG,gt.ev,gt.XQ,gt.Gk],styles:[".info-row[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:15px;color:#5a6a6f}.info-row[_ngcontent-%COMP%]   .link-col[_ngcontent-%COMP%]{font-weight:500;color:#999d9e}.info-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#00aad3}.actions-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}.actions-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{line-height:40px}table.mat-table[_ngcontent-%COMP%]{margin-top:2em;display:table;width:100%;border-radius:10px;overflow:hidden;filter:drop-shadow(0 5px 5px rgba(64,148,171,.24))}table.mat-table[_ngcontent-%COMP%]     .mat-header-cell{background-color:var(--app-blue-cyan);color:#fff}table.mat-table[_ngcontent-%COMP%]     .mat-row:nth-child(odd){background-color:#fff}table.mat-table[_ngcontent-%COMP%]     .mat-row:not(:nth-child(odd)){background-color:#f6f9fa}table.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{font-weight:600;font-size:12px;line-height:15px}table.mat-table[_ngcontent-%COMP%]   .mat-cell.mat-column-email[_ngcontent-%COMP%]{color:#00aad3}"]}),t})();function wa(t,n){if(1&t&&(m.TgZ(0,"mat-option",10),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.Q6J("value",t.id),m.xp6(1),m.Oqu(t.name)}}function ya(t,n){if(1&t&&(m.TgZ(0,"mat-option",10),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.Q6J("value",t.id),m.xp6(1),m.Oqu(t.name)}}function Ua(t,n){1&t&&(m.TgZ(0,"th",38),m._uU(1," ID "),m.qZA())}function Na(t,n){if(1&t&&(m.TgZ(0,"td",39),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",t.id," ")}}function ka(t,n){1&t&&(m.TgZ(0,"th",38),m._uU(1," Usuario "),m.qZA())}function Ja(t,n){if(1&t&&(m.TgZ(0,"td",39),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",null==t.user?null:t.user.username," ")}}function Qa(t,n){1&t&&(m.TgZ(0,"th",38),m._uU(1," Fecha "),m.qZA())}function Ia(t,n){if(1&t&&(m.TgZ(0,"td",39),m._uU(1),m.ALo(2,"date"),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",m.xi3(2,1,t.created_at,"dd/MM/yyyy")," ")}}function Ya(t,n){1&t&&(m.TgZ(0,"th",38),m._uU(1," Problema "),m.qZA())}function Sa(t,n){if(1&t&&(m.TgZ(0,"td",39),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.hij(" ",(null==t.type?null:t.type.name)||"-"," ")}}function za(t,n){1&t&&(m.TgZ(0,"th",40),m._uU(1," Estado "),m.qZA())}function Fa(t,n){if(1&t&&(m.TgZ(0,"td",41),m.TgZ(1,"span"),m._uU(2),m.qZA(),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.Gre("pill pill-lg pill-",null==t.status?null:t.status.class," mx-auto"),m.xp6(1),m.Oqu(null==t.status?null:t.status.name)}}function Da(t,n){1&t&&m._UZ(0,"th",42)}function $a(t,n){if(1&t&&m._UZ(0,"mat-icon",47),2&t){const t=m.oxw().$implicit;m.Q6J("matBadge",null==t.chat_room?null:t.chat_room.unread_a)("matBadgeHidden",!(null!=t.chat_room&&t.chat_room.unread_a))}}function Ba(t,n){if(1&t&&m._UZ(0,"mat-icon",48),2&t){const t=m.oxw().$implicit;m.Q6J("matBadge",null==t.chat_room?null:t.chat_room.unread_a)("matBadgeHidden",!(null!=t.chat_room&&t.chat_room.unread_a))}}function Ea(t,n){if(1&t&&(m.TgZ(0,"td",43),m.ynx(1,44),m.YNc(2,$a,1,2,"mat-icon",45),m.YNc(3,Ba,1,2,"mat-icon",46),m.BQk(),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.Q6J("ngSwitch",null==t.status?null:t.status.id),m.xp6(1),m.Q6J("ngSwitchCase",2)}}function La(t,n){1&t&&m._UZ(0,"th",49)}function ja(t,n){if(1&t&&(m.TgZ(0,"td",50),m.NdJ("click",function(t){return t.stopPropagation()}),m.TgZ(1,"a",51),m.TgZ(2,"mat-icon"),m._uU(3,"chevron_right"),m.qZA(),m.qZA(),m.qZA()),2&t){const t=n.$implicit;m.xp6(1),m.Q6J("routerLink",t.id)}}function Ha(t,n){1&t&&m._UZ(0,"tr",52)}function Ga(t,n){1&t&&m._UZ(0,"tr",53),2&t&&m.Q6J("routerLink",n.$implicit.id)}function Ra(t,n){1&t&&(m.TgZ(0,"tr",54),m.TgZ(1,"td",55),m._uU(2,"No tienes incidencias.."),m.qZA(),m.qZA())}const Va=function(){return[5,10,20]};let Xa=(()=>{class t{constructor(t,n,e,o,a){this.http=t,this.router=n,this.route=e,this.dialog=o,this.authenticationService=a,this.displayedColumns=["id","user","date","name","status","badges","actions"],this.dataSource=new gt.by([]),this.statuses=[],this.users=[],this.filters={status:null,user:null,unread:null},this.currentUser=a.currentUserValue,this.route.queryParamMap.subscribe(t=>{this.filters._q=t.get("_q")?t.get("_q"):null,this.filters.status=t.get("status")?Number(t.get("status")):null,this.filters.user=t.get("user")?Number(t.get("user")):null,this.filters.unread=t.get("unread")?"true"==t.get("unread"):null,t.get("tab")&&(this.filters.tab=t.get("tab")),this.applyFilter(!1)}),this.dataSource.sortingDataAccessor=(t,n)=>{var e,o,a;switch(n){case"id":return t.id;case"user":return null===(e=t.user)||void 0===e?void 0:e.username;case"date":return t.created_at;case"name":return null===(o=t.type)||void 0===o?void 0:o.name;case"status":return null===(a=t.status)||void 0===a?void 0:a.id;default:return t[n]}},this.dataSource.filterPredicate=(t,n)=>{var e;return!(null!==this.filters.status&&t.status.id!=this.filters.status||null!==this.filters.user&&t.user.id!=this.filters.user||this.filters.unread&&!(null===(e=t.chat_room)||void 0===e?void 0:e.unread_a)||(null==n?void 0:n._q)&&n._q.trim()&&-1==JSON.stringify([t.id]).toLowerCase().indexOf(n._q.toLowerCase()))}}ngOnInit(){this.loadIssues(),this.loadStatuses(),this.loadUsers()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}loadIssues(){var t;const n=(new i.LE).set("company",null===(t=this.currentUser.company)||void 0===t?void 0:t.id);this.http.get(`${x.N.apiUrl}/issues`,{params:n}).subscribe(t=>{this.dataSource.data=t},t=>{})}loadStatuses(){this.http.get(`${x.N.apiUrl}/issue-statuses`).subscribe(t=>{this.statuses=t},t=>{})}loadUsers(){this.http.get(`${x.N.apiUrl}/users`).subscribe(t=>{this.users=t.map(t=>({id:t.id,name:t.username}))},t=>{})}applyFilter(t=!0){this.dataSource.filter=this.filters,t&&this.router.navigate([],{queryParams:this.filters,queryParamsHandling:"merge",replaceUrl:!0})}openReport(){this.dialog.open(Jn,{width:"677px",panelClass:["dialog-py-48","dialog-px-75"],data:{}}).afterClosed().subscribe(t=>{console.log("The dialog was closed"),t&&(this.dataSource.data.push(t),this.table.renderRows(),this.applyFilter(!1))})}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(a.F0),m.Y36(a.gz),m.Y36(wn.uw),m.Y36(C.$h))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-incidencias"]],viewQuery:function(t,n){if(1&t&&(m.Gf(gt.BZ,5),m.Gf(dt.YE,5),m.Gf(mt.NW,5)),2&t){let t;m.iGM(t=m.CRH())&&(n.table=t.first),m.iGM(t=m.CRH())&&(n.sort=t.first),m.iGM(t=m.CRH())&&(n.paginator=t.first)}},decls:62,vars:12,consts:[[1,"container-fluid","pt-5","px-md-5"],[1,"row"],[1,"col","page-title"],[1,"col","page-actions"],["mat-raised-button","","color","primary",1,"btn-round",3,"click"],[1,"row","search-form"],[1,"form-group","col-auto","mt-2"],["for","tipo",1,"form-label"],["appearance","outline"],["id","order","placeholder","Todas","disableOptionCentering","",3,"ngModel","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","search_usuario",1,"form-label"],["appearance","outline",1,"search-user"],["id","search_usuario","placeholder","Nombre de usuario","disableOptionCentering","",3,"ngModel","ngModelChange","selectionChange"],[1,"form-group","col-auto","mt-2","pt-4"],[3,"ngModel","ngModelChange","change"],[1,"col"],["mat-table","","matSort","",1,"cotizacion-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user"],["matColumnDef","date"],["matColumnDef","name"],["matColumnDef","status"],["mat-header-cell","","class","text-center","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","badges"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","text-end",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-end",3,"click",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"routerLink",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"text-center"],["mat-cell","",1,"text-center"],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"text-end"],[3,"ngSwitch"],["svgIcon","mnsg",3,"matBadge","matBadgeHidden",4,"ngSwitchCase"],["svgIcon","mnsg-disable",3,"matBadge","matBadgeHidden",4,"ngSwitchDefault"],["svgIcon","mnsg",3,"matBadge","matBadgeHidden"],["svgIcon","mnsg-disable",3,"matBadge","matBadgeHidden"],["mat-header-cell",""],["mat-cell","",1,"text-end",3,"click"],["mat-button","","color","primary",3,"routerLink"],["mat-header-row",""],["mat-row","",3,"routerLink"],[1,"mat-row"],["colspan","7",1,"mat-cell"]],template:function(t,n){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"h1"),m._uU(4,"Incidencias"),m.qZA(),m.TgZ(5,"p"),m._uU(6,"Reportes de errores"),m.qZA(),m.qZA(),m.TgZ(7,"div",3),m.TgZ(8,"button",4),m.NdJ("click",function(){return n.openReport()}),m.TgZ(9,"mat-icon"),m._uU(10,"info"),m.qZA(),m._uU(11," Reportar Un Problema "),m.qZA(),m.qZA(),m.qZA(),m._UZ(12,"mat-divider"),m.TgZ(13,"div",5),m.TgZ(14,"div",6),m.TgZ(15,"label",7),m._uU(16,"Estado"),m.qZA(),m.TgZ(17,"mat-form-field",8),m.TgZ(18,"mat-select",9),m.NdJ("ngModelChange",function(t){return n.filters.status=t})("selectionChange",function(){return n.applyFilter()}),m.TgZ(19,"mat-option",10),m._uU(20,"Todas"),m.qZA(),m.YNc(21,wa,2,2,"mat-option",11),m.qZA(),m.qZA(),m.qZA(),m.TgZ(22,"div",6),m.TgZ(23,"label",12),m._uU(24,"Usuario"),m.qZA(),m.TgZ(25,"mat-form-field",13),m.TgZ(26,"mat-select",14),m.NdJ("ngModelChange",function(t){return n.filters.user=t})("selectionChange",function(){return n.applyFilter()}),m.TgZ(27,"mat-option",10),m._uU(28,"Todas"),m.qZA(),m.YNc(29,ya,2,2,"mat-option",11),m.qZA(),m.qZA(),m.qZA(),m.TgZ(30,"div",15),m.TgZ(31,"mat-checkbox",16),m.NdJ("ngModelChange",function(t){return n.filters.unread=t})("change",function(){return n.applyFilter()}),m._uU(32,"Conversaciones sin leer"),m.qZA(),m.qZA(),m.qZA(),m._UZ(33,"mat-divider"),m.TgZ(34,"div",1),m.TgZ(35,"div",17),m.TgZ(36,"table",18),m.ynx(37,19),m.YNc(38,Ua,2,0,"th",20),m.YNc(39,Na,2,1,"td",21),m.BQk(),m.ynx(40,22),m.YNc(41,ka,2,0,"th",20),m.YNc(42,Ja,2,1,"td",21),m.BQk(),m.ynx(43,23),m.YNc(44,Qa,2,0,"th",20),m.YNc(45,Ia,3,4,"td",21),m.BQk(),m.ynx(46,24),m.YNc(47,Ya,2,0,"th",20),m.YNc(48,Sa,2,1,"td",21),m.BQk(),m.ynx(49,25),m.YNc(50,za,2,0,"th",26),m.YNc(51,Fa,3,4,"td",27),m.BQk(),m.ynx(52,28),m.YNc(53,Da,1,0,"th",29),m.YNc(54,Ea,4,2,"td",30),m.BQk(),m.ynx(55,31),m.YNc(56,La,1,0,"th",32),m.YNc(57,ja,4,1,"td",33),m.BQk(),m.YNc(58,Ha,1,0,"tr",34),m.YNc(59,Ga,1,1,"tr",35),m.YNc(60,Ra,3,0,"tr",36),m.qZA(),m._UZ(61,"mat-paginator",37),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(18),m.Q6J("ngModel",n.filters.status),m.xp6(1),m.Q6J("value",null),m.xp6(2),m.Q6J("ngForOf",n.statuses),m.xp6(5),m.Q6J("ngModel",n.filters.user),m.xp6(1),m.Q6J("value",null),m.xp6(2),m.Q6J("ngForOf",n.users),m.xp6(2),m.Q6J("ngModel",n.filters.unread),m.xp6(5),m.Q6J("dataSource",n.dataSource),m.xp6(22),m.Q6J("matHeaderRowDef",n.displayedColumns),m.xp6(1),m.Q6J("matRowDefColumns",n.displayedColumns),m.xp6(2),m.Q6J("pageSizeOptions",m.DdM(11,Va)))},directives:[v.lW,b.Hw,Y.d,pt.KE,ht.gD,r.JJ,r.On,S.ey,o.sg,Zt.oG,gt.BZ,dt.YE,gt.w1,gt.fO,gt.Dz,gt.as,gt.nj,gt.Ee,mt.NW,gt.ge,dt.nU,gt.ev,o.RF,o.n9,o.ED,P.k,v.zs,a.yS,gt.XQ,gt.Gk,a.rH],pipes:[o.uU],styles:[".search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{display:block;width:130px;max-width:100%}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field.search-name[_ngcontent-%COMP%]{width:330px}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field.search-name[_ngcontent-%COMP%]  .mat-form-field-prefix{align-self:center}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field.search-user[_ngcontent-%COMP%]{width:156px}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--app-amarillo-claro)}.search-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{line-height:40px}.actions-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}.actions-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{line-height:40px}table.mat-table[_ngcontent-%COMP%]{margin-top:2em;display:table;width:100%;border-radius:10px;overflow:hidden;filter:drop-shadow(0 5px 5px rgba(64,148,171,.24))}table.mat-table[_ngcontent-%COMP%]     .mat-header-cell{background-color:var(--app-blue-cyan);color:#fff}table.mat-table[_ngcontent-%COMP%]     .mat-row:nth-child(odd){background-color:#fff}table.mat-table[_ngcontent-%COMP%]     .mat-row:not(:nth-child(odd)){background-color:#f6f9fa}table.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{cursor:pointer}table.mat-table[_ngcontent-%COMP%]   .mat-cell.mat-column-user[_ngcontent-%COMP%]{font-weight:600;font-size:12px;line-height:15px}table.mat-table[_ngcontent-%COMP%]   .mat-column-status[_ngcontent-%COMP%]   span.pill[_ngcontent-%COMP%]{width:100px}table.mat-table[_ngcontent-%COMP%]   .mat-column-badges[_ngcontent-%COMP%]{cursor:unset}table.mat-table[_ngcontent-%COMP%]   .mat-column-badges[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{line-height:27px;height:27px;width:27px;margin-right:5px}table.mat-table[_ngcontent-%COMP%]   .mat-column-badges[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     .mat-badge-content{top:2px;right:-4px;font-size:7px;line-height:12px;width:12px;height:12px}table.mat-table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]{cursor:unset;flex:none;width:100px}table.mat-table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   mat-badge-medium.mat-badge-above[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{top:unset;right:unset}"]}),t})();function Wa(t,n){if(1&t&&(m.TgZ(0,"div",6),m.TgZ(1,"div",7),m.TgZ(2,"mat-card",8),m.TgZ(3,"mat-card-header"),m.TgZ(4,"mat-card-title"),m._UZ(5,"img",9),m._uU(6,"Incidencia"),m.qZA(),m.TgZ(7,"span",10),m._uU(8),m.qZA(),m.TgZ(9,"div"),m.TgZ(10,"span"),m._uU(11),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(12,"mat-card",11),m.TgZ(13,"mat-card-content"),m.TgZ(14,"dl",12),m.TgZ(15,"dt",13),m._uU(16,"Problema:"),m.qZA(),m.TgZ(17,"dd",14),m._uU(18),m.qZA(),m._UZ(19,"div",15),m.TgZ(20,"dt",13),m._uU(21,"Fecha:"),m.qZA(),m.TgZ(22,"dd",13),m._uU(23),m.ALo(24,"date"),m.qZA(),m._UZ(25,"div",15),m.TgZ(26,"dt",13),m._uU(27,"Usuario que reporto:"),m.qZA(),m.TgZ(28,"dd",13),m._uU(29),m.qZA(),m._UZ(30,"div",15),m.qZA(),m._UZ(31,"mat-divider"),m.TgZ(32,"div",16),m.TgZ(33,"h2"),m._uU(34,"Detalles"),m.qZA(),m.TgZ(35,"p"),m._uU(36),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(37,"div",17),m._UZ(38,"app-chat-card",18),m.qZA(),m.qZA()),2&t){const t=m.oxw();m.xp6(8),m.hij("ID:",t.issue.id,""),m.xp6(2),m.Gre("pill pill-lg pill-",null==t.issue.status?null:t.issue.status.class," mx-auto"),m.xp6(1),m.Oqu(null==t.issue.status?null:t.issue.status.name),m.xp6(7),m.Oqu(null==t.issue.type?null:t.issue.type.name),m.xp6(5),m.Oqu(m.xi3(24,14,t.issue.created_at,"dd/MM/yyyy")),m.xp6(6),m.Oqu((null==t.issue.user?null:t.issue.user.firstname)+" "+(null==t.issue.user?null:t.issue.user.lastname)),m.xp6(7),m.Oqu(t.issue.details),m.xp6(2),m.Q6J("id",t.issue.id)("type","issue")("room","incidencia_"+t.issue.id)("titleName","Soporte")("canChat",t.canChat())}}let Ka=(()=>{class t{constructor(t,n,e){this.http=t,this.route=n,this.authenticationService=e,this.route.paramMap.subscribe(t=>{this.id=t.get("id")}),this.currentUser=e.currentUserValue}ngOnInit(){this.loadIssue()}loadIssue(){this.http.get(`${x.N.apiUrl}/issues/${this.id}`).subscribe(t=>{this.issue=t},t=>{})}canChat(){return 2==this.issue.status.id}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(a.gz),m.Y36(C.$h))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-incidencia-detalles"]],decls:9,vars:1,consts:[[1,"container","pt-5","px-md-5"],[1,"row"],[1,"col","page-title"],["routerLink","..",1,"btn-return"],[1,"col","page-actions"],["class","row pt-3 gx-5 gy-3",4,"ngIf"],[1,"row","pt-3","gx-5","gy-3"],[1,"col-lg-7"],[1,"card-empresa"],["mat-card-avatar",""],[1,"empresa-id"],[1,"card-info","mt-3"],[1,"row","list-info"],[1,"col-auto"],[1,"col-auto","name"],[1,"w-100"],[1,"details","pt-4"],[1,"col-lg-5"],[3,"id","type","room","titleName","canChat"]],template:function(t,n){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"a",3),m.TgZ(4,"mat-icon"),m._uU(5,"arrow_back_ios"),m.qZA(),m._uU(6," Inicidencias "),m.qZA(),m.qZA(),m._UZ(7,"div",4),m.qZA(),m.YNc(8,Wa,39,17,"div",5),m.qZA()),2&t&&(m.xp6(8),m.Q6J("ngIf",n.issue))},directives:[a.yS,b.Hw,o.O5,O.a8,O.dk,O.n5,O.kc,O.dn,Y.d,Yn.a],pipes:[o.uU],styles:["mat-card[_ngcontent-%COMP%]{background:#fff;box-shadow:0 5px 5px #4094ab3d!important;border-radius:10px}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]     .mat-card-header-text{margin:0}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{position:relative}mat-card.card-empresa[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{align-items:center;justify-content:space-between}mat-card.card-empresa[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:14px;display:flex;align-items:center;color:#062ebd;margin-bottom:0}mat-card.card-empresa[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:15px;background:#fbfbfb;border:1px solid #97bcc566;box-sizing:border-box}mat-card.card-empresa[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .empresa-id[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:500;font-size:11px;line-height:13px;color:#5a6a6f}mat-card.card-info[_ngcontent-%COMP%]   dl.list-info[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{color:var(--app-text-gris-oscuro)}mat-card.card-info[_ngcontent-%COMP%]   dl.list-info[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%], mat-card.card-info[_ngcontent-%COMP%]   dl.list-info[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:15px}mat-card.card-info[_ngcontent-%COMP%]   dl.list-info[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{color:var(--app-text-cyan)}mat-card.card-info[_ngcontent-%COMP%]   dl.list-info[_ngcontent-%COMP%]   dd.name[_ngcontent-%COMP%]{color:var(--app-azul-marino)}mat-card.card-info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;color:#062ebd}mat-card.card-info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], mat-card.card-info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-size:12px;line-height:15px}mat-card.card-info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;color:#5a6a6f}"]}),t})();var tr=e(3194);function nr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese un nombre de referencia para su cotizacion."),m.qZA())}function er(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese cantidad."),m.qZA())}function or(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Minimo una unidad."),m.qZA())}function ar(t,n){if(1&t&&(m.TgZ(0,"mat-option",43),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.Q6J("value",t.id),m.xp6(1),m.Oqu(t.name)}}function rr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Selecciona una categoria."),m.qZA())}function ir(t,n){if(1&t&&(m.TgZ(0,"mat-option",43),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.Q6J("value",t.id),m.xp6(1),m.Oqu(t.name)}}function cr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Selecciona al menos una sub-categoria."),m.qZA())}function lr(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"mat-chip",44,45),m.NdJ("click",function(){m.CHM(t);const n=m.MAs(1);return m.oxw().toggleSelection(n)}),m._uU(2),m.qZA()}if(2&t){const t=n.$implicit;m.Q6J("value",t.id),m.xp6(2),m.Oqu(t.name)}}function sr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Seleccione al menos un m\xe9todo de pago."),m.qZA())}function ur(t,n){if(1&t&&(m.TgZ(0,"div"),m.YNc(1,sr,2,0,"mat-error",12),m.qZA()),2&t){const t=m.oxw();let n;m.xp6(1),m.Q6J("ngIf",null==(n=t.supplier_criteria.get("payment_methods"))?null:n.hasError("required"))}}function gr(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"mat-chip",44,45),m.NdJ("click",function(){m.CHM(t);const n=m.MAs(1);return m.oxw().toggleSelection(n)}),m._uU(2),m.qZA()}if(2&t){const t=n.$implicit;m.Q6J("value",t.id),m.xp6(2),m.Oqu(t.name)}}function dr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Seleccione al menos un plazo de pago."),m.qZA())}function mr(t,n){if(1&t&&(m.TgZ(0,"div"),m.YNc(1,dr,2,0,"mat-error",12),m.qZA()),2&t){const t=m.oxw();let n;m.xp6(1),m.Q6J("ngIf",null==(n=t.supplier_criteria.get("payment_terms"))?null:n.hasError("required"))}}function pr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese especificaciones."),m.qZA())}let fr=(()=>{class t{constructor(t,n,e,o){this.http=t,this.router=n,this.formBuilder=e,this.quotationService=o,this.categories=[],this.sub_categories=[],this.payment_terms=[],this.payment_methods=[],this.wait=!1}get supplier_criteria(){return this.quotationForm.get("supplier_criteria")}ngOnInit(){this.loadCategories(),this.loadPaymentTermsList(),this.loadPaymentMethodsList(),this.initForm()}loadCategories(){let t=(new i.LE).append("depth",0).append("_sort","position:ASC");this.http.get(`${x.N.apiUrl}/categories`,{params:t}).subscribe(t=>{this.categories=t},t=>{})}categoryChange(t){var n,e;this.sub_categories=null===(n=this.categories.find(n=>n.id==t.value))||void 0===n?void 0:n.childrens,null===(e=this.quotationForm.get("categories"))||void 0===e||e.patchValue(null)}loadPaymentTermsList(){this.http.get(`${x.N.apiUrl}/payment-terms`).subscribe(t=>{this.payment_terms=t},t=>{})}loadPaymentMethodsList(){this.http.get(`${x.N.apiUrl}/payment-methods`).subscribe(t=>{this.payment_methods=t},t=>{})}initForm(){this.quotationForm=this.formBuilder.group({name:[null,[r.kI.required]],qty:[null,[r.kI.min(1)]],supplier_criteria:this.formBuilder.group({main_category:[null,[r.kI.required]],categories:[null],payment_methods:[null,[r.kI.required]],payment_terms:[null,[r.kI.required]]}),details:[null,[r.kI.required]],file:[null],file_source:[null],open:[!1,[r.kI.requiredTrue]]})}onSubmit(){var t=this;return(0,_.Z)(function*(){var n,e;if(t.quotationForm.invalid)return console.log("form invalid"),void t.markFormGroupTouched(t.quotationForm);t.wait=!0,console.log("preparing data...");const o=t.quotationForm.getRawValue();if(delete o.file,delete o.file_source,null===(n=t.quotationForm.get("file"))||void 0===n?void 0:n.value){console.log("upload file...");const n=new FormData;n.append("files",null===(e=t.quotationForm.get("file_source"))||void 0===e?void 0:e.value);try{let e=yield t.http.post(`${x.N.apiUrl}/upload`,n).toPromise();e&&e.length&&(o.file=e[0].id)}catch(a){console.log("error uploading file")}}console.log("saving quotations..."),t.http.post(`${x.N.apiUrl}/quotations/auto-create`,o).subscribe(n=>{t.wait=!1,console.log(n),t.router.navigateByUrl("/empresas/cotizaciones")},n=>{t.wait=!1,console.log("Error saving quotations."),console.log(n.error)})})()}markFormGroupTouched(t){Object.values(t.controls).forEach(t=>{t.markAsTouched(),t.controls&&this.markFormGroupTouched(t)})}toggleSelection(t){t.toggleSelected(!0)}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(a.F0),m.Y36(r.qu),m.Y36(tr.G))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-cotizador"]],decls:83,vars:17,consts:[[1,"container","mt-5"],["id","card-registro",1,"app-modal-shadow","p-0"],[1,"px-c","py-ct"],[1,"px-5"],[1,"cotizacion-form","px-lg-5",3,"formGroup","ngSubmit"],["form",""],[1,"row","gx-5","py-3"],[1,"form-group","col-md-8"],["for","name",1,"form-label"],[1,"input-req"],["appearance","outline"],["matInput","","id","name","formControlName","name","placeholder","Nombre"],[4,"ngIf"],[1,"form-group","col-md-4"],["for","qty",1,"form-label"],["matInput","","type","number","id","qty","formControlName","qty","placeholder","00"],["inset",""],[3,"formGroup"],[1,"row","py-4"],[1,"form-group","col"],[1,"form-label"],[1,"row"],[1,"col-auto"],["id","main_category","formControlName","main_category","placeholder","Categor\xeda principal","disableOptionCentering","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["id","categories","formControlName","categories","placeholder","Categor\xedas secundarias","multiple","","disableOptionCentering",""],[1,"row","gx-5","py-4"],[1,"form-group","col-md-5"],["formControlName","payment_methods","selectable","","multiple","",1,"payment-options"],[3,"value","click",4,"ngFor","ngForOf"],[1,"form-group","col-md-7"],["formControlName","payment_terms","selectable","","multiple","",1,"payment-options"],[1,"row","py-3"],["for","details",1,"form-label"],["matInput","","id","details","formControlName","details","rows","6","placeholder","Escribe aqu\xed tus especificaciones"],[1,"row","py-3","justify-content-center"],[1,"form-group","col-auto"],["field","file","size","sm","placeholder","Adjuntar un documento","hint","PDF o XLS","accept","application/pdf, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","direction","row","itemAlign","start","statusPosition","after",3,"form","showStatus"],[1,"checks-seccion","text-center"],["formControlName","open"],[1,"pb-5"],[1,"row","justify-content-center","btn-row"],["mat-flat-button","","color","accent",1,"btn-round",3,"disabled","click"],[3,"value"],[3,"value","click"],["c","matChip"]],template:function(t,n){if(1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"mat-card",1),m.TgZ(2,"mat-card-title",2),m.TgZ(3,"h1"),m._uU(4,"Cotizador"),m.qZA(),m.TgZ(5,"p"),m._uU(6,"Te ayudamos a obtener las mejores ofertas a tus requerimientos de forma r\xe1pida y automatizada"),m.qZA(),m.qZA(),m.TgZ(7,"mat-card-content",3),m.TgZ(8,"form",4,5),m.NdJ("ngSubmit",function(){return n.onSubmit()}),m.TgZ(10,"div",6),m.TgZ(11,"div",7),m.TgZ(12,"label",8),m._uU(13,"Nombre de referencia para tu cotizaci\xf3n"),m.TgZ(14,"span",9),m._uU(15,"*"),m.qZA(),m.qZA(),m.TgZ(16,"mat-form-field",10),m._UZ(17,"input",11),m.YNc(18,nr,2,0,"mat-error",12),m.qZA(),m.qZA(),m.TgZ(19,"div",13),m.TgZ(20,"label",14),m._uU(21,"Cantidad"),m.TgZ(22,"span",9),m._uU(23,"*"),m.qZA(),m.qZA(),m.TgZ(24,"mat-form-field",10),m._UZ(25,"input",15),m.YNc(26,er,2,0,"mat-error",12),m.YNc(27,or,2,0,"mat-error",12),m.qZA(),m.qZA(),m.qZA(),m._UZ(28,"mat-divider",16),m.TgZ(29,"section",17),m.TgZ(30,"div",18),m.TgZ(31,"div",19),m.TgZ(32,"label",20),m._uU(33,"\xc1rea principal"),m.TgZ(34,"span",9),m._uU(35,"*"),m.qZA(),m.qZA(),m.TgZ(36,"div",21),m.TgZ(37,"div",22),m.TgZ(38,"mat-form-field",10),m.TgZ(39,"mat-select",23),m.NdJ("selectionChange",function(t){return n.categoryChange(t)}),m.YNc(40,ar,2,2,"mat-option",24),m.qZA(),m.YNc(41,rr,2,0,"mat-error",12),m.qZA(),m.qZA(),m.TgZ(42,"div",22),m.TgZ(43,"mat-form-field",10),m.TgZ(44,"mat-select",25),m.YNc(45,ir,2,2,"mat-option",24),m.qZA(),m.YNc(46,cr,2,0,"mat-error",12),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m._UZ(47,"mat-divider",16),m.TgZ(48,"div",26),m.TgZ(49,"div",27),m.TgZ(50,"label",20),m._uU(51,"M\xe9todos de pago"),m.qZA(),m.TgZ(52,"mat-chip-list",28),m.YNc(53,lr,3,2,"mat-chip",29),m.qZA(),m.YNc(54,ur,2,1,"div",12),m.qZA(),m.TgZ(55,"div",30),m.TgZ(56,"label",20),m._uU(57,"Plazos de pago"),m.qZA(),m.TgZ(58,"mat-chip-list",31),m.YNc(59,gr,3,2,"mat-chip",29),m.qZA(),m.YNc(60,mr,2,1,"div",12),m.qZA(),m.qZA(),m._UZ(61,"mat-divider",16),m.qZA(),m.TgZ(62,"div",32),m.TgZ(63,"div",19),m.TgZ(64,"label",33),m._uU(65,"A\xf1ade detalles para nuestros proveedores"),m.TgZ(66,"span",9),m._uU(67,"*"),m.qZA(),m.qZA(),m.TgZ(68,"mat-form-field",10),m._UZ(69,"textarea",34),m.YNc(70,pr,2,0,"mat-error",12),m.qZA(),m.qZA(),m.qZA(),m.TgZ(71,"div",35),m.TgZ(72,"div",36),m._UZ(73,"app-file-field",37),m.qZA(),m.qZA(),m.TgZ(74,"div",38),m.TgZ(75,"p"),m.TgZ(76,"mat-checkbox",39),m._uU(77,"Acepto recibir cotizaciones del proveedor seleccionado."),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(78,"mat-card-actions",40),m.TgZ(79,"div",41),m.TgZ(80,"div",22),m.TgZ(81,"button",42),m.NdJ("click",function(){return n.onSubmit()}),m._uU(82,"Enviar"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t){let t,e,o,a,r,i,c,l;m.xp6(8),m.Q6J("formGroup",n.quotationForm),m.xp6(10),m.Q6J("ngIf",null==(t=n.quotationForm.get("name"))?null:t.hasError("required")),m.xp6(8),m.Q6J("ngIf",null==(e=n.quotationForm.get("qty"))?null:e.hasError("required")),m.xp6(1),m.Q6J("ngIf",null==(o=n.quotationForm.get("qty"))?null:o.hasError("min")),m.xp6(2),m.Q6J("formGroup",n.supplier_criteria),m.xp6(11),m.Q6J("ngForOf",n.categories),m.xp6(1),m.Q6J("ngIf",null==(a=n.supplier_criteria.get("main_category"))?null:a.hasError("required")),m.xp6(4),m.Q6J("ngForOf",n.sub_categories),m.xp6(1),m.Q6J("ngIf",null==(r=n.supplier_criteria.get("categories"))?null:r.hasError("required")),m.xp6(7),m.Q6J("ngForOf",n.payment_methods),m.xp6(1),m.Q6J("ngIf",null==(i=n.supplier_criteria.get("payment_methods"))?null:i.touched),m.xp6(5),m.Q6J("ngForOf",n.payment_terms),m.xp6(1),m.Q6J("ngIf",null==(c=n.supplier_criteria.get("payment_terms"))?null:c.touched),m.xp6(10),m.Q6J("ngIf",null==(l=n.quotationForm.get("details"))?null:l.hasError("required")),m.xp6(3),m.Q6J("form",n.quotationForm)("showStatus",!0),m.xp6(8),m.Q6J("disabled",n.wait)}},directives:[O.a8,O.n5,O.dn,r._Y,r.JL,r.sg,pt.KE,ft.Nt,r.Fj,r.JJ,r.u,o.O5,r.wV,Y.d,ht.gD,o.sg,Qn.qn,yn.O,Zt.oG,O.hq,v.lW,pt.TO,S.ey,Qn.HS],styles:["@media (min-width:992px){.container[_ngcontent-%COMP%]{max-width:calc(1000px + var(--bs-gutter-x,.75rem)*2)}}mat-card[_ngcontent-%COMP%]{border-radius:30px 30px 10px 10px;overflow:hidden}mat-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{background:linear-gradient(#0000,#0000001a),url(banner-cotizador.e7a721bb5adf65f35df8.png);background-position:0;background-repeat:no-repeat;background-size:cover}mat-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;font-weight:500;font-size:24px;line-height:28px;display:flex;align-items:center;color:#fff}mat-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-family:Roboto;font-style:normal;font-weight:400;font-size:14px;line-height:126.69%;color:#fff}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .btn-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .btn-row[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:only-child{margin-left:auto}.cotizacion-form[_ngcontent-%COMP%]{margin-top:3em}.cotizacion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:not(.text-center)   label[_ngcontent-%COMP%]{margin-left:.5em;margin-right:-1.6em}.cotizacion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}.cotizacion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span.input-req[_ngcontent-%COMP%]{margin-left:.3em;color:var(--app-rojo)}.cotizacion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   mat-icon.input-info[_ngcontent-%COMP%]{margin-left:.3em;width:auto;height:auto;font-size:15px;line-height:1em;vertical-align:middle;color:var(--app-cyan)}.cotizacion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.cotizacion-form[_ngcontent-%COMP%]   .checks-seccion[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;font-weight:400;font-size:12px;line-height:14px;color:var(--app-gris-muy-oscuro)}.cotizacion-form[_ngcontent-%COMP%]   .checks-seccion[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--app-cyan)}.btn-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:160px}"]}),t})();function hr(t,n){1&t&&(m.ynx(0),m._uU(1,"Gratis"),m.BQk())}function _r(t,n){if(1&t&&(m.ynx(0),m._uU(1),m.ALo(2,"currency"),m.BQk()),2&t){const t=m.oxw(2);m.xp6(1),m.Oqu(m.lcZ(2,1,t.profile.price.price))}}function Zr(t,n){if(1&t&&(m.TgZ(0,"mat-list-item",36),m.TgZ(1,"mat-icon",37),m._uU(2,"check_circle"),m.qZA(),m._uU(3),m.qZA()),2&t){const t=n.$implicit;m.Q6J("hidden",t.target&&"supplier"!=t.target),m.xp6(3),m.hij("",t.description," ")}}function Cr(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"mat-card",11),m.TgZ(1,"mat-card-content"),m.TgZ(2,"div",12),m.TgZ(3,"div",8),m.TgZ(4,"div",13),m.TgZ(5,"div",14),m._UZ(6,"img",15),m.qZA(),m.TgZ(7,"div",16),m.TgZ(8,"h1",17),m._uU(9),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m._UZ(10,"mat-divider",18),m.TgZ(11,"div",19),m.TgZ(12,"div",20),m._UZ(13,"mat-icon",21),m.TgZ(14,"span",22),m._uU(15),m.qZA(),m.TgZ(16,"label"),m._uU(17,"Cotizaciones Solicitadas"),m.qZA(),m.qZA(),m.TgZ(18,"div",20),m._UZ(19,"mat-icon",23),m.TgZ(20,"span",22),m._uU(21),m.qZA(),m.TgZ(22,"label"),m._uU(23,"Cotizaciones Aceptadas"),m.qZA(),m.qZA(),m.TgZ(24,"div",20),m._UZ(25,"mat-icon",24),m.TgZ(26,"span",22),m._uU(27),m.qZA(),m.TgZ(28,"label"),m._uU(29,"Cotizaciones Descartadas"),m.qZA(),m.qZA(),m.TgZ(30,"div",8),m.TgZ(31,"button",25),m.NdJ("click",function(){return m.CHM(t),m.oxw().exportReport()}),m.TgZ(32,"mat-icon"),m._uU(33,"download"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m._UZ(34,"mat-divider",18),m.TgZ(35,"div",26),m.TgZ(36,"div",27),m.TgZ(37,"h5",28),m._uU(38),m.qZA(),m.TgZ(39,"h4",29),m.YNc(40,hr,2,0,"ng-container",30),m.YNc(41,_r,3,3,"ng-container",30),m.qZA(),m.TgZ(42,"p",31),m._uU(43),m.ALo(44,"date"),m.qZA(),m.qZA(),m.TgZ(45,"mat-list",32),m.YNc(46,Zr,4,2,"mat-list-item",33),m.qZA(),m.TgZ(47,"div",34),m.TgZ(48,"button",35),m._uU(49,"Modificar Plan"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(6),m.Q6J("src",t.profile.profile_picture?t.publicUrl(t.profile.profile_picture.url):t.assetUrl("assets/image-placeholder-2.png"),m.LSH),m.xp6(3),m.Oqu(t.profile.name),m.xp6(6),m.Oqu(null!=t.requested?t.requested:"-"),m.xp6(6),m.Oqu(null!=t.accepted?t.accepted:"-"),m.xp6(6),m.Oqu(null!=t.rejected?t.rejected:"-"),m.xp6(11),m.Oqu(null==t.profile.plan?null:t.profile.plan.name),m.xp6(2),m.Q6J("ngIf",0==(null==t.profile.price?null:t.profile.price.price)),m.xp6(1),m.Q6J("ngIf",t.profile.price&&t.profile.price.price>0),m.xp6(2),m.hij("Suscrito hasta el ",m.xi3(44,11,t.profile.current_period_end,"dd/MM/yyyy"),""),m.xp6(3),m.Q6J("ngForOf",t.profile.plan.perks),m.xp6(2),m.Q6J("disabled","administrator"!=(null==t.currentUser||null==t.currentUser.role?null:t.currentUser.role.type))}}let Mr=(()=>{class t{constructor(t,n){this.http=t,this.authenticationService=n,this.matStars={empty:`${x.N.basehref}assets/images/star_outline.svg`,half:`${x.N.basehref}assets/images/star_half.svg`,full:`${x.N.basehref}assets/images/star.svg`},this.currentUser=this.authenticationService.currentUserValue}ngOnInit(){this.loadProfile(),this.countRequested(),this.countAccepted(),this.countRejected()}loadProfile(){this.http.get(`${x.N.apiUrl}/companies/profile`).subscribe(t=>{this.profile=t},t=>{})}countRequested(){let t=new i.LE;this.http.get(`${x.N.apiUrl}/quotations/count`,{params:t}).subscribe(t=>{this.requested=t})}countAccepted(){let t=(new i.LE).append("status_in",5).append("status_in",7);this.http.get(`${x.N.apiUrl}/quotations/count`,{params:t}).subscribe(t=>{this.accepted=t})}countRejected(){let t=(new i.LE).append("status_in",4).append("status_in",6);this.http.get(`${x.N.apiUrl}/quotations/count`,{params:t}).subscribe(t=>{this.rejected=t})}exportReport(){let t=new i.LE;this.http.get(`${x.N.apiUrl}/companies/export-quotations-report`,{params:t,responseType:"blob",observe:"response"}).subscribe(t=>{var n=t.headers.get("content-disposition"),e=/"([^"]*)"/.exec(n),o=null!=e&&e[1]?e[1]:"quotations-export.xlsx";let a=t.body.type,r=[];r.push(t.body);let i=document.createElement("a");i.href=window.URL.createObjectURL(new Blob(r,{type:a})),o&&i.setAttribute("download",o),document.body.appendChild(i),i.click()})}publicUrl(t){return`${x.N.apiUrl}${t}`}assetUrl(t){return`${x.N.basehref}${t}`}getSubscriptionDate(){this.http.get(`${x.N.apiUrl}/companies/subscription_date`).subscribe(t=>{this.sub_end=1e3*t.current_period_start},t=>{})}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(C.$h))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-perfil"]],decls:17,vars:2,consts:[[1,"container-fluid","pt-5","px-md-5"],[1,"row","align-items-end"],[1,"col-lg","page-title"],[1,"col-lg","page-actions"],[1,"d-flex","flex-column","align-items-center","mb-2"],["mat-raised-button","","color","primary","routerLink","editar",1,"btn-round","btn-md",3,"disabled"],["id","card-perfil","class","app-modal-shadow py-4 mt-4",4,"ngIf"],[1,"row","justify-content-center","pt-4"],[1,"col-auto"],[1,"contact","text-center"],["href","mailto:contacto@exphotel.mx"],["id","card-perfil",1,"app-modal-shadow","py-4","mt-4"],[1,"row","flex-column","flex-md-row","justify-content-center","mb-3"],[1,"row","align-items-center"],[1,"col-auto","image-cont","pb-3","pb-md-2"],[3,"src"],[1,"col","detalles-cont"],[1,"titulo"],["inset",""],[1,"row","justify-content-evenly","gy-3","py-3","stats"],[1,"col-auto","stat"],["svgIcon","cotizacion-pending"],[1,"mx-3"],["svgIcon","cotizacion-active"],["svgIcon","cotizacion-reject"],["mat-flat-button","",3,"click"],[1,"row","justify-content-center","align-items-center","gx-4","py-3","plan"],[1,"col-auto","plan-info"],[1,"plan-tipo"],[1,"plan-precio"],[4,"ngIf"],[1,"plan-duracion"],[1,"col-auto","plan-perks","dense"],[3,"hidden",4,"ngFor","ngForOf"],[1,"col-auto","plan-btn"],["mat-flat-button","","color","accent","routerLink","plan",1,"btn-round",3,"disabled"],[3,"hidden"],["matListIcon",""]],template:function(t,n){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m._UZ(2,"div",2),m.TgZ(3,"div",3),m.TgZ(4,"div",4),m.TgZ(5,"button",5),m.TgZ(6,"mat-icon"),m._uU(7,"edit"),m.qZA(),m._uU(8," Editar mi Perfil "),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.YNc(9,Cr,50,14,"mat-card",6),m.TgZ(10,"div",7),m.TgZ(11,"div",8),m.TgZ(12,"p",9),m._uU(13,"S\xed deseas cancelar tu cuenta , manda un email a "),m._UZ(14,"br"),m.TgZ(15,"a",10),m._uU(16,"contacto@exphotel.mx"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(5),m.Q6J("disabled","administrator"!=(null==n.currentUser||null==n.currentUser.role?null:n.currentUser.role.type)),m.xp6(4),m.Q6J("ngIf",n.profile))},directives:[v.lW,a.rH,b.Hw,o.O5,O.a8,O.dn,Y.d,I.i$,o.sg,I.Tg,I.Nh],pipes:[o.uU,o.H9],styles:["mat-card[_ngcontent-%COMP%]{box-shadow:0 5px 5px #4094ab3d!important;border-radius:31px}mat-card[_ngcontent-%COMP%]   .image-cont[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-card[_ngcontent-%COMP%]   .image-cont[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:120px;border:1px solid #97bcc566;border-radius:100px;filter:drop-shadow(0 5px 5px rgba(64,148,171,.24))}mat-card[_ngcontent-%COMP%]   .detalles-cont[_ngcontent-%COMP%]   .breadcrumbs[_ngcontent-%COMP%]{margin-bottom:.5em;font-family:Montserrat;font-style:normal;font-weight:600;font-size:14px;line-height:17px;color:#00aad3}mat-card[_ngcontent-%COMP%]   .detalles-cont[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{margin-bottom:.3em;font-family:Montserrat;font-style:normal;font-weight:700;font-size:18px;line-height:30px;color:#062ebd}mat-card[_ngcontent-%COMP%]   .detalles-cont[_ngcontent-%COMP%]   .ratings[_ngcontent-%COMP%]{display:flex;align-items:center}mat-card[_ngcontent-%COMP%]   .detalles-cont[_ngcontent-%COMP%]   .ratings[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:500;font-size:11px;line-height:13px;color:#999d9e}mat-card[_ngcontent-%COMP%]   .detalles-cont[_ngcontent-%COMP%]   .descripcion-corta[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:500;font-size:12px;line-height:15px;color:#999d9e}mat-card[_ngcontent-%COMP%]   .detalles-cont[_ngcontent-%COMP%]   .descripcion-corta[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00aad3}mat-card[_ngcontent-%COMP%]   .pm-row[_ngcontent-%COMP%]   h4.row-title[_ngcontent-%COMP%]{margin-bottom:.75em;font-family:Montserrat;font-style:normal;font-weight:700;font-size:11px;line-height:13px;color:#5a6a6f}mat-card[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center}mat-card[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:50px;height:47px}mat-card[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px;line-height:29px;color:#00aad3}mat-card[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:600}mat-card[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{max-width:100px;font-size:14px;line-height:17px;color:#5a6a6f}mat-card[_ngcontent-%COMP%]   .plan[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]{text-align:center}mat-card[_ngcontent-%COMP%]   .plan[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-tipo[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:18px;line-height:22px;color:var(--app-blue-cyan);margin-bottom:5px}mat-card[_ngcontent-%COMP%]   .plan[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-precio[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:24px;line-height:29px;margin-bottom:5px;color:var(--app-amarillo-claro)}mat-card[_ngcontent-%COMP%]   .plan[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-duracion[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:500;font-size:11px;line-height:13px;color:var(--app-gris-muy-oscuro);margin-bottom:0;max-width:150px}mat-card[_ngcontent-%COMP%]   .plan[_ngcontent-%COMP%]   mat-list.plan-perks[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:auto;font-family:Montserrat;font-style:normal;font-weight:500;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}mat-card[_ngcontent-%COMP%]   .plan[_ngcontent-%COMP%]   mat-list.plan-perks[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]     .mat-list-item-content{padding:0}mat-card[_ngcontent-%COMP%]   .plan[_ngcontent-%COMP%]   mat-list.plan-perks[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--app-cyan)}mat-card[_ngcontent-%COMP%]   .plan[_ngcontent-%COMP%]   .plan-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px}.contact[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:500;font-size:11px;line-height:13px;color:#5a6a6f}.contact[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00aad3}"]}),t})();function qr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese nombre de usuario."),m.qZA())}function xr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Nombre de usuario invalido."),m.qZA())}function Or(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Nombre de usuario no disponible."),m.qZA())}function vr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Error de conexion al servidor."),m.qZA())}function br(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese direccion de correo electronico."),m.qZA())}function Pr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese direccion de correo electronico valida."),m.qZA())}function Ar(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Direccion de correo electronico no disponible."),m.qZA())}function Tr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Confirmar direccion de correo electronico."),m.qZA())}function wr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese direccion de correo electronico valida."),m.qZA())}function yr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Direcciones de correo electronico no coinciden."),m.qZA())}function Ur(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese contrase\xf1a."),m.qZA())}function Nr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Contrase\xf1a muy corta, ingrese al menos 6 caracteres."),m.qZA())}function kr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Confirmar contrase\xf1a."),m.qZA())}function Jr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Las contrase\xf1as no coinciden."),m.qZA())}function Qr(t,n){if(1&t&&(m.TgZ(0,"section",64),m.TgZ(1,"div",65),m.TgZ(2,"div",25),m.TgZ(3,"label",66),m._uU(4," Nombre de Usuario"),m.TgZ(5,"span",16),m._uU(6,"*"),m.qZA(),m.TgZ(7,"mat-icon",67),m._uU(8,"info"),m.qZA(),m.qZA(),m.TgZ(9,"mat-form-field",17),m._UZ(10,"input",68),m.YNc(11,qr,2,0,"mat-error",11),m.YNc(12,xr,2,0,"mat-error",11),m.YNc(13,Or,2,0,"mat-error",11),m.YNc(14,vr,2,0,"mat-error",11),m.qZA(),m.qZA(),m.qZA(),m.TgZ(15,"div",65),m.TgZ(16,"div",25),m.TgZ(17,"label",69),m._uU(18,"Correo electr\xf3nico"),m.TgZ(19,"span",16),m._uU(20,"*"),m.qZA(),m.qZA(),m.TgZ(21,"mat-form-field",17),m._UZ(22,"input",70),m.YNc(23,br,2,0,"mat-error",11),m.YNc(24,Pr,2,0,"mat-error",11),m.YNc(25,Ar,2,0,"mat-error",11),m.qZA(),m.qZA(),m.TgZ(26,"div",25),m.TgZ(27,"label",71),m._uU(28,"Confirmar Correo electr\xf3nico"),m.TgZ(29,"span",16),m._uU(30,"*"),m.qZA(),m.qZA(),m.TgZ(31,"mat-form-field",17),m._UZ(32,"input",72),m.YNc(33,Tr,2,0,"mat-error",11),m.YNc(34,wr,2,0,"mat-error",11),m.YNc(35,yr,2,0,"mat-error",11),m.qZA(),m.qZA(),m.qZA(),m.TgZ(36,"div",65),m.TgZ(37,"div",25),m.TgZ(38,"label",73),m._uU(39,"Contrase\xf1a"),m.TgZ(40,"span",16),m._uU(41,"*"),m.qZA(),m.qZA(),m.TgZ(42,"mat-form-field",17),m._UZ(43,"input",74),m.YNc(44,Ur,2,0,"mat-error",11),m.YNc(45,Nr,2,0,"mat-error",11),m.qZA(),m.qZA(),m.TgZ(46,"div",25),m.TgZ(47,"label",75),m._uU(48,"Confirmar Contrase\xf1a"),m.TgZ(49,"span",16),m._uU(50,"*"),m.qZA(),m.qZA(),m.TgZ(51,"mat-form-field",17),m._UZ(52,"input",76),m.YNc(53,kr,2,0,"mat-error",11),m.YNc(54,Jr,2,0,"mat-error",11),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.oxw(2);let n,e,o,a,r,i,c,l,s,u,g,d,p,f;m.Q6J("formGroup",t.userGroup),m.xp6(11),m.Q6J("ngIf",null==(n=t.userGroup.get("username"))?null:n.hasError("required")),m.xp6(1),m.Q6J("ngIf",null==(e=t.userGroup.get("username"))?null:e.hasError("pattern")),m.xp6(1),m.Q6J("ngIf",null==(o=t.userGroup.get("username"))?null:o.hasError("unique")),m.xp6(1),m.Q6J("ngIf",null==(a=t.userGroup.get("username"))?null:a.hasError("connection")),m.xp6(9),m.Q6J("ngIf",null==(r=t.userGroup.get("email"))?null:r.hasError("required")),m.xp6(1),m.Q6J("ngIf",(null==(i=t.userGroup.get("email"))?null:i.hasError("email"))||(null==(i=t.userGroup.get("email"))?null:i.hasError("pattern"))),m.xp6(1),m.Q6J("ngIf",null==(c=t.userGroup.get("email"))?null:c.hasError("unique")),m.xp6(8),m.Q6J("ngIf",null==(l=t.userGroup.get("re_email"))?null:l.hasError("required")),m.xp6(1),m.Q6J("ngIf",null==(s=t.userGroup.get("re_email"))?null:s.hasError("email")),m.xp6(1),m.Q6J("ngIf",null==(u=t.userGroup.get("re_email"))?null:u.hasError("mustMatch")),m.xp6(9),m.Q6J("ngIf",null==(g=t.userGroup.get("password"))?null:g.hasError("required")),m.xp6(1),m.Q6J("ngIf",null==(d=t.userGroup.get("password"))?null:d.hasError("minlength")),m.xp6(8),m.Q6J("ngIf",null==(p=t.userGroup.get("re_password"))?null:p.hasError("required")),m.xp6(1),m.Q6J("ngIf",null==(f=t.userGroup.get("re_password"))?null:f.hasError("mustMatch"))}}function Ir(t,n){1&t&&m._UZ(0,"mat-divider")}function Yr(t,n){if(1&t&&(m.TgZ(0,"mat-option",77),m._uU(1),m.qZA()),2&t){const t=n.$implicit;m.Q6J("value",t.id),m.xp6(1),m.Oqu(t.name)}}function Sr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Seleccione el tipo de su empresa."),m.qZA())}function zr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Agregue una descripci\xf3n de su empresa."),m.qZA())}function Fr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese nombre comercial de su empresa."),m.qZA())}function Dr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese RFC."),m.qZA())}function $r(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese nombre del representate."),m.qZA())}function Br(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese raz\xf3n social."),m.qZA())}function Er(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese calle y numero."),m.qZA())}function Lr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese numero interior."),m.qZA())}function jr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese codigo postal."),m.qZA())}function Hr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese pa\xeds."),m.qZA())}function Gr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese estado."),m.qZA())}function Rr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese ciudad."),m.qZA())}function Vr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese municipio."),m.qZA())}function Xr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese colonia."),m.qZA())}function Wr(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Ingrese tel\xe9fono"),m.qZA())}function Kr(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"div",5),m.TgZ(1,"form",6),m.TgZ(2,"div",7),m.TgZ(3,"div",8),m._UZ(4,"app-file-field",9),m.qZA(),m.qZA(),m._UZ(5,"mat-divider"),m.YNc(6,Qr,55,15,"section",10),m.YNc(7,Ir,1,0,"mat-divider",11),m.TgZ(8,"div",12),m.TgZ(9,"div",13),m.TgZ(10,"div",14),m.TgZ(11,"label",15),m._uU(12,"Tipo de empresa"),m.TgZ(13,"span",16),m._uU(14,"*"),m.qZA(),m.qZA(),m.TgZ(15,"mat-form-field",17),m.TgZ(16,"mat-select",18),m.YNc(17,Yr,2,2,"mat-option",19),m.qZA(),m.YNc(18,Sr,2,0,"mat-error",11),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m._UZ(19,"mat-divider"),m.TgZ(20,"div",12),m.TgZ(21,"div",20),m.TgZ(22,"label",21),m._uU(23,"Descripci\xf3n"),m.TgZ(24,"span",16),m._uU(25,"*"),m.qZA(),m.qZA(),m.TgZ(26,"mat-form-field",17),m._UZ(27,"textarea",22),m.YNc(28,zr,2,0,"mat-error",11),m.qZA(),m.qZA(),m.qZA(),m._UZ(29,"mat-divider"),m.TgZ(30,"section",23),m.TgZ(31,"div",24),m.TgZ(32,"div",25),m.TgZ(33,"label",26),m._uU(34,"Nombre comercial"),m.TgZ(35,"span",16),m._uU(36,"*"),m.qZA(),m.qZA(),m.TgZ(37,"mat-form-field",17),m._UZ(38,"input",27),m.YNc(39,Fr,2,0,"mat-error",11),m.qZA(),m.qZA(),m.TgZ(40,"div",25),m.TgZ(41,"label",28),m._uU(42,"RFC"),m.TgZ(43,"span",16),m._uU(44,"*"),m.qZA(),m.qZA(),m.TgZ(45,"mat-form-field",17),m._UZ(46,"input",29),m.YNc(47,Dr,2,0,"mat-error",11),m.qZA(),m.qZA(),m.qZA(),m.TgZ(48,"div",24),m.TgZ(49,"div",25),m.TgZ(50,"label",30),m._uU(51,"Nombre del representante de la empresa"),m.TgZ(52,"span",16),m._uU(53,"*"),m.qZA(),m.TgZ(54,"mat-icon",31),m._uU(55,"info"),m.qZA(),m.qZA(),m.TgZ(56,"mat-form-field",17),m._UZ(57,"input",32),m.YNc(58,$r,2,0,"mat-error",11),m.qZA(),m.qZA(),m.TgZ(59,"div",25),m.TgZ(60,"label",33),m._uU(61,"Raz\xf3n social"),m.TgZ(62,"span",16),m._uU(63,"*"),m.qZA(),m.qZA(),m.TgZ(64,"mat-form-field",17),m._UZ(65,"input",34),m.YNc(66,Br,2,0,"mat-error",11),m.qZA(),m.qZA(),m.qZA(),m.TgZ(67,"div",24),m.TgZ(68,"div",25),m.TgZ(69,"label",35),m._uU(70,"Calle y N\xfamero"),m.TgZ(71,"span",16),m._uU(72,"*"),m.qZA(),m.qZA(),m.TgZ(73,"mat-form-field",17),m._UZ(74,"input",36),m.YNc(75,Er,2,0,"mat-error",11),m.qZA(),m.qZA(),m.TgZ(76,"div",37),m.TgZ(77,"div",38),m.TgZ(78,"div",39),m.TgZ(79,"label",40),m._uU(80,"N\xb0 Interior"),m.qZA(),m.TgZ(81,"mat-form-field",17),m._UZ(82,"input",41),m.YNc(83,Lr,2,0,"mat-error",11),m.qZA(),m.qZA(),m.TgZ(84,"div",39),m.TgZ(85,"label",42),m._uU(86,"C.P."),m.TgZ(87,"span",16),m._uU(88,"*"),m.qZA(),m.qZA(),m.TgZ(89,"mat-form-field",17),m._UZ(90,"input",43),m.YNc(91,jr,2,0,"mat-error",11),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(92,"div",44),m.TgZ(93,"div",45),m.TgZ(94,"label",46),m._uU(95,"Pa\xeds"),m.TgZ(96,"span",16),m._uU(97,"*"),m.qZA(),m.qZA(),m.TgZ(98,"mat-form-field",17),m._UZ(99,"input",47),m.YNc(100,Hr,2,0,"mat-error",11),m.qZA(),m.qZA(),m.TgZ(101,"div",45),m.TgZ(102,"label",48),m._uU(103,"Estado"),m.TgZ(104,"span",16),m._uU(105,"*"),m.qZA(),m.qZA(),m.TgZ(106,"mat-form-field",17),m._UZ(107,"input",49),m.YNc(108,Gr,2,0,"mat-error",11),m.qZA(),m.qZA(),m.TgZ(109,"div",45),m.TgZ(110,"label",50),m._uU(111,"Ciudad"),m.TgZ(112,"span",16),m._uU(113,"*"),m.qZA(),m.qZA(),m.TgZ(114,"mat-form-field",17),m._UZ(115,"input",51),m.YNc(116,Rr,2,0,"mat-error",11),m.qZA(),m.qZA(),m.qZA(),m.TgZ(117,"div",44),m.TgZ(118,"div",45),m.TgZ(119,"label",52),m._uU(120,"Municipio"),m.TgZ(121,"span",16),m._uU(122,"*"),m.qZA(),m.qZA(),m.TgZ(123,"mat-form-field",17),m._UZ(124,"input",53),m.YNc(125,Vr,2,0,"mat-error",11),m.qZA(),m.qZA(),m.TgZ(126,"div",45),m.TgZ(127,"label",54),m._uU(128,"Colonia"),m.TgZ(129,"span",16),m._uU(130,"*"),m.qZA(),m.qZA(),m.TgZ(131,"mat-form-field",17),m._UZ(132,"input",55),m.YNc(133,Xr,2,0,"mat-error",11),m.qZA(),m.qZA(),m.TgZ(134,"div",45),m.TgZ(135,"label",56),m._uU(136,"T\xe9lefono"),m.TgZ(137,"span",16),m._uU(138,"*"),m.qZA(),m.qZA(),m.TgZ(139,"mat-form-field",17),m._UZ(140,"input",57),m.YNc(141,Wr,2,0,"mat-error",11),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m._UZ(142,"mat-divider"),m.TgZ(143,"div",58),m.TgZ(144,"div",59),m._UZ(145,"app-file-field",60),m.qZA(),m.qZA(),m._UZ(146,"mat-divider"),m.TgZ(147,"div",61),m.TgZ(148,"button",62),m._uU(149,"Cancelar"),m.qZA(),m.TgZ(150,"button",63),m.NdJ("click",function(){return m.CHM(t),m.oxw().onSubmit()}),m._uU(151,"Guardar"),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();let n,e,o,a,r,i,c,l,s,u,g,d,p,f,h;m.xp6(1),m.Q6J("formGroup",t.formGroup),m.xp6(3),m.Q6J("form",t.formGroup)("showPreview",!0)("filePlaceholder",t.profile.profile_picture),m.xp6(2),m.Q6J("ngIf",t.userGroup),m.xp6(1),m.Q6J("ngIf",t.userGroup),m.xp6(10),m.Q6J("ngForOf",t.types),m.xp6(1),m.Q6J("ngIf",null==(n=t.formGroup.get("type"))?null:n.hasError("required")),m.xp6(10),m.Q6J("ngIf",null==(e=t.formGroup.get("description"))?null:e.hasError("required")),m.xp6(11),m.Q6J("ngIf",null==(o=t.formGroup.get("name"))?null:o.hasError("required")),m.xp6(8),m.Q6J("ngIf",null==(a=t.formGroup.get("rfc"))?null:a.hasError("required")),m.xp6(11),m.Q6J("ngIf",null==(r=t.formGroup.get("representative_name"))?null:r.hasError("required")),m.xp6(8),m.Q6J("ngIf",null==(i=t.formGroup.get("business_name"))?null:i.hasError("required")),m.xp6(9),m.Q6J("ngIf",null==(c=t.formGroup.get("address"))?null:c.hasError("required")),m.xp6(8),m.Q6J("ngIf",null==(l=t.formGroup.get("interior_number"))?null:l.hasError("required")),m.xp6(8),m.Q6J("ngIf",null==(s=t.formGroup.get("postal_code"))?null:s.hasError("required")),m.xp6(9),m.Q6J("ngIf",null==(u=t.formGroup.get("country"))?null:u.hasError("required")),m.xp6(8),m.Q6J("ngIf",null==(g=t.formGroup.get("state"))?null:g.hasError("required")),m.xp6(8),m.Q6J("ngIf",null==(d=t.formGroup.get("city"))?null:d.hasError("required")),m.xp6(9),m.Q6J("ngIf",null==(p=t.formGroup.get("municipality"))?null:p.hasError("required")),m.xp6(8),m.Q6J("ngIf",null==(f=t.formGroup.get("neighborhood"))?null:f.hasError("required")),m.xp6(8),m.Q6J("ngIf",null==(h=t.formGroup.get("phone"))?null:h.hasError("required")),m.xp6(4),m.Q6J("form",t.formGroup)("showStatus",!0)("filePlaceholder",t.profile.representative_id),m.xp6(5),m.Q6J("disabled",t.wait)}}let ti=(()=>{class t{constructor(t,n,e,o,a,r){this.http=t,this.router=n,this.formBuilder=e,this.authenticationService=o,this.uniqueUsername=a,this.uniqueEmail=r,this.types=[],this.wait=!1}get userGroup(){return this.formGroup.get("userGroup")}ngOnInit(){this.loadTypesList(),this.loadProfile()}loadProfile(){this.http.get(`${x.N.apiUrl}/companies/profile`).subscribe(t=>{this.profile=t,this.initForm()},t=>{})}loadTypesList(){this.http.get(`${x.N.apiUrl}/company-types`).subscribe(t=>{this.types=t},t=>{})}initForm(){this.formGroup=this.formBuilder.group({profile_picture:[null],profile_picture_source:[null],type:[this.profile.type,[r.kI.required]],description:[this.profile.description,[r.kI.required]],name:[this.profile.name,[r.kI.required]],rfc:[this.profile.rfc,[r.kI.required]],representative_name:[this.profile.representative_name,[r.kI.required]],business_name:[this.profile.business_name,[r.kI.required]],address:[this.profile.address,[r.kI.required]],interior_number:[this.profile.interior_number],postal_code:[this.profile.postal_code,[r.kI.required]],country:[this.profile.country,[r.kI.required]],state:[this.profile.state,[r.kI.required]],city:[this.profile.city,[r.kI.required]],municipality:[this.profile.municipality,[r.kI.required]],neighborhood:[this.profile.neighborhood,[r.kI.required]],phone:[this.profile.phone,[r.kI.required]],representative_id:[null],representative_id_source:[null]}),this.formGroup.controls.representative_id.setValidators(this.profile.representative_id?null:[r.kI.required]),this.formGroup.updateValueAndValidity()}onSubmit(){var t,n,e,o,a,r;if(console.log("validating..."),this.formGroup.invalid)return console.log("form invalid"),console.log(this.formGroup.errors),void this.markFormGroupTouched(this.formGroup);console.log("submiting form...");const i=new FormData,c=this.formGroup.getRawValue();delete c.profile_picture,delete c.profile_picture_source,delete c.representative_id,delete c.representative_id_source,i.append("data",JSON.stringify(c)),(null===(t=this.formGroup.get("profile_picture"))||void 0===t?void 0:t.value)&&i.append("files.profile_picture",null===(n=this.formGroup.get("profile_picture_source"))||void 0===n?void 0:n.value,null===(e=this.formGroup.get("profile_picture"))||void 0===e?void 0:e.value.split("\\").pop()),(null===(o=this.formGroup.get("representative_id"))||void 0===o?void 0:o.value)&&i.append("files.representative_id",null===(a=this.formGroup.get("representative_id_source"))||void 0===a?void 0:a.value,null===(r=this.formGroup.get("representative_id"))||void 0===r?void 0:r.value.split("\\").pop()),this.wait=!0,this.http.put(`${x.N.apiUrl}/companies/${this.profile.id}`,i).subscribe(t=>{this.wait=!1,console.log(t),this.router.navigateByUrl("/empresas/perfil")},t=>{this.wait=!1,console.log(t)})}controlAsFormGroup(t){return t}markFormGroupTouched(t){Object.values(t.controls).forEach(t=>{t.markAsTouched(),t.controls&&this.markFormGroupTouched(t)})}toggleSelection(t){t.toggleSelected(!0)}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(a.F0),m.Y36(r.qu),m.Y36(C.$h),m.Y36(zo.CM),m.Y36(zo.qz))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-perfil-editar"]],decls:9,vars:1,consts:[[1,"container-fluid","pt-5","px-md-5"],[1,"row","align-items-end"],[1,"col-lg","page-title"],[1,"col-lg","page-actions"],["class","container px-md-5",4,"ngIf"],[1,"container","px-md-5"],[1,"edit-form","py-4","px-lg-5",3,"formGroup"],[1,"row","py-3"],[1,"col-auto","mx-auto"],["field","profile_picture","placeholder","Adjuntar Foto de perf\xedl","hint","Jpg, Png.- 150X150px*","accept","image/png, image/jpeg","direction","row",1,"profile-picture",3,"form","showPreview","filePlaceholder"],["class","py-4",3,"formGroup",4,"ngIf"],[4,"ngIf"],[1,"row","py-4","px-lg-4"],[1,"row"],[1,"form-group","col-auto","mx-auto","text-center"],["for","type",1,"form-label"],[1,"input-req"],["appearance","outline"],["id","type","formControlName","type","placeholder","Tipo de empresa"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","col-12"],["for","description",1,"form-label"],["matInput","","id","description","formControlName","description","rows","6","placeholder","A\xf1ade informaci\xf3n general y cetificaciones para tus posibles clientes"],[1,"py-4","px-lg-4"],[1,"row","gx-5","pe-lg-4"],[1,"form-group","col-md-6"],["for","name",1,"form-label"],["matInput","","id","name","formControlName","name","placeholder","Nombre"],["for","rfc",1,"form-label"],["matInput","","id","rfc","formControlName","rfc","placeholder","RFC"],["for","representative_name",1,"form-label"],["aria-hidden","false","matTooltip","La persona que estar\xe1 a cargo de la cuenta en ExpoHotel Hive y con la que contactaremos en caso de alg\xfan inconveniente.","matTooltipPosition","above",1,"input-info"],["matInput","","id","representative_name","formControlName","representative_name","placeholder","Nombre del representante"],["for","business_name",1,"form-label"],["matInput","","id","business_name","formControlName","business_name","placeholder","Raz\xf3n social"],["for","address",1,"form-label"],["matInput","","id","address","formControlName","address","placeholder","Calle y N\xfamero"],[1,"col-md-6"],[1,"row","gx-3","pe-lg-5"],[1,"form-group","col-6"],["for","interior_number",1,"form-label"],["matInput","","id","interior_number","formControlName","interior_number","placeholder","00"],["for","postal_code",1,"form-label"],["matInput","","id","postal_code","formControlName","postal_code","placeholder","00000"],[1,"row","gx-3"],[1,"form-group","col-md-4"],["for","country",1,"form-label"],["matInput","","id","country","formControlName","country","placeholder","Pa\xeds"],["for","state",1,"form-label"],["matInput","","id","state","formControlName","state","placeholder","Estado"],["for","city",1,"form-label"],["matInput","","id","city","formControlName","city","placeholder","Ciudad"],["for","municipality",1,"form-label"],["matInput","","id","municipality","formControlName","municipality","placeholder","Municipio"],["for","neighborhood",1,"form-label"],["matInput","","id","neighborhood","formControlName","neighborhood","placeholder","Colonia"],["for","phone",1,"form-label"],["matInput","","id","phone","formControlName","phone","placeholder","T\xe9lefono"],[1,"row","justify-content-evenly","gx-4","gy-2","py-4"],[1,"col-auto"],["field","representative_id","placeholder","ID del representante legal","hint","PDF, JPG o PNG","accept","image/png, image/jpeg, application/pdf","direction","col",3,"form","showStatus","filePlaceholder"],[1,"d-flex","justify-content-between","py-5","px-lg-4","btn-row"],["type","button","mat-flat-button","","color","primary","routerLink","..",1,"btn-round","btn-sm"],["type","button","mat-flat-button","","color","accent",1,"btn-round","btn-sm",3,"disabled","click"],[1,"py-4",3,"formGroup"],[1,"row","gx-5","px-lg-4"],["for","username",1,"form-label"],["aria-hidden","false","matTooltip","Entre 6 y 20 caracteres (letras a-z, numeros 0-9 y caracteres -_ )","matTooltipPosition","above",1,"input-info"],["matInput","","type","text","id","username","formControlName","username","placeholder","Usuario"],["for","email",1,"form-label"],["matInput","","type","email","id","email","formControlName","email","placeholder","Corrreo@correo.mx"],["for","re_email",1,"form-label"],["matInput","","type","email","id","re_email","formControlName","re_email","placeholder","Corrreo@correo.mx"],["for","password",1,"form-label"],["matInput","","type","password","id","password","formControlName","password","placeholder","***********"],["for","re_password",1,"form-label"],["matInput","","type","password","id","re_password","formControlName","re_password","placeholder","***********"],[3,"value"]],template:function(t,n){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"h1"),m._uU(4,"Editar mi pef\xedl"),m.qZA(),m.TgZ(5,"p"),m._uU(6,"Modifica los datos de tu cuenta"),m.qZA(),m.qZA(),m._UZ(7,"div",3),m.qZA(),m.qZA(),m.YNc(8,Kr,152,26,"div",4)),2&t&&(m.xp6(8),m.Q6J("ngIf",n.formGroup))},directives:[o.O5,r._Y,r.JL,r.sg,yn.O,Y.d,pt.KE,ht.gD,r.JJ,r.u,o.sg,ft.Nt,r.Fj,b.Hw,Fo.gM,v.lW,a.rH,pt.TO,S.ey],styles:[".edit-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:not(.text-center)   label[_ngcontent-%COMP%]{margin-left:.5em;margin-right:-1.6em}.edit-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}.edit-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span.input-req[_ngcontent-%COMP%]{margin-left:.3em;color:var(--app-rojo)}.edit-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   mat-icon.input-info[_ngcontent-%COMP%]{margin-left:.3em;width:auto;height:auto;font-size:15px;line-height:1em;vertical-align:middle;color:var(--app-cyan)}.edit-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.edit-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .mat-error[_ngcontent-%COMP%]{margin-top:.6666666667em;font-family:Montserrat;font-style:normal;font-weight:400;font-size:9px;color:#f44336}.edit-form[_ngcontent-%COMP%]   .btn-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:130px}app-file-field.profile-picture[_ngcontent-%COMP%]  .preview{width:145px!important;min-width:145px!important;height:145px!important}app-file-field.profile-picture[_ngcontent-%COMP%]  .field{width:-webkit-fill-available}@media (min-width:1200px){app-file-field.profile-picture[_ngcontent-%COMP%]  .field{width:240px}}app-file-field.profile-picture[_ngcontent-%COMP%]  .status.order-last{margin-bottom:20px}"]}),t})();var ni=e(3914);function ei(t,n){1&t&&(m.ynx(0),m._uU(1,"Gratis"),m.BQk())}function oi(t,n){if(1&t&&(m.ynx(0),m._uU(1),m.ALo(2,"currency"),m.BQk()),2&t){const t=m.oxw().$implicit;m.xp6(1),m.Oqu(m.lcZ(2,1,t.price))}}function ai(t,n){if(1&t&&(m.TgZ(0,"mat-list-item",28),m.TgZ(1,"mat-icon",29),m._uU(2,"check_circle"),m.qZA(),m._uU(3),m.qZA()),2&t){const t=n.$implicit;m.Q6J("hidden",t.target&&"company"!=t.target),m.xp6(3),m.hij("",t.description," ")}}function ri(t,n){if(1&t&&(m.TgZ(0,"div",19),m.TgZ(1,"mat-card",20),m.TgZ(2,"div",21),m.TgZ(3,"h5",22),m._uU(4),m.qZA(),m.TgZ(5,"h4",23),m.YNc(6,ei,2,0,"ng-container",8),m.YNc(7,oi,3,3,"ng-container",8),m.qZA(),m.TgZ(8,"p",24),m._uU(9),m.qZA(),m.TgZ(10,"mat-list",25),m.YNc(11,ai,4,2,"mat-list-item",26),m.qZA(),m.qZA(),m.TgZ(12,"mat-button-toggle",27),m._uU(13,"Elegir"),m.qZA(),m.qZA(),m.qZA()),2&t){const t=n.$implicit,e=m.oxw(3);let o;m.xp6(1),m.ekj("selected",(null==(o=e.renewForm.get("price"))?null:o.value)==t.id),m.xp6(3),m.Oqu(t.plan.name),m.xp6(2),m.Q6J("ngIf",0==t.price),m.xp6(1),m.Q6J("ngIf",t.price>0),m.xp6(2),m.Oqu(t.duration),m.xp6(2),m.Q6J("ngForOf",t.plan.perks),m.xp6(1),m.Q6J("value",t.id)("disabled",t.id==(null==e.currentUser.company?null:e.currentUser.company.price))}}function ii(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Selecciona un plan."),m.qZA())}function ci(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Selecciona un m\xe9todo de pago."),m.qZA())}function li(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"form",9),m.NdJ("ngSubmit",function(){return m.CHM(t),m.oxw(2).onSubmit()}),m.TgZ(1,"h5"),m._uU(2,"1: Selecciona un plan"),m.qZA(),m.TgZ(3,"div",10),m.TgZ(4,"mat-button-toggle-group",11),m.TgZ(5,"div",12),m.YNc(6,ri,14,9,"div",13),m.ALo(7,"orderBy"),m.qZA(),m.TgZ(8,"div",3),m.YNc(9,ii,2,0,"mat-error",8),m.qZA(),m.qZA(),m.qZA(),m.TgZ(10,"h5"),m._uU(11,"2: Selecciona un m\xe9todo de pago"),m.qZA(),m.TgZ(12,"div",10),m.TgZ(13,"app-stripe-card",14),m.NdJ("selectCard",function(n){return m.CHM(t),m.oxw(2).changeCard(n)}),m.qZA(),m.TgZ(14,"div",3),m.YNc(15,ci,2,0,"mat-error",8),m.qZA(),m.qZA(),m._UZ(16,"mat-divider",15),m.TgZ(17,"div",16),m.TgZ(18,"p"),m.TgZ(19,"mat-checkbox",17),m._uU(20,"Acepto los "),m.TgZ(21,"span",18),m.NdJ("click",function(n){return m.CHM(t),m.oxw(2).showTOS(n)}),m._uU(22,"T\xe9rminos y condiciones"),m.qZA(),m._uU(23," y el "),m.TgZ(24,"span",18),m.NdJ("click",function(n){return m.CHM(t),m.oxw(2).showPP(n)}),m._uU(25,"Aviso de privacidad"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(2);let n,e;m.Q6J("formGroup",t.renewForm),m.xp6(6),m.Q6J("ngForOf",m.xi3(7,4,t.plan_prices,"order")),m.xp6(3),m.Q6J("ngIf",(null==(n=t.renewForm.get("price"))?null:n.hasError("required"))&&(null==(n=t.renewForm.get("price"))?null:n.touched)),m.xp6(6),m.Q6J("ngIf",(null==(e=t.renewForm.get("paymentcard"))?null:e.hasError("required"))&&(null==(e=t.renewForm.get("paymentcard"))?null:e.touched))}}function si(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"div",32),m.TgZ(1,"button",33),m.NdJ("click",function(){return m.CHM(t),m.oxw(3).cancelSubscription()}),m._uU(2,"Cancelar renovaci\xf3n de suscripci\xf3n"),m.qZA(),m.qZA()}}function ui(t,n){if(1&t&&(m.ynx(0),m.TgZ(1,"div",30),m.YNc(2,si,3,0,"div",31),m.qZA(),m.BQk()),2&t){const t=m.oxw(2);m.xp6(2),m.Q6J("ngIf",null==t.currentUser.company?null:t.currentUser.company.auto_renew)}}function gi(t,n){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"div",2),m.TgZ(2,"mat-card",3),m.TgZ(3,"mat-card-title"),m._uU(4,"Modificar plan"),m.qZA(),m.TgZ(5,"mat-card-content"),m.TgZ(6,"p",4),m._uU(7,"Para modificar tu plan selecciona uno nuevo de la lista."),m.qZA(),m.YNc(8,li,26,7,"form",5),m.qZA(),m.TgZ(9,"mat-card-actions"),m.TgZ(10,"div",6),m.TgZ(11,"button",7),m.NdJ("click",function(){return m.CHM(t),m.oxw().onSubmit()}),m._uU(12,"Editar plan"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.YNc(13,ui,3,1,"ng-container",8),m.qZA(),m.BQk()}if(2&t){const t=m.oxw();m.xp6(8),m.Q6J("ngIf",t.renewForm),m.xp6(3),m.Q6J("disabled",t.wait),m.xp6(2),m.Q6J("ngIf","active"==(null==t.currentUser.company?null:t.currentUser.company.subscription_status)&&"recurring"==(null==t.currentPlanPrice?null:t.currentPlanPrice.type))}}function di(t,n){1&t&&(m.TgZ(0,"div",2),m.TgZ(1,"mat-card",3),m.TgZ(2,"mat-card-title"),m._uU(3,"Modificar plan"),m.qZA(),m.TgZ(4,"mat-card-content"),m.TgZ(5,"p",4),m._uU(6,"Para modificar tu plan comun\xedcate con tu administrador."),m.qZA(),m.qZA(),m.qZA(),m.qZA())}function mi(t,n){1&t&&(m.ynx(0),m.TgZ(1,"mat-card",4),m.TgZ(2,"mat-card-title"),m._uU(3,"Procesando pago"),m.qZA(),m.TgZ(4,"mat-card-content"),m.TgZ(5,"p",5),m._uU(6,"El pago de tu subscripci\xf3n esta siendo procesado, vuelve a intentarlo m\xe1s tarde."),m.qZA(),m.qZA(),m.qZA(),m.BQk())}function pi(t,n){if(1&t&&(m.TgZ(0,"p",5),m._uU(1,"Tu suscripci\xf3n expir\xf3 el d\xeda "),m.TgZ(2,"span",10),m._uU(3),m.ALo(4,"date"),m.qZA(),m._uU(5,", para continuar utilizando la plataforma suscr\xedbete a uno de nuestros planes:"),m.qZA()),2&t){const t=m.oxw(3);m.xp6(3),m.Oqu(m.xi3(4,1,null==t.currentUser.company?null:t.currentUser.company.current_period_end,"dd/MM/yyyy"))}}function fi(t,n){1&t&&(m.TgZ(0,"p",5),m._uU(1,"Ocurri\xf3 un error al procesar tu pago, selecciona un plan e intentalo nuevamente:"),m.qZA())}function hi(t,n){1&t&&(m.ynx(0),m._uU(1,"Gratis"),m.BQk())}function _i(t,n){if(1&t&&(m.ynx(0),m._uU(1),m.ALo(2,"currency"),m.BQk()),2&t){const t=m.oxw().$implicit;m.xp6(1),m.Oqu(m.lcZ(2,1,t.price))}}function Zi(t,n){if(1&t&&(m.TgZ(0,"mat-list-item",31),m.TgZ(1,"mat-icon",32),m._uU(2,"check_circle"),m.qZA(),m._uU(3),m.qZA()),2&t){const t=n.$implicit;m.Q6J("hidden",t.target&&"company"!=t.target),m.xp6(3),m.hij("",t.description," ")}}function Ci(t,n){if(1&t&&(m.TgZ(0,"div",22),m.TgZ(1,"mat-card",23),m.TgZ(2,"div",24),m.TgZ(3,"h5",25),m._uU(4),m.qZA(),m.TgZ(5,"h4",26),m.YNc(6,hi,2,0,"ng-container",16),m.YNc(7,_i,3,3,"ng-container",16),m.qZA(),m.TgZ(8,"p",27),m._uU(9),m.qZA(),m.TgZ(10,"mat-list",28),m.YNc(11,Zi,4,2,"mat-list-item",29),m.qZA(),m.qZA(),m.TgZ(12,"mat-button-toggle",30),m._uU(13,"Elegir"),m.qZA(),m.qZA(),m.qZA()),2&t){const t=n.$implicit,e=m.oxw(4);let o;m.xp6(1),m.ekj("selected",(null==(o=e.renewForm.get("price"))?null:o.value)==t.id),m.xp6(3),m.Oqu(t.plan.name),m.xp6(2),m.Q6J("ngIf",0==t.price),m.xp6(1),m.Q6J("ngIf",t.price>0),m.xp6(2),m.Oqu(t.duration),m.xp6(2),m.Q6J("ngForOf",t.plan.perks),m.xp6(1),m.Q6J("value",t.id)}}function Mi(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Selecciona un plan."),m.qZA())}function qi(t,n){1&t&&(m.TgZ(0,"mat-error"),m._uU(1,"Selecciona un m\xe9todo de pago."),m.qZA())}function xi(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"form",11),m.NdJ("ngSubmit",function(){return m.CHM(t),m.oxw(3).onSubmit()}),m.TgZ(1,"h5"),m._uU(2,"1: Selecciona un plan"),m.qZA(),m.TgZ(3,"div",12),m.TgZ(4,"mat-button-toggle-group",13),m.TgZ(5,"div",14),m.YNc(6,Ci,14,8,"div",15),m.ALo(7,"orderBy"),m.qZA(),m.TgZ(8,"div",4),m.YNc(9,Mi,2,0,"mat-error",16),m.qZA(),m.qZA(),m.qZA(),m.TgZ(10,"h5"),m._uU(11,"2: Selecciona un m\xe9todo de pago"),m.qZA(),m.TgZ(12,"div",12),m.TgZ(13,"app-stripe-card",17),m.NdJ("selectCard",function(n){return m.CHM(t),m.oxw(3).changeCard(n)}),m.qZA(),m.TgZ(14,"div",4),m.YNc(15,qi,2,0,"mat-error",16),m.qZA(),m.qZA(),m._UZ(16,"mat-divider",18),m.TgZ(17,"div",19),m.TgZ(18,"p"),m.TgZ(19,"mat-checkbox",20),m._uU(20,"Acepto los "),m.TgZ(21,"span",21),m.NdJ("click",function(n){return m.CHM(t),m.oxw(3).showTOS(n)}),m._uU(22,"T\xe9rminos y condiciones"),m.qZA(),m._uU(23," y el "),m.TgZ(24,"span",21),m.NdJ("click",function(n){return m.CHM(t),m.oxw(3).showPP(n)}),m._uU(25,"Aviso de privacidad"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(3);let n,e;m.Q6J("formGroup",t.renewForm),m.xp6(6),m.Q6J("ngForOf",m.xi3(7,4,t.plan_prices,"order")),m.xp6(3),m.Q6J("ngIf",(null==(n=t.renewForm.get("price"))?null:n.hasError("required"))&&(null==(n=t.renewForm.get("price"))?null:n.touched)),m.xp6(6),m.Q6J("ngIf",(null==(e=t.renewForm.get("paymentcard"))?null:e.hasError("required"))&&(null==(e=t.renewForm.get("paymentcard"))?null:e.touched))}}function Oi(t,n){if(1&t){const t=m.EpF();m.TgZ(0,"mat-card",4),m.TgZ(1,"mat-card-title"),m._uU(2,"Suscripci\xf3n expirada"),m.qZA(),m.TgZ(3,"mat-card-content"),m.YNc(4,pi,6,4,"p",6),m.YNc(5,fi,2,0,"p",6),m.YNc(6,xi,26,7,"form",7),m.qZA(),m.TgZ(7,"mat-card-actions"),m.TgZ(8,"div",8),m.TgZ(9,"button",9),m.NdJ("click",function(){return m.CHM(t),m.oxw(2).onSubmit()}),m._uU(10,"Editar plan"),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(2);m.xp6(4),m.Q6J("ngIf",t.isExpired()),m.xp6(1),m.Q6J("ngIf",!t.isExpired()),m.xp6(1),m.Q6J("ngIf",t.renewForm),m.xp6(3),m.Q6J("disabled",t.wait)}}function vi(t,n){if(1&t&&(m.ynx(0),m.TgZ(1,"div",2),m.YNc(2,mi,7,0,"ng-container",0),m.YNc(3,Oi,11,4,"ng-template",null,3,m.W1O),m.qZA(),m.BQk()),2&t){const t=m.MAs(4),n=m.oxw();m.xp6(2),m.Q6J("ngIf","draft"==(null==n.currentUser.company?null:n.currentUser.company.invoice_status)||"open"==(null==n.currentUser.company?null:n.currentUser.company.invoice_status))("ngIfElse",t)}}function bi(t,n){if(1&t&&(m.TgZ(0,"div",2),m.TgZ(1,"mat-card",4),m.TgZ(2,"mat-card-title"),m._uU(3,"Suscripci\xf3n expirada"),m.qZA(),m.TgZ(4,"mat-card-content"),m.TgZ(5,"p",5),m._uU(6,"Tu suscripci\xf3n expir\xf3 el d\xeda "),m.TgZ(7,"span",10),m._uU(8),m.ALo(9,"date"),m.qZA(),m._uU(10,", comun\xedcate con tu administrador para renovarla."),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.oxw();m.xp6(8),m.Oqu(m.xi3(9,1,null==t.currentUser.company?null:t.currentUser.company.current_period_end,"dd/MM/yyyy"))}}const Pi=[{path:"",component:q.$,canActivate:[M],data:{sidebar:"none"},children:[{path:"",component:k},{path:"bienvenido",component:Q},{path:"cotizador",component:fr}]},{path:"",component:q.$,canActivate:[M],data:{sidebar:"nav"},children:[{path:"perfil",component:Mr},{path:"perfil/editar",component:ti},{path:"perfil/plan",component:(()=>{class t{constructor(t,n,e,o,a,r,i){this.http=t,this.router=n,this.formBuilder=e,this.alert=o,this.authenticationService=a,this.spinner=r,this.documents=i,this.wait=!1,this.plan_prices=[],this.currentUser=this.authenticationService.currentUserValue}ngOnInit(){this.loadCurrentPlanPrice(),this.loadProfile(),this.loadPlansList(),this.initForms()}initForms(){this.renewForm=this.formBuilder.group({price:[null,[r.kI.required]],paymentcard:[null,[r.kI.required]],tos:[!1,[r.kI.requiredTrue]]})}loadProfile(){this.http.get(`${x.N.apiUrl}/companies/profile`).subscribe(t=>{this.profile=t},t=>{})}loadCurrentPlanPrice(){var t;let n=new i.LE;this.http.get(`${x.N.apiUrl}/plan-prices/${null===(t=this.currentUser.company)||void 0===t?void 0:t.price}`,{params:n}).subscribe(t=>{this.currentPlanPrice=t},t=>{})}loadPlansList(){let t=(new i.LE).set("target","company").set("type","recurring");this.http.get(`${x.N.apiUrl}/plan-prices`,{params:t}).subscribe(t=>{this.plan_prices=t},t=>{})}changeCard(t){var n;null===(n=this.renewForm.get("paymentcard"))||void 0===n||n.setValue(t)}onSubmit(){if(this.renewForm.invalid)return console.log("form invalid"),void this.renewForm.markAllAsTouched();const t=this.renewForm.getRawValue();this.wait=!0,this.spinner.show(),this.http.post(`${x.N.apiUrl}/companies/update-subscription`,t).subscribe(t=>{var n;this.wait=!1,this.spinner.hide(),this.authenticationService.setStorageUser(t),this.alert.open({title:"Suscripci\xf3n actualizada",text:`Tu suscripci\xf3n esta activa hasta el d\xeda ${Z(null===(n=t.company)||void 0===n?void 0:n.current_period_end).format("DD/MM/YYYY HH:mm")}.`,showCancelButton:!1}).then(()=>{this.router.navigateByUrl("/empresas/perfil")})},t=>{this.wait=!1,this.spinner.hide(),console.log(t)})}cancelSubscription(){var t;this.alert.open({title:"\xbfCancelar renovaci\xf3n de suscripci\xf3n?",text:`Tu suscripci\xf3n se cancelara al final de el periodo actual y permanecer\xe1 activa hasta el d\xeda ${Z(null===(t=this.currentUser.company)||void 0===t?void 0:t.current_period_end).format("DD/MM/YYYY HH:mm")}.`,showCancelButton:!0,cancelButtonText:"NO",confirmButtonText:"SI"}).then(t=>{t&&(this.spinner.show(),this.http.post(`${x.N.apiUrl}/companies/cancel-subscription`,{}).subscribe(t=>{var n;this.spinner.hide(),this.authenticationService.setStorageUser(t),this.alert.open({title:"Suscripci\xf3n actualizada",text:`Tu suscripci\xf3n esta activa hasta el d\xeda ${Z(null===(n=t.company)||void 0===n?void 0:n.current_period_end).format("DD/MM/YYYY HH:mm")}.`,showCancelButton:!1}).then(()=>{this.router.navigateByUrl("/empresas/perfil")})},t=>{this.spinner.hide(),console.log(t)}))})}showTOS(t){t.preventDefault(),this.documents.presentModal("terms-of-service")}showPP(t){t.preventDefault(),this.documents.presentModal("privacy-policy")}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(a.F0),m.Y36(r.qu),m.Y36(C.c9),m.Y36(C.$h),m.Y36(g.t2),m.Y36(C.SR))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-plan-editar"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["message_emloyee",""],[1,"container","pt-5","px-md-5"],[1,"text-center"],[1,"my-4"],["class","renew-form py-2 px-lg-5 text-center",3,"formGroup","ngSubmit",4,"ngIf"],[1,"btn-row","mb-4"],["mat-flat-button","","color","accent",1,"btn-round","btn-sm",3,"disabled","click"],[4,"ngIf"],[1,"renew-form","py-2","px-lg-5","text-center",3,"formGroup","ngSubmit"],[1,"form-group","mb-4"],["formControlName","price",1,"planes-group"],[1,"row","gx-4","planes-row","justify-content-center"],["class","col-auto mb-3",4,"ngFor","ngForOf"],[3,"selectCard"],["inset",""],[1,"checks-seccion","text-center","mt-4"],["formControlName","tos"],[3,"click"],[1,"col-auto","mb-3"],[1,"plan-card","text-center"],[1,"plan-info"],[1,"plan-tipo"],[1,"plan-precio"],[1,"plan-duracion"],["dense","",1,"plan-perks"],[3,"hidden",4,"ngFor","ngForOf"],["color","accent",1,"mx-4",3,"value","disabled"],[3,"hidden"],["matListIcon",""],[1,"row","justify-content-center","mt-3"],["class","col-auto",4,"ngIf"],[1,"col-auto"],["mat-stroked-button","",1,"btn-round","btn-xs",3,"click"]],template:function(t,n){if(1&t&&(m.YNc(0,gi,14,3,"ng-container",0),m.YNc(1,di,7,0,"ng-template",null,1,m.W1O)),2&t){const t=m.MAs(2);m.Q6J("ngIf","administrator"==n.currentUser.role.type)("ngIfElse",t)}},directives:[o.O5,O.a8,O.n5,O.dn,O.hq,v.lW,r._Y,r.JL,r.sg,_t.A9,r.JJ,r.u,o.sg,ni.p,Y.d,Zt.oG,I.i$,_t.Yi,I.Tg,b.Hw,I.Nh,pt.TO],pipes:[u.T,o.H9],styles:[".container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]{box-shadow:0 5px 5px #4094ab3d!important;border-radius:31px}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-weight:700;font-size:18px;line-height:22px;color:#00aad3}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;text-align:center}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;color:#5a6a6f}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span.date[_ngcontent-%COMP%]{font-weight:700;color:#00aad3}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:14px;line-height:17px;color:#5a6a6f}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:not(.text-center)   label[_ngcontent-%COMP%]{margin-left:.5em;margin-right:-1.6em}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span.input-req[_ngcontent-%COMP%]{margin-left:.3em;color:var(--app-rojo)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   mat-icon.input-info[_ngcontent-%COMP%]{margin-left:.3em;width:auto;height:auto;font-size:15px;line-height:1em;vertical-align:middle;color:var(--app-cyan)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]{display:contents}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{width:125px;margin-left:auto!important;margin-right:auto!important;background:#fff;border:1px solid var(--app-gris-claro);box-sizing:border-box;border-radius:50px;overflow:hidden;font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:17px;color:var(--app-gris-muy-oscuro)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   mat-button-toggle.mat-button-toggle-checked[_ngcontent-%COMP%]{color:#fff;background-color:var(--app-cyan);border:1px solid var(--app-cyan)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   mat-button-toggle.mat-button-toggle-disabled[_ngcontent-%COMP%]{background:#d1d1d1}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]     .mat-button-toggle-label-content{line-height:30px}@media (max-width:767px){.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%]{margin-right:0!important;margin-left:0!important}}@media (min-width:768px){.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%]{margin-right:-1.5rem!important;margin-left:-1.5rem!important}}@media (min-width:992px){.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%]{margin-right:-3.5rem!important;margin-left:-3.5rem!important}}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-card.plan-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;min-height:300px;width:235px;background:#fff;border:1px solid #97bcc566;box-sizing:border-box;border-radius:10px;box-shadow:none}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-card.plan-card.selected[_ngcontent-%COMP%]{filter:drop-shadow(0 5px 5px rgba(64,148,171,.24))}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-card.plan-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-tipo[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:18px;line-height:22px;margin-bottom:5px;color:var(--app-blue-cyan)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-card.plan-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-precio[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:24px;line-height:29px;margin-bottom:5px;color:var(--app-amarillo-claro)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-card.plan-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-duracion[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:500;font-size:11px;line-height:13px;color:var(--app-gris-muy-oscuro);white-space:normal}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-card.plan-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   mat-list.plan-perks[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:auto;font-family:Montserrat;font-style:normal;font-weight:500;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-card.plan-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   mat-list.plan-perks[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]     .mat-list-item-content{padding:0}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-card.plan-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   mat-list.plan-perks[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--app-cyan)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   .checks-seccion[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;font-weight:400;font-size:12px;line-height:14px;color:var(--app-gris-muy-oscuro)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   .checks-seccion[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--app-cyan)}"]}),t})()},{path:"general",component:st},{path:"cotizaciones",component:Dt},{path:"cotizaciones/:grupoId",component:Tn},{path:"cotizaciones/:grupoId/:cotizacionId",component:xe},{path:"ofertas-relampago",component:ao},{path:"ofertas-relampago/:id",component:So},{path:"usuarios",component:Ta},{path:"incidencias",component:Xa},{path:"incidencias/:id",component:Ka}]},{path:"catalogo",canActivate:[M],loadChildren:()=>Promise.all([e.e(592),e.e(383)]).then(e.bind(e,1168)).then(t=>t.CatalogoModule)},{path:"subscripcion-expirada",component:q.$,data:{sidebar:"none"},children:[{path:"",component:(()=>{class t{constructor(t,n,e,o,a,r,i){this.http=t,this.router=n,this.formBuilder=e,this.alert=o,this.authenticationService=a,this.spinner=r,this.documents=i,this.initial=!0,this.wait=!1,this.plan_prices=[],this._userSub=this.authenticationService.currentUser.subscribe(t=>{var n,e;if(this.currentUser=t,null===(n=this.currentUser.company)||void 0===n?void 0:n.current_period_end){if(Z().isSameOrBefore(Z(null===(e=this.currentUser.company)||void 0===e?void 0:e.current_period_end),"minute"))return void this.router.navigate(["/empresas"]);this.initial&&(this.initial=!1,this.authenticationService.refreshMe())}})}ngOnInit(){this.loadPlansList(),this.initForms()}ngOnDestroy(){this._userSub.unsubscribe()}initForms(){this.renewForm=this.formBuilder.group({price:[null,[r.kI.required]],paymentcard:[null,[r.kI.required]],tos:[!1,[r.kI.requiredTrue]]})}loadPlansList(){let t=(new i.LE).set("target","company").set("type","recurring");this.http.get(`${x.N.apiUrl}/plan-prices`,{params:t}).subscribe(t=>{this.plan_prices=t},t=>{})}changeCard(t){var n;null===(n=this.renewForm.get("paymentcard"))||void 0===n||n.setValue(t)}onSubmit(){if(this.renewForm.invalid)return console.log("form invalid"),void this.renewForm.markAllAsTouched();const t=this.renewForm.getRawValue();this.wait=!0,this.spinner.show(),this.http.post(`${x.N.apiUrl}/companies/update-subscription`,t).subscribe(t=>{var n;this.wait=!1,this.spinner.hide(),this.authenticationService.setStorageUser(t),this.alert.open({title:"Suscripci\xf3n actualizada",text:`Tu suscripci\xf3n esta activa hasta el d\xeda ${Z(null===(n=t.company)||void 0===n?void 0:n.current_period_end).format("DD/MM/YYYY HH:mm")}.`,showCancelButton:!1}).then(()=>{this.router.navigateByUrl("/empresas/perfil")})},t=>{this.wait=!1,this.spinner.hide(),console.log(t)})}isExpired(){var t,n,e;return!!(null===(t=this.currentUser.company)||void 0===t?void 0:t.current_period_end)&&!Z(null===(n=this.currentUser.company)||void 0===n?void 0:n.current_period_end).isSameOrBefore(Z(null===(e=this.currentUser.company)||void 0===e?void 0:e.current_period_end),"minute")}showTOS(t){t.preventDefault(),this.documents.presentModal("terms-of-service")}showPP(t){t.preventDefault(),this.documents.presentModal("privacy-policy")}}return t.\u0275fac=function(n){return new(n||t)(m.Y36(i.eN),m.Y36(a.F0),m.Y36(r.qu),m.Y36(C.c9),m.Y36(C.$h),m.Y36(g.t2),m.Y36(C.SR))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-subscripcion-expirada"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["message_emloyee",""],[1,"container","pt-5","px-md-5"],["renew_card",""],[1,"text-center"],[1,"my-4"],["class","my-4",4,"ngIf"],["class","renew-form py-2 px-lg-5 text-center",3,"formGroup","ngSubmit",4,"ngIf"],[1,"btn-row","mb-4"],["mat-flat-button","","color","accent",1,"btn-round","btn-sm",3,"disabled","click"],[1,"date"],[1,"renew-form","py-2","px-lg-5","text-center",3,"formGroup","ngSubmit"],[1,"form-group","mb-4"],["formControlName","price",1,"planes-group"],[1,"row","gx-4","planes-row","justify-content-center"],["class","col-auto mb-3",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"selectCard"],["inset",""],[1,"checks-seccion","text-center","mt-4"],["formControlName","tos"],[3,"click"],[1,"col-auto","mb-3"],[1,"plan-card","text-center"],[1,"plan-info"],[1,"plan-tipo"],[1,"plan-precio"],[1,"plan-duracion"],["dense","",1,"plan-perks"],[3,"hidden",4,"ngFor","ngForOf"],["color","accent",1,"mx-4",3,"value"],[3,"hidden"],["matListIcon",""]],template:function(t,n){if(1&t&&(m.YNc(0,vi,5,2,"ng-container",0),m.YNc(1,bi,11,4,"ng-template",null,1,m.W1O)),2&t){const t=m.MAs(2);m.Q6J("ngIf","administrator"==n.currentUser.role.type)("ngIfElse",t)}},directives:[o.O5,O.a8,O.n5,O.dn,O.hq,v.lW,r._Y,r.JL,r.sg,_t.A9,r.JJ,r.u,o.sg,ni.p,Y.d,Zt.oG,I.i$,_t.Yi,I.Tg,b.Hw,I.Nh,pt.TO],pipes:[o.uU,u.T,o.H9],styles:[".container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]{box-shadow:0 5px 5px #4094ab3d!important;border-radius:31px}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-weight:700;font-size:18px;line-height:22px;color:#00aad3}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;text-align:center}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:17px;color:#5a6a6f}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span.date[_ngcontent-%COMP%]{font-weight:700;color:#00aad3}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:14px;line-height:17px;color:#5a6a6f}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:not(.text-center)   label[_ngcontent-%COMP%]{margin-left:.5em;margin-right:-1.6em}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span.input-req[_ngcontent-%COMP%]{margin-left:.3em;color:var(--app-rojo)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   mat-icon.input-info[_ngcontent-%COMP%]{margin-left:.3em;width:auto;height:auto;font-size:15px;line-height:1em;vertical-align:middle;color:var(--app-cyan)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]{display:contents}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{width:125px;margin-left:auto!important;margin-right:auto!important;background:#fff;border:1px solid var(--app-gris-claro);box-sizing:border-box;border-radius:50px;overflow:hidden;font-family:Montserrat;font-style:normal;font-weight:700;font-size:12px;line-height:17px;color:var(--app-gris-muy-oscuro)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   mat-button-toggle.mat-button-toggle-checked[_ngcontent-%COMP%]{color:#fff;background-color:var(--app-cyan);border:1px solid var(--app-cyan)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   mat-button-toggle.mat-button-toggle-disabled[_ngcontent-%COMP%]{background:#d1d1d1}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]     .mat-button-toggle-label-content{line-height:30px}@media (max-width:767px){.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%]{margin-right:0!important;margin-left:0!important}}@media (min-width:768px){.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%]{margin-right:-1.5rem!important;margin-left:-1.5rem!important}}@media (min-width:992px){.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%]{margin-right:-3.5rem!important;margin-left:-3.5rem!important}}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-card.plan-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;min-height:300px;width:235px;background:#fff;border:1px solid #97bcc566;box-sizing:border-box;border-radius:10px;box-shadow:none}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-card.plan-card.selected[_ngcontent-%COMP%]{filter:drop-shadow(0 5px 5px rgba(64,148,171,.24))}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-card.plan-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-tipo[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:18px;line-height:22px;margin-bottom:5px;color:var(--app-blue-cyan)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-card.plan-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-precio[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:24px;line-height:29px;margin-bottom:5px;color:var(--app-amarillo-claro)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-card.plan-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-duracion[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:500;font-size:11px;line-height:13px;color:var(--app-gris-muy-oscuro);white-space:normal}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-card.plan-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   mat-list.plan-perks[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:auto;font-family:Montserrat;font-style:normal;font-weight:500;font-size:12px;line-height:15px;color:var(--app-gris-muy-oscuro)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-card.plan-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   mat-list.plan-perks[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]     .mat-list-item-content{padding:0}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   mat-button-toggle-group.planes-group[_ngcontent-%COMP%]   .planes-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-card.plan-card[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   mat-list.plan-perks[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--app-cyan)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   .checks-seccion[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;font-weight:400;font-size:12px;line-height:14px;color:var(--app-gris-muy-oscuro)}.container[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]   .renew-form[_ngcontent-%COMP%]   .checks-seccion[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--app-cyan)}"]}),t})()}]}];let Ai=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[a.Bz.forChild(Pi)],a.Bz]}),t})();var Ti=e(322);let wi=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({providers:[{provide:i.TP,useClass:Ti.sk,multi:!0},{provide:i.TP,useClass:Ti.aQ,multi:!0}],imports:[[o.ez,a.Bz,r.u5,r.UX,i.JF,c.k$,l.q,s._G,u.l,p,f.o,d.D,h.K,Ai]]}),t})()}}]);